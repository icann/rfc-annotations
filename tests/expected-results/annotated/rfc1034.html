<!DOCTYPE html>
<html lang="en" id="html">
<head><meta charset="UTF-8"><title>RFC 1034</title>
<style>
    /* some "global" declarations, please do not modify */
    html {font-size:8px;}
    pre {margin-top:0px; margin-bottom:0px;}
    .area {display:flex; flex-wrap:nowrap; overflow: auto;}
    .area .rfc {overflow:auto; flex-grow:0; flex-shrink:0;}
    .area .rfc .pagebreak {position:absolute; background-color:#eee; width:81ch; border:1px dashed #000; margin-top:0.5rem;}
    .floating {position:fixed; top:2px; right:2px;}

    /* font, color, background and other attributes which may be changed */
    body {font-family:'Arial';}

    /* index page only */
    .index .header {background-color:#222; color:#fff; font-weight:bold;}
    .index .odd {background-color:#e0e0e0;}
    .index .even {background-color:#e8e8e8;}
    .index tr.entry {font-family:'Arial Narrow';}
    .index tr.entry .rfc {font-family:'Courier New'; font-weight:bold;}
    .index tr.entry .timestamp {text-align:center}
    .index tr .asc::after {content:" ↑"; font-weight:bold; color:#D0FFD0;}
    .index tr .desc::after {content:" ↓"; font-weight:bold; color:#FFD0D0;}

    /* RFC pages */
    .line {background-color:#ddd; text-decoration:none; user-select:none;}

    pre.rfc.obsoleted {background-color:#FFD0D0;}
    pre.rfc.updated {background-color:#FFFFF0;}

    .area .annotation {background-color:#eee; width:1vw; flex-wrap:nowrap; flex-grow:1; flex-shrink:1; padding-left:2px; padding-right:4px; font-size:1rem; overflow:auto;}
    .area .annotation .entry {font-size:0.8rem; background-color:#FFFC90; margin-bottom:4px; border-style:solid; border-width:1px; box-shadow:2px 2px;}
    .area .annotation .err {font-size:0.8rem; background-color:#dddddd; margin-bottom:4px; border-style:solid; border-width:1px; box-shadow:2px 2px; overflow:auto;}
    .area .annotation .outdated {font-size:0.8rem; background-color:#ff8888; margin-bottom:4px; border-style:solid; border-width: 1px; box-shadow:2px 2px; overflow:auto;}
    .area .annotation .outdated .info {font-size:1.2rem; font-weight:bold; float:right;}
    .area .annotation .status {font-size:0.8rem; background-color:#eeeeee; margin-bottom:4px; border-style:solid; border-width:1px; box-shadow:2px 2px; overflow:auto;}
    .area .annotation .title {font-size:1.2rem; background-color:#000000a0; color:white; padding-left:2px; padding-right:2px; font-style:italic;}
    .area .annotation .title a {color:white;}
    .area .annotation .title .reference a {font-size:0.6rem; font-style:normal; vertical-align:top;}
    .area .annotation .title .caption {padding-left:1ch; font-style:normal; font-weight:bold;}
    .area .annotation .title .timestamp {font-size:0.6rem; float:right; font-style:normal;}
    .area .annotation .correct {margin-top:1rem; font-weight:bold;}
    .area .annotation .note {font-style:italic;}
    .area .annotation .reported {background-color:#FFF8D0; color:#A00;}
    .area .annotation .rejected {display:none;}
    .area .annotation .eclipsed {display:none;}
    .area .annotation .updated {background-color:#0E0;}
    .area .annotation .potentiallyupdated {background-color:#AEA;}
    .area .annotation .obsoleted {background-color:#E00;}
    .area .annotation .potentiallyobsoleted {background-color:#EAA;}

    del {color: red; user-select: none;}
    ins {color: green;}
    .correct em {color: green;}
</style>
<script>
    window.addEventListener('hashchange', showRFC);

    function clicked(element) {
        // attempt to select text?
        var selObj = window.getSelection();
        var selText = selObj == null ? "" : selObj.toString();
        if (selText != "") return;

        var source = event.target || event.srcElement;
        if (source.tagName == "A") {
            showRFC();
            return;
        }

        element = element.getElementsByClassName("notes")[0];
        if (!element) return;
        if (element.hasAttribute("hidden"))
            element.removeAttribute("hidden");
        else
            element.setAttribute("hidden", "hidden");
    }

    function hideRFC() {
        const tags = document.querySelectorAll("pre .rfc");
        Array.from(tags).forEach(tag => {tag.style.display = "none";});
        document.getElementById("hideBtn").setAttribute("hidden", "hidden");
        document.getElementById("showBtn").removeAttribute("hidden");
        window.location.hash = "";
    }

    function showRFC() {
        const tags = document.querySelectorAll("pre .rfc");
        Array.from(tags).forEach(tag => {tag.style.display = "block";});
        document.getElementById("showBtn").setAttribute("hidden", "hidden");
        document.getElementById("hideBtn").removeAttribute("hidden");
        window.location.hash = window.location.hash;
    }

    function adjustFontSize() {
        fontHeight = Math.min(14, Math.max(6, screen.width / 50))
        document.getElementById("html").style.fontSize = fontHeight + "px";
    }
</script>

</head>
<body onload="adjustFontSize()">
<noscript>For full functionality of this page please enable JavaScript</noscript>
<button class="floating" onclick="hideRFC()" id="hideBtn">Hide RFC</button>
<button class="floating" onclick="showRFC()" id="showBtn" hidden="hidden">Show RFC</button>
<div class="area">
<pre class="rfc"><span class="rfc"></span></pre>
<div class="annotation"></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1" href="#line-1">    1</a> Network Working Group                                     P. Mockapetris   
<a class="line" id="line-2" href="#line-2">    2</a> Request for Comments: 1034                                           ISI   
<a class="line" id="line-3" href="#line-3">    3</a> Obsoletes: RFCs <a href="https://datatracker.ietf.org/doc/rfc882/">882</a>, <a href="https://datatracker.ietf.org/doc/rfc883/">883</a>, <a href="https://datatracker.ietf.org/doc/rfc973/">973</a>                              November 1987   
<a class="line" id="line-4" href="#line-4">    4</a>                                                                            
<a class="line" id="line-5" href="#line-5">    5</a>                                                                            
<a class="line" id="line-6" href="#line-6">    6</a>                  <span class="h1">DOMAIN NAMES - CONCEPTS AND FACILITIES</span>                    
<a class="line" id="line-7" href="#line-7">    7</a>                                                                            
<a class="line" id="line-8" href="#line-8">    8</a>                                                                            
<a class="line" id="line-9" href="#line-9">    9</a>                                                                            
<a class="line" id="line-10" href="#line-10">   10</a> <span class="h2"><a class="selflink" id="section-1" href="#section-1">1</a>. STATUS OF THIS MEMO</span>                                                     
<a class="line" id="line-11" href="#line-11">   11</a>                                                                            
<a class="line" id="line-12" href="#line-12">   12</a> This RFC is an introduction to the Domain Name System (DNS), and omits     
<a class="line" id="line-13" href="#line-13">   13</a> many details which can be found in a companion RFC, &quot;Domain Names -        
<a class="line" id="line-14" href="#line-14">   14</a> Implementation and Specification&quot; [<a href="./rfc1035.html">RFC-1035</a>].  That RFC assumes that the   
<a class="line" id="line-15" href="#line-15">   15</a> reader is familiar with the concepts discussed in this memo.               
<a class="line" id="line-16" href="#line-16">   16</a>                                                                            
<a class="line" id="line-17" href="#line-17">   17</a> A subset of DNS functions and data types constitute an official            
<a class="line" id="line-18" href="#line-18">   18</a> protocol.  The official protocol includes standard queries and their       
<a class="line" id="line-19" href="#line-19">   19</a> responses and most of the Internet class data formats (e.g., host          
<a class="line" id="line-20" href="#line-20">   20</a> addresses).                                                                
<a class="line" id="line-21" href="#line-21">   21</a>                                                                            
<a class="line" id="line-22" href="#line-22">   22</a> However, the domain system is intentionally extensible.  Researchers are   
<a class="line" id="line-23" href="#line-23">   23</a> continuously proposing, implementing and experimenting with new data       
<a class="line" id="line-24" href="#line-24">   24</a> types, query types, classes, functions, etc.  Thus while the components    
<a class="line" id="line-25" href="#line-25">   25</a> of the official protocol are expected to stay essentially unchanged and    
<a class="line" id="line-26" href="#line-26">   26</a> operate as a production service, experimental behavior should always be    
<a class="line" id="line-27" href="#line-27">   27</a> expected in extensions beyond the official protocol.  Experimental or      
<a class="line" id="line-28" href="#line-28">   28</a> obsolete features are clearly marked in these RFCs, and such information   
<a class="line" id="line-29" href="#line-29">   29</a> should be used with caution.                                               
<a class="line" id="line-30" href="#line-30">   30</a>                                                                            
<a class="line" id="line-31" href="#line-31">   31</a> The reader is especially cautioned not to depend on the values which       
<a class="line" id="line-32" href="#line-32">   32</a> appear in examples to be current or complete, since their purpose is       
<a class="line" id="line-33" href="#line-33">   33</a> primarily pedagogical.  Distribution of this memo is unlimited.            
<a class="line" id="line-34" href="#line-34">   34</a>                                                                            
<a class="line" id="line-35" href="#line-35">   35</a> <span class="h2"><a class="selflink" id="section-2" href="#section-2">2</a>. INTRODUCTION</span>                                                            
<a class="line" id="line-36" href="#line-36">   36</a>                                                                            
<a class="line" id="line-37" href="#line-37">   37</a> This RFC introduces domain style names, their use for Internet mail and    
<a class="line" id="line-38" href="#line-38">   38</a> host address support, and the protocols and servers used to implement      
<a class="line" id="line-39" href="#line-39">   39</a> domain name facilities.                                                    
<a class="line" id="line-40" href="#line-40">   40</a>                                                                            
<a class="line" id="line-41" href="#line-41">   41</a> <span class="h3"><a class="selflink" id="section-2.1" href="#section-2.1">2.1</a>. The history of domain names</span>                                           
<a class="line" id="line-42" href="#line-42">   42</a>                                                                            
<a class="line" id="line-43" href="#line-43">   43</a> The impetus for the development of the domain system was growth in the     
<a class="line" id="line-44" href="#line-44">   44</a> Internet:                                                                  
<a class="line" id="line-45" href="#line-45">   45</a>                                                                            
<a class="line" id="line-46" href="#line-46">   46</a>    - Host name to address mappings were maintained by the Network          
<a class="line" id="line-47" href="#line-47">   47</a>      Information Center (NIC) in a single file (HOSTS.TXT) which           
<a class="line" id="line-48" href="#line-48">   48</a>      was FTPed by all hosts [RFC-952, <a href="https://datatracker.ietf.org/doc/rfc953/">RFC-953</a>].  The total network         
<a class="line" id="line-49" href="#line-49">   49</a>                                                                            
<a class="line" id="line-50" href="#line-50">   50</a>                                                                            
<a class="line" id="line-51" href="#line-51">   51</a>                                                                            
<a class="line" id="line-52" href="#line-52">   52</a> <span class="grey">Mockapetris                                                     [Page 1]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-2" ></span><a class="line" id="line-53" href="#line-53">   53</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-54" href="#line-54">   54</a>                                                                            
<a class="line" id="line-55" href="#line-55">   55</a>                                                                            
<a class="line" id="line-56" href="#line-56">   56</a>      bandwidth consumed in distributing a new version by this              
<a class="line" id="line-57" href="#line-57">   57</a>      scheme is proportional to the square of the number of hosts in        
<a class="line" id="line-58" href="#line-58">   58</a>      the network, and even when multiple levels of FTP are used,           
<a class="line" id="line-59" href="#line-59">   59</a>      the outgoing FTP load on the NIC host is considerable.                
<a class="line" id="line-60" href="#line-60">   60</a>      Explosive growth in the number of hosts didn&#x27;t bode well for          
<a class="line" id="line-61" href="#line-61">   61</a>      the future.                                                           
<a class="line" id="line-62" href="#line-62">   62</a>                                                                            
<a class="line" id="line-63" href="#line-63">   63</a>    - The network population was also changing in character.  The           
<a class="line" id="line-64" href="#line-64">   64</a>      timeshared hosts that made up the original ARPANET were being         
<a class="line" id="line-65" href="#line-65">   65</a>      replaced with local networks of workstations.  Local                  
<a class="line" id="line-66" href="#line-66">   66</a>      organizations were administering their own names and                  
<a class="line" id="line-67" href="#line-67">   67</a>      addresses, but had to wait for the NIC to change HOSTS.TXT to         
<a class="line" id="line-68" href="#line-68">   68</a>      make changes visible to the Internet at large.  Organizations         
<a class="line" id="line-69" href="#line-69">   69</a>      also wanted some local structure on the name space.                   
<a class="line" id="line-70" href="#line-70">   70</a>                                                                            
<a class="line" id="line-71" href="#line-71">   71</a>    - The applications on the Internet were getting more                    
<a class="line" id="line-72" href="#line-72">   72</a>      sophisticated and creating a need for general purpose name            
<a class="line" id="line-73" href="#line-73">   73</a>      service.                                                              
<a class="line" id="line-74" href="#line-74">   74</a>                                                                            
<a class="line" id="line-75" href="#line-75">   75</a>                                                                            
<a class="line" id="line-76" href="#line-76">   76</a> The result was several ideas about name spaces and their management        
<a class="line" id="line-77" href="#line-77">   77</a> [IEN-116, <a href="https://datatracker.ietf.org/doc/rfc799/">RFC-799</a>, <a href="https://datatracker.ietf.org/doc/rfc819/">RFC-819</a>, <a href="https://datatracker.ietf.org/doc/rfc830/">RFC-830</a>].  The proposals varied, but a         
<a class="line" id="line-78" href="#line-78">   78</a> common thread was the idea of a hierarchical name space, with the          
<a class="line" id="line-79" href="#line-79">   79</a> hierarchy roughly corresponding to organizational structure, and names     
<a class="line" id="line-80" href="#line-80">   80</a> using &quot;.&quot;  as the character to mark the boundary between hierarchy         
<a class="line" id="line-81" href="#line-81">   81</a> levels.  A design using a distributed database and generalized resources   
<a class="line" id="line-82" href="#line-82">   82</a> was described in [RFC-882, <a href="https://datatracker.ietf.org/doc/rfc883/">RFC-883</a>].  Based on experience with several     
<a class="line" id="line-83" href="#line-83">   83</a> implementations, the system evolved into the scheme described in this      
<a class="line" id="line-84" href="#line-84">   84</a> memo.                                                                      
<a class="line" id="line-85" href="#line-85">   85</a>                                                                            
<a class="line" id="line-86" href="#line-86">   86</a> The terms &quot;domain&quot; or &quot;domain name&quot; are used in many contexts beyond the   
<a class="line" id="line-87" href="#line-87">   87</a> DNS described here.  Very often, the term domain name is used to refer     
<a class="line" id="line-88" href="#line-88">   88</a> to a name with structure indicated by dots, but no relation to the DNS.    
<a class="line" id="line-89" href="#line-89">   89</a> This is particularly true in mail addressing [Quarterman 86].              
<a class="line" id="line-90" href="#line-90">   90</a>                                                                            
<a class="line" id="line-91" href="#line-91">   91</a> <span class="h3"><a class="selflink" id="section-2.2" href="#section-2.2">2.2</a>. DNS design goals</span>                                                      
<a class="line" id="line-92" href="#line-92">   92</a>                                                                            
<a class="line" id="line-93" href="#line-93">   93</a> The design goals of the DNS influence its structure.  They are:            
<a class="line" id="line-94" href="#line-94">   94</a>                                                                            
<a class="line" id="line-95" href="#line-95">   95</a>    - The primary goal is a consistent name space which will be used        
<a class="line" id="line-96" href="#line-96">   96</a>      for referring to resources.  In order to avoid the problems           
<a class="line" id="line-97" href="#line-97">   97</a>      caused by ad hoc encodings, names should not be required to           
<a class="line" id="line-98" href="#line-98">   98</a>      contain network identifiers, addresses, routes, or similar            
<a class="line" id="line-99" href="#line-99">   99</a>      information as part of the name.                                      
<a class="line" id="line-100" href="#line-100">  100</a>                                                                            
<a class="line" id="line-101" href="#line-101">  101</a>    - The sheer size of the database and frequency of updates               
<a class="line" id="line-102" href="#line-102">  102</a>      suggest that it must be maintained in a distributed manner,           
<a class="line" id="line-103" href="#line-103">  103</a>      with local caching to improve performance.  Approaches that           
<a class="line" id="line-104" href="#line-104">  104</a>                                                                            
<a class="line" id="line-105" href="#line-105">  105</a>                                                                            
<a class="line" id="line-106" href="#line-106">  106</a>                                                                            
<a class="line" id="line-107" href="#line-107">  107</a> <span class="grey">Mockapetris                                                     [Page 2]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-3" ></span><a class="line" id="line-108" href="#line-108">  108</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-109" href="#line-109">  109</a>                                                                            
<a class="line" id="line-110" href="#line-110">  110</a>                                                                            
<a class="line" id="line-111" href="#line-111">  111</a>      attempt to collect a consistent copy of the entire database           
<a class="line" id="line-112" href="#line-112">  112</a>      will become more and more expensive and difficult, and hence          
<a class="line" id="line-113" href="#line-113">  113</a>      should be avoided.  The same principle holds for the structure        
<a class="line" id="line-114" href="#line-114">  114</a>      of the name space, and in particular mechanisms for creating          
<a class="line" id="line-115" href="#line-115">  115</a>      and deleting names; these should also be distributed.                 
<a class="line" id="line-116" href="#line-116">  116</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="">GLOBAL</a> Paul Hoffman</span><span class="caption">Many RFCs say they update RFC 1034, but don't</span><span class="timestamp"></span></div><div class="notes"><p>
Many of the RFCs that are listed as updating RFC 1034 actually just
mention it, but don't actually update anything here.
For example, many of them simply define new RRtypes, which is not really an update
to RFC 1034, just to the IANA registry it created.
The RFCs that do update RFC 1034 are listed throughout this document.
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-117" href="#line-117">  117</a>    - Where there tradeoffs between the cost of acquiring data, the         
<a class="line" id="line-118" href="#line-118">  118</a>      speed of updates, and the accuracy of caches, the source of           
<a class="line" id="line-119" href="#line-119">  119</a>      the data should control the tradeoff.                                 
<a class="line" id="line-120" href="#line-120">  120</a>                                                                            
<a class="line" id="line-121" href="#line-121">  121</a>    - The costs of implementing such a facility dictate that it be          
<a class="line" id="line-122" href="#line-122">  122</a>      generally useful, and not restricted to a single application.         
<a class="line" id="line-123" href="#line-123">  123</a>      We should be able to use names to retrieve host addresses,            
<a class="line" id="line-124" href="#line-124">  124</a>      mailbox data, and other as yet undetermined information.  All         
<a class="line" id="line-125" href="#line-125">  125</a>      data associated with a name is tagged with a type, and queries        
<a class="line" id="line-126" href="#line-126">  126</a>      can be limited to a single type.                                      
<a class="line" id="line-127" href="#line-127">  127</a>                                                                            
<a class="line" id="line-128" href="#line-128">  128</a>    - Because we want the name space to be useful in dissimilar             
<a class="line" id="line-129" href="#line-129">  129</a>      networks and applications, we provide the ability to use the          
<a class="line" id="line-130" href="#line-130">  130</a>      same name space with different protocol families or                   
<a class="line" id="line-131" href="#line-131">  131</a>      management.  For example, host address formats differ between         
<a class="line" id="line-132" href="#line-132">  132</a>      protocols, though all protocols have the notion of address.           
<a class="line" id="line-133" href="#line-133">  133</a>      The DNS tags all data with a class as well as the type, so            
<a class="line" id="line-134" href="#line-134">  134</a>      that we can allow parallel use of different formats for data          
<a class="line" id="line-135" href="#line-135">  135</a>      of type address.                                                      
<a class="line" id="line-136" href="#line-136">  136</a>                                                                            
<a class="line" id="line-137" href="#line-137">  137</a>    - We want name server transactions to be independent of the             
<a class="line" id="line-138" href="#line-138">  138</a>      communications system that carries them.  Some systems may            
<a class="line" id="line-139" href="#line-139">  139</a>      wish to use datagrams for queries and responses, and only             
<a class="line" id="line-140" href="#line-140">  140</a>      establish virtual circuits for transactions that need the             
<a class="line" id="line-141" href="#line-141">  141</a>      reliability (e.g., database updates, long transactions); other        
<a class="line" id="line-142" href="#line-142">  142</a>      systems will use virtual circuits exclusively.                        
<a class="line" id="line-143" href="#line-143">  143</a>                                                                            
<a class="line" id="line-144" href="#line-144">  144</a>    - The system should be useful across a wide spectrum of host            
<a class="line" id="line-145" href="#line-145">  145</a>      capabilities.  Both personal computers and large timeshared           
<a class="line" id="line-146" href="#line-146">  146</a>      hosts should be able to use the system, though perhaps in             
<a class="line" id="line-147" href="#line-147">  147</a>      different ways.                                                       
<a class="line" id="line-148" href="#line-148">  148</a>                                                                            
<a class="line" id="line-149" href="#line-149">  149</a> <span class="h3"><a class="selflink" id="section-2.3" href="#section-2.3">2.3</a>. Assumptions about usage</span>                                               
<a class="line" id="line-150" href="#line-150">  150</a>                                                                            
<a class="line" id="line-151" href="#line-151">  151</a> The organization of the domain system derives from some assumptions        
<a class="line" id="line-152" href="#line-152">  152</a> about the needs and usage patterns of its user community and is designed   
<a class="line" id="line-153" href="#line-153">  153</a> to avoid many of the the complicated problems found in general purpose     
<a class="line" id="line-154" href="#line-154">  154</a> database systems.                                                          
<a class="line" id="line-155" href="#line-155">  155</a>                                                                            
<a class="line" id="line-156" href="#line-156">  156</a> The assumptions are:                                                       
<a class="line" id="line-157" href="#line-157">  157</a>                                                                            
<a class="line" id="line-158" href="#line-158">  158</a>    - The size of the total database will initially be proportional         
<a class="line" id="line-159" href="#line-159">  159</a>                                                                            
<a class="line" id="line-160" href="#line-160">  160</a>                                                                            
<a class="line" id="line-161" href="#line-161">  161</a>                                                                            
<a class="line" id="line-162" href="#line-162">  162</a> <span class="grey">Mockapetris                                                     [Page 3]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-4" ></span><a class="line" id="line-163" href="#line-163">  163</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-164" href="#line-164">  164</a>                                                                            
<a class="line" id="line-165" href="#line-165">  165</a>                                                                            
<a class="line" id="line-166" href="#line-166">  166</a>      to the number of hosts using the system, but will eventually          
<a class="line" id="line-167" href="#line-167">  167</a>      grow to be proportional to the number of users on those hosts         
<a class="line" id="line-168" href="#line-168">  168</a>      as mailboxes and other information are added to the domain            
<a class="line" id="line-169" href="#line-169">  169</a>      system.                                                               
<a class="line" id="line-170" href="#line-170">  170</a>                                                                            
<a class="line" id="line-171" href="#line-171">  171</a>    - Most of the data in the system will change very slowly (e.g.,         
<a class="line" id="line-172" href="#line-172">  172</a>      mailbox bindings, host addresses), but that the system should         
<a class="line" id="line-173" href="#line-173">  173</a>      be able to deal with subsets that change more rapidly (on the         
<a class="line" id="line-174" href="#line-174">  174</a>      order of seconds or minutes).                                         
<a class="line" id="line-175" href="#line-175">  175</a>                                                                            
<a class="line" id="line-176" href="#line-176">  176</a>    - The administrative boundaries used to distribute                      
<a class="line" id="line-177" href="#line-177">  177</a>      responsibility for the database will usually correspond to            
<a class="line" id="line-178" href="#line-178">  178</a>      organizations that have one or more hosts.  Each organization         
<a class="line" id="line-179" href="#line-179">  179</a>      that has responsibility for a particular set of domains will          
<a class="line" id="line-180" href="#line-180">  180</a>      provide redundant name servers, either on the organization&#x27;s          
<a class="line" id="line-181" href="#line-181">  181</a>      own hosts or other hosts that the organization arranges to            
<a class="line" id="line-182" href="#line-182">  182</a>      use.                                                                  
<a class="line" id="line-183" href="#line-183">  183</a>                                                                            
<a class="line" id="line-184" href="#line-184">  184</a>    - Clients of the domain system should be able to identify               
<a class="line" id="line-185" href="#line-185">  185</a>      trusted name servers they prefer to use before accepting              
<a class="line" id="line-186" href="#line-186">  186</a>      referrals to name servers outside of this &quot;trusted&quot; set.              
<a class="line" id="line-187" href="#line-187">  187</a>                                                                            
<a class="line" id="line-188" href="#line-188">  188</a>    - Access to information is more critical than instantaneous             
<a class="line" id="line-189" href="#line-189">  189</a>      updates or guarantees of consistency.  Hence the update               
<a class="line" id="line-190" href="#line-190">  190</a>      process allows updates to percolate out through the users of          
<a class="line" id="line-191" href="#line-191">  191</a>      the domain system rather than guaranteeing that all copies are        
<a class="line" id="line-192" href="#line-192">  192</a>      simultaneously updated.  When updates are unavailable due to          
<a class="line" id="line-193" href="#line-193">  193</a>      network or host failure, the usual course is to believe old           
<a class="line" id="line-194" href="#line-194">  194</a>      information while continuing efforts to update it.  The               
<a class="line" id="line-195" href="#line-195">  195</a>      general model is that copies are distributed with timeouts for        
<a class="line" id="line-196" href="#line-196">  196</a>      refreshing.  The distributor sets the timeout value and the           
<a class="line" id="line-197" href="#line-197">  197</a>      recipient of the distribution is responsible for performing           
<a class="line" id="line-198" href="#line-198">  198</a>      the refresh.  In special situations, very short intervals can         
<a class="line" id="line-199" href="#line-199">  199</a>      be specified, or the owner can prohibit copies.                       
<a class="line" id="line-200" href="#line-200">  200</a>                                                                            
<a class="line" id="line-201" href="#line-201">  201</a>    - In any system that has a distributed database, a particular           
<a class="line" id="line-202" href="#line-202">  202</a>      name server may be presented with a query that can only be            
<a class="line" id="line-203" href="#line-203">  203</a>      answered by some other server.  The two general approaches to         
<a class="line" id="line-204" href="#line-204">  204</a>      dealing with this problem are &quot;recursive&quot;, in which the first         
<a class="line" id="line-205" href="#line-205">  205</a>      server pursues the query for the client at another server, and        
<a class="line" id="line-206" href="#line-206">  206</a>      &quot;iterative&quot;, in which the server refers the client to another         
<a class="line" id="line-207" href="#line-207">  207</a>      server and lets the client pursue the query.  Both approaches         
<a class="line" id="line-208" href="#line-208">  208</a>      have advantages and disadvantages, but the iterative approach         
<a class="line" id="line-209" href="#line-209">  209</a>      is preferred for the datagram style of access.  The domain            
<a class="line" id="line-210" href="#line-210">  210</a>      system requires implementation of the iterative approach, but         
<a class="line" id="line-211" href="#line-211">  211</a>      allows the recursive approach as an option.                           
<a class="line" id="line-212" href="#line-212">  212</a>                                                                            
<a class="line" id="line-213" href="#line-213">  213</a>                                                                            
<a class="line" id="line-214" href="#line-214">  214</a>                                                                            
<a class="line" id="line-215" href="#line-215">  215</a>                                                                            
<a class="line" id="line-216" href="#line-216">  216</a>                                                                            
<a class="line" id="line-217" href="#line-217">  217</a> <span class="grey">Mockapetris                                                     [Page 4]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-5" ></span><a class="line" id="line-218" href="#line-218">  218</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-219" href="#line-219">  219</a>                                                                            
<a class="line" id="line-220" href="#line-220">  220</a>                                                                            
<a class="line" id="line-221" href="#line-221">  221</a> The domain system assumes that all data originates in master files         
<a class="line" id="line-222" href="#line-222">  222</a> scattered through the hosts that use the domain system.  These master      
<a class="line" id="line-223" href="#line-223">  223</a> files are updated by local system administrators.  Master files are text   
<a class="line" id="line-224" href="#line-224">  224</a> files that are read by a local name server, and hence become available     
<a class="line" id="line-225" href="#line-225">  225</a> through the name servers to users of the domain system.  The user          
<a class="line" id="line-226" href="#line-226">  226</a> programs access name servers through standard programs called resolvers.   
<a class="line" id="line-227" href="#line-227">  227</a>                                                                            
<a class="line" id="line-228" href="#line-228">  228</a> The standard format of master files allows them to be exchanged between    
<a class="line" id="line-229" href="#line-229">  229</a> hosts (via FTP, mail, or some other mechanism); this facility is useful    
<a class="line" id="line-230" href="#line-230">  230</a> when an organization wants a domain, but doesn&#x27;t want to support a name    
<a class="line" id="line-231" href="#line-231">  231</a> server.  The organization can maintain the master files locally using a    
<a class="line" id="line-232" href="#line-232">  232</a> text editor, transfer them to a foreign host which runs a name server,     
<a class="line" id="line-233" href="#line-233">  233</a> and then arrange with the system administrator of the name server to get   
<a class="line" id="line-234" href="#line-234">  234</a> the files loaded.                                                          
<a class="line" id="line-235" href="#line-235">  235</a>                                                                            
<a class="line" id="line-236" href="#line-236">  236</a> Each host&#x27;s name servers and resolvers are configured by a local system    
<a class="line" id="line-237" href="#line-237">  237</a> administrator [<a href="https://datatracker.ietf.org/doc/rfc1033/" title="&quot;Domain Administrators Operations Guide&quot;">RFC-1033</a>].  For a name server, this configuration data      
<a class="line" id="line-238" href="#line-238">  238</a> includes the identity of local master files and instructions on which      
<a class="line" id="line-239" href="#line-239">  239</a> non-local master files are to be loaded from foreign servers.  The name    
<a class="line" id="line-240" href="#line-240">  240</a> server uses the master files or copies to load its zones.  For             
<a class="line" id="line-241" href="#line-241">  241</a> resolvers, the configuration data identifies the name servers which        
<a class="line" id="line-242" href="#line-242">  242</a> should be the primary sources of information.                              
<a class="line" id="line-243" href="#line-243">  243</a>                                                                            
<a class="line" id="line-244" href="#line-244">  244</a> The domain system defines procedures for accessing the data and for        
<a class="line" id="line-245" href="#line-245">  245</a> referrals to other name servers.  The domain system also defines           
<a class="line" id="line-246" href="#line-246">  246</a> procedures for caching retrieved data and for periodic refreshing of       
<a class="line" id="line-247" href="#line-247">  247</a> data defined by the system administrator.                                  
<a class="line" id="line-248" href="#line-248">  248</a>                                                                            
<a class="line" id="line-249" href="#line-249">  249</a> The system administrators provide:                                         
<a class="line" id="line-250" href="#line-250">  250</a>                                                                            
<a class="line" id="line-251" href="#line-251">  251</a>    - The definition of zone boundaries.                                    
<a class="line" id="line-252" href="#line-252">  252</a>                                                                            
<a class="line" id="line-253" href="#line-253">  253</a>    - Master files of data.                                                 
<a class="line" id="line-254" href="#line-254">  254</a>                                                                            
<a class="line" id="line-255" href="#line-255">  255</a>    - Updates to master files.                                              
<a class="line" id="line-256" href="#line-256">  256</a>                                                                            
<a class="line" id="line-257" href="#line-257">  257</a>    - Statements of the refresh policies desired.                           
<a class="line" id="line-258" href="#line-258">  258</a>                                                                            
<a class="line" id="line-259" href="#line-259">  259</a> The domain system provides:                                                
<a class="line" id="line-260" href="#line-260">  260</a>                                                                            
<a class="line" id="line-261" href="#line-261">  261</a>    - Standard formats for resource data.                                   
<a class="line" id="line-262" href="#line-262">  262</a>                                                                            
<a class="line" id="line-263" href="#line-263">  263</a>    - Standard methods for querying the database.                           
<a class="line" id="line-264" href="#line-264">  264</a>                                                                            
<a class="line" id="line-265" href="#line-265">  265</a>    - Standard methods for name servers to refresh local data from          
<a class="line" id="line-266" href="#line-266">  266</a>      foreign name servers.                                                 
<a class="line" id="line-267" href="#line-267">  267</a>                                                                            
<a class="line" id="line-268" href="#line-268">  268</a>                                                                            
<a class="line" id="line-269" href="#line-269">  269</a>                                                                            
<a class="line" id="line-270" href="#line-270">  270</a>                                                                            
<a class="line" id="line-271" href="#line-271">  271</a>                                                                            
<a class="line" id="line-272" href="#line-272">  272</a> <span class="grey">Mockapetris                                                     [Page 5]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-6" ></span><a class="line" id="line-273" href="#line-273">  273</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-274" href="#line-274">  274</a>                                                                            
<a class="line" id="line-275" href="#line-275">  275</a>                                                                            
<a class="line" id="line-276" href="#line-276">  276</a> <span class="h3"><a class="selflink" id="section-2.4" href="#section-2.4">2.4</a>. Elements of the DNS</span>                                                   
<a class="line" id="line-277" href="#line-277">  277</a>                                                                            
<a class="line" id="line-278" href="#line-278">  278</a> The DNS has three major components:                                        
<a class="line" id="line-279" href="#line-279">  279</a>                                                                            
<a class="line" id="line-280" href="#line-280">  280</a>    - The DOMAIN NAME SPACE and RESOURCE RECORDS, which are                 
<a class="line" id="line-281" href="#line-281">  281</a>      specifications for a tree structured name space and data              
<a class="line" id="line-282" href="#line-282">  282</a>      associated with the names.  Conceptually, each node and leaf          
<a class="line" id="line-283" href="#line-283">  283</a>      of the domain name space tree names a set of information, and         
<a class="line" id="line-284" href="#line-284">  284</a>      query operations are attempts to extract specific types of            
<a class="line" id="line-285" href="#line-285">  285</a>      information from a particular set.  A query names the domain          
<a class="line" id="line-286" href="#line-286">  286</a>      name of interest and describes the type of resource                   
<a class="line" id="line-287" href="#line-287">  287</a>      information that is desired.  For example, the Internet               
<a class="line" id="line-288" href="#line-288">  288</a>      uses some of its domain names to identify hosts; queries for          
<a class="line" id="line-289" href="#line-289">  289</a>      address resources return Internet host addresses.                     
<a class="line" id="line-290" href="#line-290">  290</a>                                                                            
<a class="line" id="line-291" href="#line-291">  291</a>    - NAME SERVERS are server programs which hold information about         
<a class="line" id="line-292" href="#line-292">  292</a>      the domain tree&#x27;s structure and set information.  A name              
<a class="line" id="line-293" href="#line-293">  293</a>      server may cache structure or set information about any part          
<a class="line" id="line-294" href="#line-294">  294</a>      of the domain tree, but in general a particular name server           
<a class="line" id="line-295" href="#line-295">  295</a>      has complete information about a subset of the domain space,          
<a class="line" id="line-296" href="#line-296">  296</a>      and pointers to other name servers that can be used to lead to        
<a class="line" id="line-297" href="#line-297">  297</a>      information from any part of the domain tree.  Name servers           
<a class="line" id="line-298" href="#line-298">  298</a>      know the parts of the domain tree for which they have complete        
<a class="line" id="line-299" href="#line-299">  299</a>      information; a name server is said to be an AUTHORITY for             
<a class="line" id="line-300" href="#line-300">  300</a>      these parts of the name space.  Authoritative information is          
<a class="line" id="line-301" href="#line-301">  301</a>      organized into units called ZONEs, and these zones can be             
<a class="line" id="line-302" href="#line-302">  302</a>      automatically distributed to the name servers which provide           
<a class="line" id="line-303" href="#line-303">  303</a>      redundant service for the data in a zone.                             
<a class="line" id="line-304" href="#line-304">  304</a>                                                                            
<a class="line" id="line-305" href="#line-305">  305</a>    - RESOLVERS are programs that extract information from name             
<a class="line" id="line-306" href="#line-306">  306</a>      servers in response to client requests.  Resolvers must be            
<a class="line" id="line-307" href="#line-307">  307</a>      able to access at least one name server and use that name             
<a class="line" id="line-308" href="#line-308">  308</a>      server&#x27;s information to answer a query directly, or pursue the        
<a class="line" id="line-309" href="#line-309">  309</a>      query using referrals to other name servers.  A resolver will         
<a class="line" id="line-310" href="#line-310">  310</a>      typically be a system routine that is directly accessible to          
<a class="line" id="line-311" href="#line-311">  311</a>      user programs; hence no protocol is necessary between the             
<a class="line" id="line-312" href="#line-312">  312</a>      resolver and the user program.                                        
<a class="line" id="line-313" href="#line-313">  313</a>                                                                            
<a class="line" id="line-314" href="#line-314">  314</a> These three components roughly correspond to the three layers or views     
<a class="line" id="line-315" href="#line-315">  315</a> of the domain system:                                                      
<a class="line" id="line-316" href="#line-316">  316</a>                                                                            
<a class="line" id="line-317" href="#line-317">  317</a>    - From the user&#x27;s point of view, the domain system is accessed          
<a class="line" id="line-318" href="#line-318">  318</a>      through a simple procedure or OS call to a local resolver.            
<a class="line" id="line-319" href="#line-319">  319</a>      The domain space consists of a single tree and the user can           
<a class="line" id="line-320" href="#line-320">  320</a>      request information from any section of the tree.                     
<a class="line" id="line-321" href="#line-321">  321</a>                                                                            
<a class="line" id="line-322" href="#line-322">  322</a>    - From the resolver&#x27;s point of view, the domain system is               
<a class="line" id="line-323" href="#line-323">  323</a>      composed of an unknown number of name servers.  Each name             
<a class="line" id="line-324" href="#line-324">  324</a>                                                                            
<a class="line" id="line-325" href="#line-325">  325</a>                                                                            
<a class="line" id="line-326" href="#line-326">  326</a>                                                                            
<a class="line" id="line-327" href="#line-327">  327</a> <span class="grey">Mockapetris                                                     [Page 6]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-7" ></span><a class="line" id="line-328" href="#line-328">  328</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-329" href="#line-329">  329</a>                                                                            
<a class="line" id="line-330" href="#line-330">  330</a>                                                                            
<a class="line" id="line-331" href="#line-331">  331</a>      server has one or more pieces of the whole domain tree&#x27;s data,        
<a class="line" id="line-332" href="#line-332">  332</a>      but the resolver views each of these databases as essentially         
<a class="line" id="line-333" href="#line-333">  333</a>      static.                                                               
<a class="line" id="line-334" href="#line-334">  334</a>                                                                            
<a class="line" id="line-335" href="#line-335">  335</a>    - From a name server&#x27;s point of view, the domain system consists        
<a class="line" id="line-336" href="#line-336">  336</a>      of separate sets of local information called zones.  The name         
<a class="line" id="line-337" href="#line-337">  337</a>      server has local copies of some of the zones.  The name server        
<a class="line" id="line-338" href="#line-338">  338</a>      must periodically refresh its zones from master copies in             
<a class="line" id="line-339" href="#line-339">  339</a>      local files or foreign name servers.  The name server must            
<a class="line" id="line-340" href="#line-340">  340</a>      concurrently process queries that arrive from resolvers.              
<a class="line" id="line-341" href="#line-341">  341</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial verified john kristoff"><div class="title"><span class="reference"><a href="#line-117">line-117</a> John Kristoff</span><span class="caption"><span id="rfc.erratum.1074">(Editorial Erratum #<a target='_blank' title='john kristoff (Editorial)' href='https://www.rfc-editor.org/errata/eid1074'>1074</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'>Section 2.2 says:<pre>
  - Where there tradeoffs between the cost of acquiring data, the
</pre></div>
<div class='correct'>It should say:<pre>
  - Where there <ins>are</ins> tradeoffs between the cost of acquiring data, the
</pre></div>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-342" href="#line-342">  342</a> In the interests of performance, implementations may couple these          
<a class="line" id="line-343" href="#line-343">  343</a> functions.  For example, a resolver on the same machine as a name server   
<a class="line" id="line-344" href="#line-344">  344</a> might share a database consisting of the the zones managed by the name     
<a class="line" id="line-345" href="#line-345">  345</a> server and the cache managed by the resolver.                              
<a class="line" id="line-346" href="#line-346">  346</a>                                                                            
<a class="line" id="line-347" href="#line-347">  347</a> <span class="h2"><a class="selflink" id="section-3" href="#section-3">3</a>. DOMAIN NAME SPACE and RESOURCE RECORDS</span>                                  
<a class="line" id="line-348" href="#line-348">  348</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial heldfordocumentupdate jean-philippe paradis"><div class="title"><span class="reference"><a href="#line-342">line-342</a> Jean-Philippe Paradis</span><span class="caption"><span id="rfc.erratum.4270">(Editorial Erratum #<a target='_blank' title='jean-philippe paradis (Editorial)' href='https://www.rfc-editor.org/errata/eid4270'>4270</a>) [Held for Document Update]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
In the interests of performance, implementations may couple these
functions.  For example, a resolver on the same machine as a name server
might share a database consisting of the the zones managed by the name
server and the cache managed by the resolver.
</pre></div>
<div class='correct'>It should say:<pre>
In the interests of performance, implementations may couple these
functions.  For example, a resolver on the same machine as a name server
might share a database consisting of <del>the </del>the zones managed by the name
server and the cache managed by the resolver.
</pre></div>
<hr/>
<div class='note'>
Just a duplicate "the".
</div>

</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-349" href="#line-349">  349</a> <span class="h3"><a class="selflink" id="section-3.1" href="#section-3.1">3.1</a>. Name space specifications and terminology</span>                             
<a class="line" id="line-350" href="#line-350">  350</a>                                                                            
<a class="line" id="line-351" href="#line-351">  351</a> The domain name space is a tree structure.  Each node and leaf on the      
<a class="line" id="line-352" href="#line-352">  352</a> tree corresponds to a resource set (which may be empty).  The domain       
<a class="line" id="line-353" href="#line-353">  353</a> system makes no distinctions between the uses of the interior nodes and    
<a class="line" id="line-354" href="#line-354">  354</a> leaves, and this memo uses the term &quot;node&quot; to refer to both.               
<a class="line" id="line-355" href="#line-355">  355</a>                                                                            
<a class="line" id="line-356" href="#line-356">  356</a> Each node has a label, which is zero to 63 octets in length.  Brother      
<a class="line" id="line-357" href="#line-357">  357</a> nodes may not have the same label, although the same label can be used     
<a class="line" id="line-358" href="#line-358">  358</a> for nodes which are not brothers.  One label is reserved, and that is      
<a class="line" id="line-359" href="#line-359">  359</a> the null (i.e., zero length) label used for the root.                      
<a class="line" id="line-360" href="#line-360">  360</a>                                                                            
<a class="line" id="line-361" href="#line-361">  361</a> The domain name of a node is the list of the labels on the path from the   
<a class="line" id="line-362" href="#line-362">  362</a> node to the root of the tree.  By convention, the labels that compose a    
<a class="line" id="line-363" href="#line-363">  363</a> domain name are printed or read left to right, from the most specific      
<a class="line" id="line-364" href="#line-364">  364</a> (lowest, farthest from the root) to the least specific (highest, closest   
<a class="line" id="line-365" href="#line-365">  365</a> to the root).                                                              
<a class="line" id="line-366" href="#line-366">  366</a>                                                                            
<a class="line" id="line-367" href="#line-367">  367</a> Internally, programs that manipulate domain names should represent them    
<a class="line" id="line-368" href="#line-368">  368</a> as sequences of labels, where each label is a length octet followed by     
<a class="line" id="line-369" href="#line-369">  369</a> an octet string.  Because all domain names end at the root, which has a    
<a class="line" id="line-370" href="#line-370">  370</a> null string for a label, these internal representations can use a length   
<a class="line" id="line-371" href="#line-371">  371</a> byte of zero to terminate a domain name.                                   
<a class="line" id="line-372" href="#line-372">  372</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-349">line-349</a> Paul Hoffman</span><span class="caption">RFC 8020 clarifies empty non-terminals and zone cuts</span><span class="timestamp"></span></div><div class="notes"><p>
<a target='_blank' href='https://datatracker.ietf.org/doc/rfc8020/'>RFC8020</a> extensively describes how zone cuts are determined,
particularly in the presence of empty non-terminals.
It says "This document states clearly that when a DNS resolver receives a
response with a response code of NXDOMAIN, it means that the domain
name which is thus denied AND ALL THE NAMES UNDER IT do not exist."
</p>
<p>
Section 3.1 of RFC 8020 says:
<br/>
<pre>
This document clarifies possible ambiguities in [RFC1034] that did
not clearly distinguish Empty Non-Terminal (ENT) names ([RFC7719])
from nonexistent names, and it refers to subsequent documents that
do.  ENTs are nodes in the DNS that do not have resource record sets
associated with them but have descendant nodes that do.  The correct
response to ENTs is NODATA (i.e., a response code of NOERROR and an
empty answer section).  Additional clarifying language on these
points is provided in Section 7.16 of [RFC2136] and in Sections 2.2.2
and 2.2.3 of [RFC4592].
</pre>
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-373" href="#line-373">  373</a> By convention, domain names can be stored with arbitrary case, but         
<a class="line" id="line-374" href="#line-374">  374</a> domain name comparisons for all present domain functions are done in a     
<a class="line" id="line-375" href="#line-375">  375</a> case-insensitive manner, assuming an ASCII character set, and a high       
<a class="line" id="line-376" href="#line-376">  376</a> order zero bit.  This means that you are free to create a node with        
<a class="line" id="line-377" href="#line-377">  377</a> label &quot;A&quot; or a node with label &quot;a&quot;, but not both as brothers; you could    
<a class="line" id="line-378" href="#line-378">  378</a> refer to either using &quot;a&quot; or &quot;A&quot;.  When you receive a domain name or       
<a class="line" id="line-379" href="#line-379">  379</a>                                                                            
<a class="line" id="line-380" href="#line-380">  380</a>                                                                            
<a class="line" id="line-381" href="#line-381">  381</a>                                                                            
<a class="line" id="line-382" href="#line-382">  382</a> <span class="grey">Mockapetris                                                     [Page 7]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-8" ></span><a class="line" id="line-383" href="#line-383">  383</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-384" href="#line-384">  384</a>                                                                            
<a class="line" id="line-385" href="#line-385">  385</a>                                                                            
<a class="line" id="line-386" href="#line-386">  386</a> label, you should preserve its case.  The rationale for this choice is     
<a class="line" id="line-387" href="#line-387">  387</a> that we may someday need to add full binary domain names for new           
<a class="line" id="line-388" href="#line-388">  388</a> services; existing services would not be changed.                          
<a class="line" id="line-389" href="#line-389">  389</a>                                                                            
<a class="line" id="line-390" href="#line-390">  390</a> When a user needs to type a domain name, the length of each label is       
<a class="line" id="line-391" href="#line-391">  391</a> omitted and the labels are separated by dots (&quot;.&quot;).  Since a complete      
<a class="line" id="line-392" href="#line-392">  392</a> domain name ends with the root label, this leads to a printed form which   
<a class="line" id="line-393" href="#line-393">  393</a> ends in a dot.  We use this property to distinguish between:               
<a class="line" id="line-394" href="#line-394">  394</a>                                                                            
<a class="line" id="line-395" href="#line-395">  395</a>    - a character string which represents a complete domain name            
<a class="line" id="line-396" href="#line-396">  396</a>      (often called &quot;absolute&quot;).  For example, &quot;poneria.ISI.EDU.&quot;           
<a class="line" id="line-397" href="#line-397">  397</a>                                                                            
<a class="line" id="line-398" href="#line-398">  398</a>    - a character string that represents the starting labels of a           
<a class="line" id="line-399" href="#line-399">  399</a>      domain name which is incomplete, and should be completed by           
<a class="line" id="line-400" href="#line-400">  400</a>      local software using knowledge of the local domain (often             
<a class="line" id="line-401" href="#line-401">  401</a>      called &quot;relative&quot;).  For example, &quot;poneria&quot; used in the               
<a class="line" id="line-402" href="#line-402">  402</a>      ISI.EDU domain.                                                       
<a class="line" id="line-403" href="#line-403">  403</a>                                                                            
<a class="line" id="line-404" href="#line-404">  404</a> Relative names are either taken relative to a well known origin, or to a   
<a class="line" id="line-405" href="#line-405">  405</a> list of domains used as a search list.  Relative names appear mostly at    
<a class="line" id="line-406" href="#line-406">  406</a> the user interface, where their interpretation varies from                 
<a class="line" id="line-407" href="#line-407">  407</a> implementation to implementation, and in master files, where they are      
<a class="line" id="line-408" href="#line-408">  408</a> relative to a single origin domain name.  The most common interpretation   
<a class="line" id="line-409" href="#line-409">  409</a> uses the root &quot;.&quot; as either the single origin or as one of the members     
<a class="line" id="line-410" href="#line-410">  410</a> of the search list, so a multi-label relative name is often one where      
<a class="line" id="line-411" href="#line-411">  411</a> the trailing dot has been omitted to save typing.                          
<a class="line" id="line-412" href="#line-412">  412</a>                                                                            
<a class="line" id="line-413" href="#line-413">  413</a> To simplify implementations, the total number of octets that represent a   
<a class="line" id="line-414" href="#line-414">  414</a> domain name (i.e., the sum of all label octets and label lengths) is       
<a class="line" id="line-415" href="#line-415">  415</a> limited to 255.                                                            
<a class="line" id="line-416" href="#line-416">  416</a>                                                                            
<a class="line" id="line-417" href="#line-417">  417</a> A domain is identified by a domain name, and consists of that part of      
<a class="line" id="line-418" href="#line-418">  418</a> the domain name space that is at or below the domain name which            
<a class="line" id="line-419" href="#line-419">  419</a> specifies the domain.  A domain is a subdomain of another domain if it     
<a class="line" id="line-420" href="#line-420">  420</a> is contained within that domain.  This relationship can be tested by       
<a class="line" id="line-421" href="#line-421">  421</a> seeing if the subdomain&#x27;s name ends with the containing domain&#x27;s name.     
<a class="line" id="line-422" href="#line-422">  422</a> For example, A.B.C.D is a subdomain of B.C.D, C.D, D, and &quot; &quot;.             
<a class="line" id="line-423" href="#line-423">  423</a>                                                                            
<a class="line" id="line-424" href="#line-424">  424</a> <span class="h3"><a class="selflink" id="section-3.2" href="#section-3.2">3.2</a>. Administrative guidelines on use</span>                                      
<a class="line" id="line-425" href="#line-425">  425</a>                                                                            
<a class="line" id="line-426" href="#line-426">  426</a> As a matter of policy, the DNS technical specifications do not mandate a   
<a class="line" id="line-427" href="#line-427">  427</a> particular tree structure or rules for selecting labels; its goal is to    
<a class="line" id="line-428" href="#line-428">  428</a> be as general as possible, so that it can be used to build arbitrary       
<a class="line" id="line-429" href="#line-429">  429</a> applications.  In particular, the system was designed so that the name     
<a class="line" id="line-430" href="#line-430">  430</a> space did not have to be organized along the lines of network              
<a class="line" id="line-431" href="#line-431">  431</a> boundaries, name servers, etc.  The rationale for this is not that the     
<a class="line" id="line-432" href="#line-432">  432</a> name space should have no implied semantics, but rather that the choice    
<a class="line" id="line-433" href="#line-433">  433</a> of implied semantics should be left open to be used for the problem at     
<a class="line" id="line-434" href="#line-434">  434</a>                                                                            
<a class="line" id="line-435" href="#line-435">  435</a>                                                                            
<a class="line" id="line-436" href="#line-436">  436</a>                                                                            
<a class="line" id="line-437" href="#line-437">  437</a> <span class="grey">Mockapetris                                                     [Page 8]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-9" ></span><a class="line" id="line-438" href="#line-438">  438</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-439" href="#line-439">  439</a>                                                                            
<a class="line" id="line-440" href="#line-440">  440</a>                                                                            
<a class="line" id="line-441" href="#line-441">  441</a> hand, and that different parts of the tree can have different implied      
<a class="line" id="line-442" href="#line-442">  442</a> semantics.  For example, the IN-ADDR.ARPA domain is organized and          
<a class="line" id="line-443" href="#line-443">  443</a> distributed by network and host address because its role is to translate   
<a class="line" id="line-444" href="#line-444">  444</a> from network or host numbers to names; NetBIOS domains [RFC-1001, RFC-     
<a class="line" id="line-445" href="#line-445">  445</a> 1002] are flat because that is appropriate for that application.           
<a class="line" id="line-446" href="#line-446">  446</a>                                                                            
<a class="line" id="line-447" href="#line-447">  447</a> However, there are some guidelines that apply to the &quot;normal&quot; parts of     
<a class="line" id="line-448" href="#line-448">  448</a> the name space used for hosts, mailboxes, etc., that will make the name    
<a class="line" id="line-449" href="#line-449">  449</a> space more uniform, provide for growth, and minimize problems as           
<a class="line" id="line-450" href="#line-450">  450</a> software is converted from the older host table.  The political            
<a class="line" id="line-451" href="#line-451">  451</a> decisions about the top levels of the tree originated in <a href="https://datatracker.ietf.org/doc/rfc920/">RFC-920</a>.          
<a class="line" id="line-452" href="#line-452">  452</a> Current policy for the top levels is discussed in [<a href="https://datatracker.ietf.org/doc/rfc1032/" title="&quot;Establishing a Domain - Guidelines for Administrators&quot;">RFC-1032</a>].  MILNET      
<a class="line" id="line-453" href="#line-453">  453</a> conversion issues are covered in [<a href="https://datatracker.ietf.org/doc/rfc1031/" title="&quot;MILNET Name Domain Transition&quot;">RFC-1031</a>].                               
<a class="line" id="line-454" href="#line-454">  454</a>                                                                            
<a class="line" id="line-455" href="#line-455">  455</a> Lower domains which will eventually be broken into multiple zones should   
<a class="line" id="line-456" href="#line-456">  456</a> provide branching at the top of the domain so that the eventual            
<a class="line" id="line-457" href="#line-457">  457</a> decomposition can be done without renaming.  Node labels which use         
<a class="line" id="line-458" href="#line-458">  458</a> special characters, leading digits, etc., are likely to break older        
<a class="line" id="line-459" href="#line-459">  459</a> software which depends on more restrictive choices.                        
<a class="line" id="line-460" href="#line-460">  460</a>                                                                            
<a class="line" id="line-461" href="#line-461">  461</a> <span class="h3"><a class="selflink" id="section-3.3" href="#section-3.3">3.3</a>. Technical guidelines on use</span>                                           
<a class="line" id="line-462" href="#line-462">  462</a>                                                                            
<a class="line" id="line-463" href="#line-463">  463</a> Before the DNS can be used to hold naming information for some kind of     
<a class="line" id="line-464" href="#line-464">  464</a> object, two needs must be met:                                             
<a class="line" id="line-465" href="#line-465">  465</a>                                                                            
<a class="line" id="line-466" href="#line-466">  466</a>    - A convention for mapping between object names and domain              
<a class="line" id="line-467" href="#line-467">  467</a>      names.  This describes how information about an object is             
<a class="line" id="line-468" href="#line-468">  468</a>      accessed.                                                             
<a class="line" id="line-469" href="#line-469">  469</a>                                                                            
<a class="line" id="line-470" href="#line-470">  470</a>    - RR types and data formats for describing the object.                  
<a class="line" id="line-471" href="#line-471">  471</a>                                                                            
<a class="line" id="line-472" href="#line-472">  472</a> These rules can be quite simple or fairly complex.  Very often, the        
<a class="line" id="line-473" href="#line-473">  473</a> designer must take into account existing formats and plan for upward       
<a class="line" id="line-474" href="#line-474">  474</a> compatibility for existing usage.  Multiple mappings or levels of          
<a class="line" id="line-475" href="#line-475">  475</a> mapping may be required.                                                   
<a class="line" id="line-476" href="#line-476">  476</a>                                                                            
<a class="line" id="line-477" href="#line-477">  477</a> For hosts, the mapping depends on the existing syntax for host names       
<a class="line" id="line-478" href="#line-478">  478</a> which is a subset of the usual text representation for domain names,       
<a class="line" id="line-479" href="#line-479">  479</a> together with RR formats for describing host addresses, etc.  Because we   
<a class="line" id="line-480" href="#line-480">  480</a> need a reliable inverse mapping from address to host name, a special       
<a class="line" id="line-481" href="#line-481">  481</a> mapping for addresses into the IN-ADDR.ARPA domain is also defined.        
<a class="line" id="line-482" href="#line-482">  482</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-373">line-373</a> Paul Hoffman</span><span class="caption">RFC 4343 clarifies what is meant by upper-case and lower-case</span><span class="timestamp"></span></div><div class="notes"><p>All of <a target='_blank' href='https://datatracker.ietf.org/doc/rfc4343/'>RFC4343</a> is relevant to any discussion of the
case of characters.</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-483" href="#line-483">  483</a> For mailboxes, the mapping is slightly more complex.  The usual mail       
<a class="line" id="line-484" href="#line-484">  484</a> address &lt;local-part&gt;@&lt;mail-domain&gt; is mapped into a domain name by         
<a class="line" id="line-485" href="#line-485">  485</a> converting &lt;local-part&gt; into a single label (regardles of dots it          
<a class="line" id="line-486" href="#line-486">  486</a> contains), converting &lt;mail-domain&gt; into a domain name using the usual     
<a class="line" id="line-487" href="#line-487">  487</a> text format for domain names (dots denote label breaks), and               
<a class="line" id="line-488" href="#line-488">  488</a> concatenating the two to form a single domain name.  Thus the mailbox      
<a class="line" id="line-489" href="#line-489">  489</a>                                                                            
<a class="line" id="line-490" href="#line-490">  490</a>                                                                            
<a class="line" id="line-491" href="#line-491">  491</a>                                                                            
<a class="line" id="line-492" href="#line-492">  492</a> <span class="grey">Mockapetris                                                     [Page 9]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-10" ></span><a class="line" id="line-493" href="#line-493">  493</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-494" href="#line-494">  494</a>                                                                            
<a class="line" id="line-495" href="#line-495">  495</a>                                                                            
<a class="line" id="line-496" href="#line-496">  496</a> HOSTMASTER@SRI-NIC.ARPA is represented as a domain name by                 
<a class="line" id="line-497" href="#line-497">  497</a> HOSTMASTER.SRI-NIC.ARPA.  An appreciation for the reasons behind this      
<a class="line" id="line-498" href="#line-498">  498</a> design also must take into account the scheme for mail exchanges [RFC-     
<a class="line" id="line-499" href="#line-499">  499</a> 974].                                                                      
<a class="line" id="line-500" href="#line-500">  500</a>                                                                            
<a class="line" id="line-501" href="#line-501">  501</a> The typical user is not concerned with defining these rules, but should    
<a class="line" id="line-502" href="#line-502">  502</a> understand that they usually are the result of numerous compromises        
<a class="line" id="line-503" href="#line-503">  503</a> between desires for upward compatibility with old usage, interactions      
<a class="line" id="line-504" href="#line-504">  504</a> between different object definitions, and the inevitable urge to add new   
<a class="line" id="line-505" href="#line-505">  505</a> features when defining the rules.  The way the DNS is used to support      
<a class="line" id="line-506" href="#line-506">  506</a> some object is often more crucial than the restrictions inherent in the    
<a class="line" id="line-507" href="#line-507">  507</a> DNS.                                                                       
<a class="line" id="line-508" href="#line-508">  508</a>                                                                            
<a class="line" id="line-509" href="#line-509">  509</a> <span class="h3"><a class="selflink" id="section-3.4" href="#section-3.4">3.4</a>. Example name space</span>                                                    
<a class="line" id="line-510" href="#line-510">  510</a>                                                                            
<a class="line" id="line-511" href="#line-511">  511</a> The following figure shows a part of the current domain name space, and    
<a class="line" id="line-512" href="#line-512">  512</a> is used in many examples in this RFC.  Note that the tree is a very        
<a class="line" id="line-513" href="#line-513">  513</a> small subset of the actual name space.                                     
<a class="line" id="line-514" href="#line-514">  514</a>                                                                            
<a class="line" id="line-515" href="#line-515">  515</a>                                    |                                       
<a class="line" id="line-516" href="#line-516">  516</a>                                    |                                       
<a class="line" id="line-517" href="#line-517">  517</a>              +---------------------+------------------+                    
<a class="line" id="line-518" href="#line-518">  518</a>              |                     |                  |                    
<a class="line" id="line-519" href="#line-519">  519</a>             MIL                   EDU                ARPA                  
<a class="line" id="line-520" href="#line-520">  520</a>              |                     |                  |                    
<a class="line" id="line-521" href="#line-521">  521</a>              |                     |                  |                    
<a class="line" id="line-522" href="#line-522">  522</a>        +-----+-----+               |     +------+-----+-----+              
<a class="line" id="line-523" href="#line-523">  523</a>        |     |     |               |     |      |           |              
<a class="line" id="line-524" href="#line-524">  524</a>       BRL  NOSC  DARPA             |  IN-ADDR  SRI-NIC     ACC             
<a class="line" id="line-525" href="#line-525">  525</a>                                    |                                       
<a class="line" id="line-526" href="#line-526">  526</a>        +--------+------------------+---------------+--------+              
<a class="line" id="line-527" href="#line-527">  527</a>        |        |                  |               |        |              
<a class="line" id="line-528" href="#line-528">  528</a>       UCI      MIT                 |              UDEL     YALE            
<a class="line" id="line-529" href="#line-529">  529</a>                 |                 ISI                                      
<a class="line" id="line-530" href="#line-530">  530</a>                 |                  |                                       
<a class="line" id="line-531" href="#line-531">  531</a>             +---+---+              |                                       
<a class="line" id="line-532" href="#line-532">  532</a>             |       |              |                                       
<a class="line" id="line-533" href="#line-533">  533</a>            LCS  ACHILLES  +--+-----+-----+--------+                        
<a class="line" id="line-534" href="#line-534">  534</a>             |             |  |     |     |        |                        
<a class="line" id="line-535" href="#line-535">  535</a>             XX            A  C   VAXA  VENERA Mockapetris                  
<a class="line" id="line-536" href="#line-536">  536</a>                                                                            
<a class="line" id="line-537" href="#line-537">  537</a> In this example, the root domain has three immediate subdomains: MIL,      
<a class="line" id="line-538" href="#line-538">  538</a> EDU, and ARPA.  The LCS.MIT.EDU domain has one immediate subdomain named   
<a class="line" id="line-539" href="#line-539">  539</a> XX.LCS.MIT.EDU.  All of the leaves are also domains.                       
<a class="line" id="line-540" href="#line-540">  540</a>                                                                            
<a class="line" id="line-541" href="#line-541">  541</a> <span class="h3"><a class="selflink" id="section-3.5" href="#section-3.5">3.5</a>. Preferred name syntax</span>                                                 
<a class="line" id="line-542" href="#line-542">  542</a>                                                                            
<a class="line" id="line-543" href="#line-543">  543</a> The DNS specifications attempt to be as general as possible in the rules   
<a class="line" id="line-544" href="#line-544">  544</a>                                                                            
<a class="line" id="line-545" href="#line-545">  545</a>                                                                            
<a class="line" id="line-546" href="#line-546">  546</a>                                                                            
<a class="line" id="line-547" href="#line-547">  547</a> <span class="grey">Mockapetris                                                    [Page 10]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-11" ></span><a class="line" id="line-548" href="#line-548">  548</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-549" href="#line-549">  549</a>                                                                            
<a class="line" id="line-550" href="#line-550">  550</a>                                                                            
<a class="line" id="line-551" href="#line-551">  551</a> for constructing domain names.  The idea is that the name of any           
<a class="line" id="line-552" href="#line-552">  552</a> existing object can be expressed as a domain name with minimal changes.    
<a class="line" id="line-553" href="#line-553">  553</a> However, when assigning a domain name for an object, the prudent user      
<a class="line" id="line-554" href="#line-554">  554</a> will select a name which satisfies both the rules of the domain system     
<a class="line" id="line-555" href="#line-555">  555</a> and any existing rules for the object, whether these rules are published   
<a class="line" id="line-556" href="#line-556">  556</a> or implied by existing programs.                                           
<a class="line" id="line-557" href="#line-557">  557</a>                                                                            
<a class="line" id="line-558" href="#line-558">  558</a> For example, when naming a mail domain, the user should satisfy both the   
<a class="line" id="line-559" href="#line-559">  559</a> rules of this memo and those in <a href="https://datatracker.ietf.org/doc/rfc822/">RFC-822</a>.  When creating a new host name,   
<a class="line" id="line-560" href="#line-560">  560</a> the old rules for HOSTS.TXT should be followed.  This avoids problems      
<a class="line" id="line-561" href="#line-561">  561</a> when old software is converted to use domain names.                        
<a class="line" id="line-562" href="#line-562">  562</a>                                                                            
<a class="line" id="line-563" href="#line-563">  563</a> The following syntax will result in fewer problems with many               
<a class="line" id="line-564" href="#line-564">  564</a> applications that use domain names (e.g., mail, TELNET).                   
<a class="line" id="line-565" href="#line-565">  565</a>                                                                            
<a class="line" id="line-566" href="#line-566">  566</a> &lt;domain&gt; ::= &lt;subdomain&gt; | &quot; &quot;                                             
<a class="line" id="line-567" href="#line-567">  567</a>                                                                            
<a class="line" id="line-568" href="#line-568">  568</a> &lt;subdomain&gt; ::= &lt;label&gt; | &lt;subdomain&gt; &quot;.&quot; &lt;label&gt;                          
<a class="line" id="line-569" href="#line-569">  569</a>                                                                            
<a class="line" id="line-570" href="#line-570">  570</a> &lt;label&gt; ::= &lt;letter&gt; [ [ &lt;ldh-str&gt; ] &lt;let-dig&gt; ]                           
<a class="line" id="line-571" href="#line-571">  571</a>                                                                            
<a class="line" id="line-572" href="#line-572">  572</a> &lt;ldh-str&gt; ::= &lt;let-dig-hyp&gt; | &lt;let-dig-hyp&gt; &lt;ldh-str&gt;                      
<a class="line" id="line-573" href="#line-573">  573</a>                                                                            
<a class="line" id="line-574" href="#line-574">  574</a> &lt;let-dig-hyp&gt; ::= &lt;let-dig&gt; | &quot;-&quot;                                          
<a class="line" id="line-575" href="#line-575">  575</a>                                                                            
<a class="line" id="line-576" href="#line-576">  576</a> &lt;let-dig&gt; ::= &lt;letter&gt; | &lt;digit&gt;                                           
<a class="line" id="line-577" href="#line-577">  577</a>                                                                            
<a class="line" id="line-578" href="#line-578">  578</a> &lt;letter&gt; ::= any one of the 52 alphabetic characters A through Z in        
<a class="line" id="line-579" href="#line-579">  579</a> upper case and a through z in lower case                                   
<a class="line" id="line-580" href="#line-580">  580</a>                                                                            
<a class="line" id="line-581" href="#line-581">  581</a> &lt;digit&gt; ::= any one of the ten digits 0 through 9                          
<a class="line" id="line-582" href="#line-582">  582</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial verified chlisin"><div class="title"><span class="reference"><a href="#line-483">line-483</a> Chlisin</span><span class="caption"><span id="rfc.erratum.564">(Editorial Erratum #<a target='_blank' title='chlisin (Editorial)' href='https://www.rfc-editor.org/errata/eid564'>564</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
   The usual mail address &lt;­local-part&gt;@&lt;­mail-domain&gt; is mapped into a
   domain name by converting &lt;­local-part&gt; into a single label
   (regardles of dots it contains), converting &lt;­mail-domain&gt; into a
   domain name using the usual text format for domain names (dots
   denote label breaks), and concatenating the two to form a single
   domain name. 
</pre></div>
<div class='correct'>It should say:<pre>
   The usual mail address &lt;­local-part&gt;@&lt;­mail-domain&gt; is mapped into a
   domain name by converting &lt;­local-part&gt; into a single label
   (regardles<ins>s</ins> of dots it contains), converting &lt;­mail-domain&gt; into a
   domain name using the usual text format for domain names (dots
   denote label breaks), and concatenating the two to form a single
   domain name.
</pre></div>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-583" href="#line-583">  583</a> Note that while upper and lower case letters are allowed in domain         
<a class="line" id="line-584" href="#line-584">  584</a> names, no significance is attached to the case.  That is, two names with   
<a class="line" id="line-585" href="#line-585">  585</a> the same spelling but different case are to be treated as if identical.    
<a class="line" id="line-586" href="#line-586">  586</a>                                                                            
<a class="line" id="line-587" href="#line-587">  587</a> The labels must follow the rules for ARPANET host names.  They must        
<a class="line" id="line-588" href="#line-588">  588</a> start with a letter, end with a letter or digit, and have as interior      
<a class="line" id="line-589" href="#line-589">  589</a> characters only letters, digits, and hyphen.  There are also some          
<a class="line" id="line-590" href="#line-590">  590</a> restrictions on the length.  Labels must be 63 characters or less.         
<a class="line" id="line-591" href="#line-591">  591</a>                                                                            
<a class="line" id="line-592" href="#line-592">  592</a> For example, the following strings identify hosts in the Internet:         
<a class="line" id="line-593" href="#line-593">  593</a>                                                                            
<a class="line" id="line-594" href="#line-594">  594</a> A.ISI.EDU  XX.LCS.MIT.EDU  SRI-NIC.ARPA                                    
<a class="line" id="line-595" href="#line-595">  595</a>                                                                            
<a class="line" id="line-596" href="#line-596">  596</a> <span class="h3"><a class="selflink" id="section-3.6" href="#section-3.6">3.6</a>. Resource Records</span>                                                      
<a class="line" id="line-597" href="#line-597">  597</a>                                                                            
<a class="line" id="line-598" href="#line-598">  598</a> A domain name identifies a node.  Each node has a set of resource          
<a class="line" id="line-599" href="#line-599">  599</a>                                                                            
<a class="line" id="line-600" href="#line-600">  600</a>                                                                            
<a class="line" id="line-601" href="#line-601">  601</a>                                                                            
<a class="line" id="line-602" href="#line-602">  602</a> <span class="grey">Mockapetris                                                    [Page 11]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-12" ></span><a class="line" id="line-603" href="#line-603">  603</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-604" href="#line-604">  604</a>                                                                            
<a class="line" id="line-605" href="#line-605">  605</a>                                                                            
<a class="line" id="line-606" href="#line-606">  606</a> information, which may be empty.  The set of resource information          
<a class="line" id="line-607" href="#line-607">  607</a> associated with a particular name is composed of separate resource         
<a class="line" id="line-608" href="#line-608">  608</a> records (RRs).  The order of RRs in a set is not significant, and need     
<a class="line" id="line-609" href="#line-609">  609</a> not be preserved by name servers, resolvers, or other parts of the DNS.    
<a class="line" id="line-610" href="#line-610">  610</a>                                                                            
<a class="line" id="line-611" href="#line-611">  611</a> When we talk about a specific RR, we assume it has the following:          
<a class="line" id="line-612" href="#line-612">  612</a>                                                                            
<a class="line" id="line-613" href="#line-613">  613</a> owner           which is the domain name where the RR is found.            
<a class="line" id="line-614" href="#line-614">  614</a>                                                                            
<a class="line" id="line-615" href="#line-615">  615</a> type            which is an encoded 16 bit value that specifies the type   
<a class="line" id="line-616" href="#line-616">  616</a>                 of the resource in this resource record.  Types refer to   
<a class="line" id="line-617" href="#line-617">  617</a>                 abstract resources.                                        
<a class="line" id="line-618" href="#line-618">  618</a>                                                                            
<a class="line" id="line-619" href="#line-619">  619</a>                 This memo uses the following types:                        
<a class="line" id="line-620" href="#line-620">  620</a>                                                                            
<a class="line" id="line-621" href="#line-621">  621</a>                 A               a host address                             
<a class="line" id="line-622" href="#line-622">  622</a>                                                                            
<a class="line" id="line-623" href="#line-623">  623</a>                 CNAME           identifies the canonical name of an        
<a class="line" id="line-624" href="#line-624">  624</a>                                 alias                                      
<a class="line" id="line-625" href="#line-625">  625</a>                                                                            
<a class="line" id="line-626" href="#line-626">  626</a>                 HINFO           identifies the CPU and OS used by a host   
<a class="line" id="line-627" href="#line-627">  627</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-583">line-583</a> Paul Hoffman</span><span class="caption">RFC 4343 clarifies what is meant by upper-case and lower-case</span><span class="timestamp"></span></div><div class="notes"><p>All of <a target='_blank' href='https://datatracker.ietf.org/doc/rfc4343/'>RFC4343</a> is relevant to any discussion of the
case of characters.</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-628" href="#line-628">  628</a>                 MX              identifies a mail exchange for the         
<a class="line" id="line-629" href="#line-629">  629</a>                                 domain.  See [RFC-974 for details.         
<a class="line" id="line-630" href="#line-630">  630</a>                                                                            
<a class="line" id="line-631" href="#line-631">  631</a>                 NS                                                         
<a class="line" id="line-632" href="#line-632">  632</a>                 the authoritative name server for the domain               
<a class="line" id="line-633" href="#line-633">  633</a>                                                                            
<a class="line" id="line-634" href="#line-634">  634</a>                 PTR                                                        
<a class="line" id="line-635" href="#line-635">  635</a>                 a pointer to another part of the domain name space         
<a class="line" id="line-636" href="#line-636">  636</a>                                                                            
<a class="line" id="line-637" href="#line-637">  637</a>                 SOA                                                        
<a class="line" id="line-638" href="#line-638">  638</a>                 identifies the start of a zone of authority]               
<a class="line" id="line-639" href="#line-639">  639</a>                                                                            
<a class="line" id="line-640" href="#line-640">  640</a> class           which is an encoded 16 bit value which identifies a        
<a class="line" id="line-641" href="#line-641">  641</a>                 protocol family or instance of a protocol.                 
<a class="line" id="line-642" href="#line-642">  642</a>                                                                            
<a class="line" id="line-643" href="#line-643">  643</a>                 This memo uses the following classes:                      
<a class="line" id="line-644" href="#line-644">  644</a>                                                                            
<a class="line" id="line-645" href="#line-645">  645</a>                 IN              the Internet system                        
<a class="line" id="line-646" href="#line-646">  646</a>                                                                            
<a class="line" id="line-647" href="#line-647">  647</a>                 CH              the Chaos system                           
<a class="line" id="line-648" href="#line-648">  648</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial heldfordocumentupdate han ge xin"><div class="title"><span class="reference"><a href="#line-628">line-628</a> Han Ge Xin</span><span class="caption"><span id="rfc.erratum.4511">(Editorial Erratum #<a target='_blank' title='han ge xin (Editorial)' href='https://www.rfc-editor.org/errata/eid4511'>4511</a>) [Held for Document Update]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
identifies a mail exchange for the domain. See [RFC-974 for details.
</pre></div>
<div class='correct'>It should say:<pre>
identifies a mail exchange for the domain. See [RFC-974<ins>]</ins> for details.
</pre></div>
<hr/>
<div class='note'>
Just missing the "]"
</div>

</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-649" href="#line-649">  649</a> TTL             which is the time to live of the RR.  This field is a 32   
<a class="line" id="line-650" href="#line-650">  650</a>                 bit integer in units of seconds, an is primarily used by   
<a class="line" id="line-651" href="#line-651">  651</a>                 resolvers when they cache RRs.  The TTL describes how      
<a class="line" id="line-652" href="#line-652">  652</a>                 long a RR can be cached before it should be discarded.     
<a class="line" id="line-653" href="#line-653">  653</a>                                                                            
<a class="line" id="line-654" href="#line-654">  654</a>                                                                            
<a class="line" id="line-655" href="#line-655">  655</a>                                                                            
<a class="line" id="line-656" href="#line-656">  656</a>                                                                            
<a class="line" id="line-657" href="#line-657">  657</a> <span class="grey">Mockapetris                                                    [Page 12]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-13" ></span><a class="line" id="line-658" href="#line-658">  658</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-659" href="#line-659">  659</a>                                                                            
<a class="line" id="line-660" href="#line-660">  660</a>                                                                            
<a class="line" id="line-661" href="#line-661">  661</a> RDATA           which is the type and sometimes class dependent data       
<a class="line" id="line-662" href="#line-662">  662</a>                 which describes the resource:                              
<a class="line" id="line-663" href="#line-663">  663</a>                                                                            
<a class="line" id="line-664" href="#line-664">  664</a>                 A               For the IN class, a 32 bit IP address      
<a class="line" id="line-665" href="#line-665">  665</a>                                                                            
<a class="line" id="line-666" href="#line-666">  666</a>                                 For the CH class, a domain name followed   
<a class="line" id="line-667" href="#line-667">  667</a>                                 by a 16 bit octal Chaos address.           
<a class="line" id="line-668" href="#line-668">  668</a>                                                                            
<a class="line" id="line-669" href="#line-669">  669</a>                 CNAME           a domain name.                             
<a class="line" id="line-670" href="#line-670">  670</a>                                                                            
<a class="line" id="line-671" href="#line-671">  671</a>                 MX              a 16 bit preference value (lower is        
<a class="line" id="line-672" href="#line-672">  672</a>                                 better) followed by a host name willing    
<a class="line" id="line-673" href="#line-673">  673</a>                                 to act as a mail exchange for the owner    
<a class="line" id="line-674" href="#line-674">  674</a>                                 domain.                                    
<a class="line" id="line-675" href="#line-675">  675</a>                                                                            
<a class="line" id="line-676" href="#line-676">  676</a>                 NS              a host name.                               
<a class="line" id="line-677" href="#line-677">  677</a>                                                                            
<a class="line" id="line-678" href="#line-678">  678</a>                 PTR             a domain name.                             
<a class="line" id="line-679" href="#line-679">  679</a>                                                                            
<a class="line" id="line-680" href="#line-680">  680</a>                 SOA             several fields.                            
<a class="line" id="line-681" href="#line-681">  681</a>                                                                            
<a class="line" id="line-682" href="#line-682">  682</a> The owner name is often implicit, rather than forming an integral part     
<a class="line" id="line-683" href="#line-683">  683</a> of the RR.  For example, many name servers internally form tree or hash    
<a class="line" id="line-684" href="#line-684">  684</a> structures for the name space, and chain RRs off nodes.  The remaining     
<a class="line" id="line-685" href="#line-685">  685</a> RR parts are the fixed header (type, class, TTL) which is consistent for   
<a class="line" id="line-686" href="#line-686">  686</a> all RRs, and a variable part (RDATA) that fits the needs of the resource   
<a class="line" id="line-687" href="#line-687">  687</a> being described.                                                           
<a class="line" id="line-688" href="#line-688">  688</a>                                                                            
<a class="line" id="line-689" href="#line-689">  689</a> The meaning of the TTL field is a time limit on how long an RR can be      
<a class="line" id="line-690" href="#line-690">  690</a> kept in a cache.  This limit does not apply to authoritative data in       
<a class="line" id="line-691" href="#line-691">  691</a> zones; it is also timed out, but by the refreshing policies for the        
<a class="line" id="line-692" href="#line-692">  692</a> zone.  The TTL is assigned by the administrator for the zone where the     
<a class="line" id="line-693" href="#line-693">  693</a> data originates.  While short TTLs can be used to minimize caching, and    
<a class="line" id="line-694" href="#line-694">  694</a> a zero TTL prohibits caching, the realities of Internet performance        
<a class="line" id="line-695" href="#line-695">  695</a> suggest that these times should be on the order of days for the typical    
<a class="line" id="line-696" href="#line-696">  696</a> host.  If a change can be anticipated, the TTL can be reduced prior to     
<a class="line" id="line-697" href="#line-697">  697</a> the change to minimize inconsistency during the change, and then           
<a class="line" id="line-698" href="#line-698">  698</a> increased back to its former value following the change.                   
<a class="line" id="line-699" href="#line-699">  699</a>                                                                            
<a class="line" id="line-700" href="#line-700">  700</a> The data in the RDATA section of RRs is carried as a combination of        
<a class="line" id="line-701" href="#line-701">  701</a> binary strings and domain names.  The domain names are frequently used     
<a class="line" id="line-702" href="#line-702">  702</a> as &quot;pointers&quot; to other data in the DNS.                                    
<a class="line" id="line-703" href="#line-703">  703</a>                                                                            
<a class="line" id="line-704" href="#line-704">  704</a> <span class="h4"><a class="selflink" id="section-3.6.1" href="#section-3.6.1">3.6.1</a>. Textual expression of RRs</span>                                           
<a class="line" id="line-705" href="#line-705">  705</a>                                                                            
<a class="line" id="line-706" href="#line-706">  706</a> RRs are represented in binary form in the packets of the DNS protocol,     
<a class="line" id="line-707" href="#line-707">  707</a> and are usually represented in highly encoded form when stored in a name   
<a class="line" id="line-708" href="#line-708">  708</a> server or resolver.  In this memo, we adopt a style similar to that used   
<a class="line" id="line-709" href="#line-709">  709</a>                                                                            
<a class="line" id="line-710" href="#line-710">  710</a>                                                                            
<a class="line" id="line-711" href="#line-711">  711</a>                                                                            
<a class="line" id="line-712" href="#line-712">  712</a> <span class="grey">Mockapetris                                                    [Page 13]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-14" ></span><a class="line" id="line-713" href="#line-713">  713</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-714" href="#line-714">  714</a>                                                                            
<a class="line" id="line-715" href="#line-715">  715</a>                                                                            
<a class="line" id="line-716" href="#line-716">  716</a> in master files in order to show the contents of RRs.  In this format,     
<a class="line" id="line-717" href="#line-717">  717</a> most RRs are shown on a single line, although continuation lines are       
<a class="line" id="line-718" href="#line-718">  718</a> possible using parentheses.                                                
<a class="line" id="line-719" href="#line-719">  719</a>                                                                            
<a class="line" id="line-720" href="#line-720">  720</a> The start of the line gives the owner of the RR.  If a line begins with    
<a class="line" id="line-721" href="#line-721">  721</a> a blank, then the owner is assumed to be the same as that of the           
<a class="line" id="line-722" href="#line-722">  722</a> previous RR.  Blank lines are often included for readability.              
<a class="line" id="line-723" href="#line-723">  723</a>                                                                            
<a class="line" id="line-724" href="#line-724">  724</a> Following the owner, we list the TTL, type, and class of the RR.  Class    
<a class="line" id="line-725" href="#line-725">  725</a> and type use the mnemonics defined above, and TTL is an integer before     
<a class="line" id="line-726" href="#line-726">  726</a> the type field.  In order to avoid ambiguity in parsing, type and class    
<a class="line" id="line-727" href="#line-727">  727</a> mnemonics are disjoint, TTLs are integers, and the type mnemonic is        
<a class="line" id="line-728" href="#line-728">  728</a> always last. The IN class and TTL values are often omitted from examples   
<a class="line" id="line-729" href="#line-729">  729</a> in the interests of clarity.                                               
<a class="line" id="line-730" href="#line-730">  730</a>                                                                            
<a class="line" id="line-731" href="#line-731">  731</a> The resource data or RDATA section of the RR are given using knowledge     
<a class="line" id="line-732" href="#line-732">  732</a> of the typical representation for the data.                                
<a class="line" id="line-733" href="#line-733">  733</a>                                                                            
<a class="line" id="line-734" href="#line-734">  734</a> For example, we might show the RRs carried in a message as:                
<a class="line" id="line-735" href="#line-735">  735</a>                                                                            
<a class="line" id="line-736" href="#line-736">  736</a>     ISI.EDU.        MX      10 VENERA.ISI.EDU.                             
<a class="line" id="line-737" href="#line-737">  737</a>                     MX      10 VAXA.ISI.EDU.                               
<a class="line" id="line-738" href="#line-738">  738</a>     VENERA.ISI.EDU. A       128.9.0.32                                     
<a class="line" id="line-739" href="#line-739">  739</a>                     A       10.1.0.52                                      
<a class="line" id="line-740" href="#line-740">  740</a>     VAXA.ISI.EDU.   A       10.2.0.27                                      
<a class="line" id="line-741" href="#line-741">  741</a>                     A       128.9.0.33                                     
<a class="line" id="line-742" href="#line-742">  742</a>                                                                            
<a class="line" id="line-743" href="#line-743">  743</a> The MX RRs have an RDATA section which consists of a 16 bit number         
<a class="line" id="line-744" href="#line-744">  744</a> followed by a domain name.  The address RRs use a standard IP address      
<a class="line" id="line-745" href="#line-745">  745</a> format to contain a 32 bit internet address.                               
<a class="line" id="line-746" href="#line-746">  746</a>                                                                            
<a class="line" id="line-747" href="#line-747">  747</a> This example shows six RRs, with two RRs at each of three domain names.    
<a class="line" id="line-748" href="#line-748">  748</a>                                                                            
<a class="line" id="line-749" href="#line-749">  749</a> Similarly we might see:                                                    
<a class="line" id="line-750" href="#line-750">  750</a>                                                                            
<a class="line" id="line-751" href="#line-751">  751</a>     XX.LCS.MIT.EDU. IN      A       10.0.0.44                              
<a class="line" id="line-752" href="#line-752">  752</a>                     CH      A       MIT.EDU. 2420                          
<a class="line" id="line-753" href="#line-753">  753</a>                                                                            
<a class="line" id="line-754" href="#line-754">  754</a> This example shows two addresses for XX.LCS.MIT.EDU, each of a different   
<a class="line" id="line-755" href="#line-755">  755</a> class.                                                                     
<a class="line" id="line-756" href="#line-756">  756</a>                                                                            
<a class="line" id="line-757" href="#line-757">  757</a> <span class="h4"><a class="selflink" id="section-3.6.2" href="#section-3.6.2">3.6.2</a>. Aliases and canonical names</span>                                         
<a class="line" id="line-758" href="#line-758">  758</a>                                                                            
<a class="line" id="line-759" href="#line-759">  759</a> In existing systems, hosts and other resources often have several names    
<a class="line" id="line-760" href="#line-760">  760</a> that identify the same resource.  For example, the names C.ISI.EDU and     
<a class="line" id="line-761" href="#line-761">  761</a> USC-ISIC.ARPA both identify the same host.  Similarly, in the case of      
<a class="line" id="line-762" href="#line-762">  762</a> mailboxes, many organizations provide many names that actually go to the   
<a class="line" id="line-763" href="#line-763">  763</a> same mailbox; for example Mockapetris@C.ISI.EDU, Mockapetris@B.ISI.EDU,    
<a class="line" id="line-764" href="#line-764">  764</a>                                                                            
<a class="line" id="line-765" href="#line-765">  765</a>                                                                            
<a class="line" id="line-766" href="#line-766">  766</a>                                                                            
<a class="line" id="line-767" href="#line-767">  767</a> <span class="grey">Mockapetris                                                    [Page 14]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-15" ></span><a class="line" id="line-768" href="#line-768">  768</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-769" href="#line-769">  769</a>                                                                            
<a class="line" id="line-770" href="#line-770">  770</a>                                                                            
<a class="line" id="line-771" href="#line-771">  771</a> and PVM@ISI.EDU all go to the same mailbox (although the mechanism         
<a class="line" id="line-772" href="#line-772">  772</a> behind this is somewhat complicated).                                      
<a class="line" id="line-773" href="#line-773">  773</a>                                                                            
<a class="line" id="line-774" href="#line-774">  774</a> Most of these systems have a notion that one of the equivalent set of      
<a class="line" id="line-775" href="#line-775">  775</a> names is the canonical or primary name and all others are aliases.         
<a class="line" id="line-776" href="#line-776">  776</a>                                                                            
<a class="line" id="line-777" href="#line-777">  777</a> The domain system provides such a feature using the canonical name         
<a class="line" id="line-778" href="#line-778">  778</a> (CNAME) RR.  A CNAME RR identifies its owner name as an alias, and         
<a class="line" id="line-779" href="#line-779">  779</a> specifies the corresponding canonical name in the RDATA section of the     
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-649">line-649</a> Paul Hoffman</span><span class="caption">RFC 8767 allows caching of records past their TTL</span><span class="timestamp"></span></div><div class="notes"><p>
The abstract of <a target='_blank' href='https://datatracker.ietf.org/doc/rfc8767/'>RFC8767</a> says:
"This document defines a method (serve-stale) for recursive resolvers
to use stale DNS data to avoid outages when authoritative nameservers
cannot be reached to refresh expired data."
The reason this updates RFC 1034 is that the definition of TTL in
RFC 1034 says "The TTL describes how
long a RR can be cached before it should be discarded."
RFC 8767 softens that "should" and describes various scenarios when
it is acceptable to serve stale data.
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-780" href="#line-780">  780</a> RR.  If a CNAME RR is present at a node, no other data should be           
<a class="line" id="line-781" href="#line-781">  781</a> present; this ensures that the data for a canonical name and its aliases   
<a class="line" id="line-782" href="#line-782">  782</a> cannot be different.  This rule also insures that a cached CNAME can be    
<a class="line" id="line-783" href="#line-783">  783</a> used without checking with an authoritative server for other RR types.     
<a class="line" id="line-784" href="#line-784">  784</a>                                                                            
<a class="line" id="line-785" href="#line-785">  785</a> CNAME RRs cause special action in DNS software.  When a name server        
<a class="line" id="line-786" href="#line-786">  786</a> fails to find a desired RR in the resource set associated with the         
<a class="line" id="line-787" href="#line-787">  787</a> domain name, it checks to see if the resource set consists of a CNAME      
<a class="line" id="line-788" href="#line-788">  788</a> record with a matching class.  If so, the name server includes the CNAME   
<a class="line" id="line-789" href="#line-789">  789</a> record in the response and restarts the query at the domain name           
<a class="line" id="line-790" href="#line-790">  790</a> specified in the data field of the CNAME record.  The one exception to     
<a class="line" id="line-791" href="#line-791">  791</a> this rule is that queries which match the CNAME type are not restarted.    
<a class="line" id="line-792" href="#line-792">  792</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-780">line-780</a> Paul Hoffman</span><span class="caption">RFC 4034 changes what else can exist with a CNAME, namely RRSIG RRs</span><span class="timestamp"></span></div><div class="notes"><p>
Section 3 of <a target='_blank' href='https://datatracker.ietf.org/doc/rfc4034/'>RFC4034</a> says:
<br/>
<pre>
Because every authoritative RRset in a zone must be protected by a
digital signature, RRSIG RRs must be present for names containing a
CNAME RR.  This is a change to the traditional DNS specification
[RFC1034], which stated that if a CNAME is present for a name, it is
the only type allowed at that name.  A RRSIG and NSEC (see Section 4)
MUST exist for the same name as a CNAME resource record in a signed
zone.
</pre>
</p>
<p>
Similar wording is found in Section 2.5 of <a target='_blank' href='https://datatracker.ietf.org/doc/rfc4035/'>RFC4035</a>.
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-793" href="#line-793">  793</a> For example, suppose a name server was processing a query with for USC-    
<a class="line" id="line-794" href="#line-794">  794</a> ISIC.ARPA, asking for type A information, and had the following resource   
<a class="line" id="line-795" href="#line-795">  795</a> records:                                                                   
<a class="line" id="line-796" href="#line-796">  796</a>                                                                            
<a class="line" id="line-797" href="#line-797">  797</a>     USC-ISIC.ARPA   IN      CNAME   C.ISI.EDU                              
<a class="line" id="line-798" href="#line-798">  798</a>                                                                            
<a class="line" id="line-799" href="#line-799">  799</a>     C.ISI.EDU       IN      A       10.0.0.52                              
<a class="line" id="line-800" href="#line-800">  800</a>                                                                            
<a class="line" id="line-801" href="#line-801">  801</a> Both of these RRs would be returned in the response to the type A query,   
<a class="line" id="line-802" href="#line-802">  802</a> while a type CNAME or * query should return just the CNAME.                
<a class="line" id="line-803" href="#line-803">  803</a>                                                                            
<a class="line" id="line-804" href="#line-804">  804</a> Domain names in RRs which point at another name should always point at     
<a class="line" id="line-805" href="#line-805">  805</a> the primary name and not the alias.  This avoids extra indirections in     
<a class="line" id="line-806" href="#line-806">  806</a> accessing information.  For example, the address to name RR for the        
<a class="line" id="line-807" href="#line-807">  807</a> above host should be:                                                      
<a class="line" id="line-808" href="#line-808">  808</a>                                                                            
<a class="line" id="line-809" href="#line-809">  809</a>     52.0.0.10.IN-ADDR.ARPA  IN      PTR     C.ISI.EDU                      
<a class="line" id="line-810" href="#line-810">  810</a>                                                                            
<a class="line" id="line-811" href="#line-811">  811</a> rather than pointing at USC-ISIC.ARPA.  Of course, by the robustness       
<a class="line" id="line-812" href="#line-812">  812</a> principle, domain software should not fail when presented with CNAME       
<a class="line" id="line-813" href="#line-813">  813</a> chains or loops; CNAME chains should be followed and CNAME loops           
<a class="line" id="line-814" href="#line-814">  814</a> signalled as an error.                                                     
<a class="line" id="line-815" href="#line-815">  815</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial verified john kristoff"><div class="title"><span class="reference"><a href="#line-793">line-793</a> John Kristoff</span><span class="caption"><span id="rfc.erratum.1074.1">(Editorial Erratum #<a target='_blank' title='john kristoff (Editorial)' href='https://www.rfc-editor.org/errata/eid1074'>1074</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'>Section 3.6.2 says:<pre>
  For example, suppose a name server was processing a query with for USC-
</pre></div>
<div class='correct'>It should say:<pre>
  For example, suppose a name server was processing a query <del>with</del> for USC-
</pre></div>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-816" href="#line-816">  816</a> <span class="h3"><a class="selflink" id="section-3.7" href="#section-3.7">3.7</a>. Queries</span>                                                               
<a class="line" id="line-817" href="#line-817">  817</a>                                                                            
<a class="line" id="line-818" href="#line-818">  818</a> Queries are messages which may be sent to a name server to provoke a       
<a class="line" id="line-819" href="#line-819">  819</a>                                                                            
<a class="line" id="line-820" href="#line-820">  820</a>                                                                            
<a class="line" id="line-821" href="#line-821">  821</a>                                                                            
<a class="line" id="line-822" href="#line-822">  822</a> <span class="grey">Mockapetris                                                    [Page 15]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-16" ></span><a class="line" id="line-823" href="#line-823">  823</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-824" href="#line-824">  824</a>                                                                            
<a class="line" id="line-825" href="#line-825">  825</a>                                                                            
<a class="line" id="line-826" href="#line-826">  826</a> response.  In the Internet, queries are carried in UDP datagrams or over   
<a class="line" id="line-827" href="#line-827">  827</a> TCP connections.  The response by the name server either answers the       
<a class="line" id="line-828" href="#line-828">  828</a> question posed in the query, refers the requester to another set of name   
<a class="line" id="line-829" href="#line-829">  829</a> servers, or signals some error condition.                                  
<a class="line" id="line-830" href="#line-830">  830</a>                                                                            
<a class="line" id="line-831" href="#line-831">  831</a> In general, the user does not generate queries directly, but instead       
<a class="line" id="line-832" href="#line-832">  832</a> makes a request to a resolver which in turn sends one or more queries to   
<a class="line" id="line-833" href="#line-833">  833</a> name servers and deals with the error conditions and referrals that may    
<a class="line" id="line-834" href="#line-834">  834</a> result.  Of course, the possible questions which can be asked in a query   
<a class="line" id="line-835" href="#line-835">  835</a> does shape the kind of service a resolver can provide.                     
<a class="line" id="line-836" href="#line-836">  836</a>                                                                            
<a class="line" id="line-837" href="#line-837">  837</a> DNS queries and responses are carried in a standard message format.  The   
<a class="line" id="line-838" href="#line-838">  838</a> message format has a header containing a number of fixed fields which      
<a class="line" id="line-839" href="#line-839">  839</a> are always present, and four sections which carry query parameters and     
<a class="line" id="line-840" href="#line-840">  840</a> RRs.                                                                       
<a class="line" id="line-841" href="#line-841">  841</a>                                                                            
<a class="line" id="line-842" href="#line-842">  842</a> The most important field in the header is a four bit field called an       
<a class="line" id="line-843" href="#line-843">  843</a> opcode which separates different queries.  Of the possible 16 values,      
<a class="line" id="line-844" href="#line-844">  844</a> one (standard query) is part of the official protocol, two (inverse        
<a class="line" id="line-845" href="#line-845">  845</a> query and status query) are options, one (completion) is obsolete, and     
<a class="line" id="line-846" href="#line-846">  846</a> the rest are unassigned.                                                   
<a class="line" id="line-847" href="#line-847">  847</a>                                                                            
<a class="line" id="line-848" href="#line-848">  848</a> The four sections are:                                                     
<a class="line" id="line-849" href="#line-849">  849</a>                                                                            
<a class="line" id="line-850" href="#line-850">  850</a> Question        Carries the query name and other query parameters.         
<a class="line" id="line-851" href="#line-851">  851</a>                                                                            
<a class="line" id="line-852" href="#line-852">  852</a> Answer          Carries RRs which directly answer the query.               
<a class="line" id="line-853" href="#line-853">  853</a>                                                                            
<a class="line" id="line-854" href="#line-854">  854</a> Authority       Carries RRs which describe other authoritative servers.    
<a class="line" id="line-855" href="#line-855">  855</a>                 May optionally carry the SOA RR for the authoritative      
<a class="line" id="line-856" href="#line-856">  856</a>                 data in the answer section.                                
<a class="line" id="line-857" href="#line-857">  857</a>                                                                            
<a class="line" id="line-858" href="#line-858">  858</a> Additional      Carries RRs which may be helpful in using the RRs in the   
<a class="line" id="line-859" href="#line-859">  859</a>                 other sections.                                            
<a class="line" id="line-860" href="#line-860">  860</a>                                                                            
<a class="line" id="line-861" href="#line-861">  861</a> Note that the content, but not the format, of these sections varies with   
<a class="line" id="line-862" href="#line-862">  862</a> header opcode.                                                             
<a class="line" id="line-863" href="#line-863">  863</a>                                                                            
<a class="line" id="line-864" href="#line-864">  864</a> <span class="h4"><a class="selflink" id="section-3.7.1" href="#section-3.7.1">3.7.1</a>. Standard queries</span>                                                    
<a class="line" id="line-865" href="#line-865">  865</a>                                                                            
<a class="line" id="line-866" href="#line-866">  866</a> A standard query specifies a target domain name (QNAME), query type        
<a class="line" id="line-867" href="#line-867">  867</a> (QTYPE), and query class (QCLASS) and asks for RRs which match.  This      
<a class="line" id="line-868" href="#line-868">  868</a> type of query makes up such a vast majority of DNS queries that we use     
<a class="line" id="line-869" href="#line-869">  869</a> the term &quot;query&quot; to mean standard query unless otherwise specified.  The   
<a class="line" id="line-870" href="#line-870">  870</a> QTYPE and QCLASS fields are each 16 bits long, and are a superset of       
<a class="line" id="line-871" href="#line-871">  871</a> defined types and classes.                                                 
<a class="line" id="line-872" href="#line-872">  872</a>                                                                            
<a class="line" id="line-873" href="#line-873">  873</a>                                                                            
<a class="line" id="line-874" href="#line-874">  874</a>                                                                            
<a class="line" id="line-875" href="#line-875">  875</a>                                                                            
<a class="line" id="line-876" href="#line-876">  876</a>                                                                            
<a class="line" id="line-877" href="#line-877">  877</a> <span class="grey">Mockapetris                                                    [Page 16]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-17" ></span><a class="line" id="line-878" href="#line-878">  878</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-879" href="#line-879">  879</a>                                                                            
<a class="line" id="line-880" href="#line-880">  880</a>                                                                            
<a class="line" id="line-881" href="#line-881">  881</a> The QTYPE field may contain:                                               
<a class="line" id="line-882" href="#line-882">  882</a>                                                                            
<a class="line" id="line-883" href="#line-883">  883</a> &lt;any type&gt;      matches just that type. (e.g., A, PTR).                    
<a class="line" id="line-884" href="#line-884">  884</a>                                                                            
<a class="line" id="line-885" href="#line-885">  885</a> AXFR            special zone transfer QTYPE.                               
<a class="line" id="line-886" href="#line-886">  886</a>                                                                            
<a class="line" id="line-887" href="#line-887">  887</a> MAILB           matches all mail box related RRs (e.g. MB and MG).         
<a class="line" id="line-888" href="#line-888">  888</a>                                                                            
<a class="line" id="line-889" href="#line-889">  889</a> *               matches all RR types.                                      
<a class="line" id="line-890" href="#line-890">  890</a>                                                                            
<a class="line" id="line-891" href="#line-891">  891</a> The QCLASS field may contain:                                              
<a class="line" id="line-892" href="#line-892">  892</a>                                                                            
<a class="line" id="line-893" href="#line-893">  893</a> &lt;any class&gt;     matches just that class (e.g., IN, CH).                    
<a class="line" id="line-894" href="#line-894">  894</a>                                                                            
<a class="line" id="line-895" href="#line-895">  895</a> *               matches aLL RR classes.                                    
<a class="line" id="line-896" href="#line-896">  896</a>                                                                            
<a class="line" id="line-897" href="#line-897">  897</a> Using the query domain name, QTYPE, and QCLASS, the name server looks      
<a class="line" id="line-898" href="#line-898">  898</a> for matching RRs.  In addition to relevant records, the name server may    
<a class="line" id="line-899" href="#line-899">  899</a> return RRs that point toward a name server that has the desired            
<a class="line" id="line-900" href="#line-900">  900</a> information or RRs that are expected to be useful in interpreting the      
<a class="line" id="line-901" href="#line-901">  901</a> relevant RRs.  For example, a name server that doesn&#x27;t have the            
<a class="line" id="line-902" href="#line-902">  902</a> requested information may know a name server that does; a name server      
<a class="line" id="line-903" href="#line-903">  903</a> that returns a domain name in a relevant RR may also return the RR that    
<a class="line" id="line-904" href="#line-904">  904</a> binds that domain name to an address.                                      
<a class="line" id="line-905" href="#line-905">  905</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-816">line-816</a> Paul Hoffman</span><span class="caption">RFC 2181 updates the use of the SOA record</span><span class="timestamp"></span></div><div class="notes"><p>
Section 7.1 of <a target='_blank' href='https://datatracker.ietf.org/doc/rfc2181/'>RFC2181</a> says:
<br/>
<pre>
RFC1034, in section 3.7, indicates that the authority section of an
authoritative answer may contain the SOA record for the zone from
which the answer was obtained.  When discussing negative caching,
RFC1034 section 4.3.4 refers to this technique but mentions the
additional section of the response.  The former is correct, as is
implied by the example shown in section 6.2.5 of RFC1034.  SOA
records, if added, are to be placed in the authority section.
</pre>
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-906" href="#line-906">  906</a> For example, a mailer tying to send mail to Mockapetris@ISI.EDU might      
<a class="line" id="line-907" href="#line-907">  907</a> ask the resolver for mail information about ISI.EDU, resulting in a        
<a class="line" id="line-908" href="#line-908">  908</a> query for QNAME=ISI.EDU, QTYPE=MX, QCLASS=IN.  The response&#x27;s answer       
<a class="line" id="line-909" href="#line-909">  909</a> section would be:                                                          
<a class="line" id="line-910" href="#line-910">  910</a>                                                                            
<a class="line" id="line-911" href="#line-911">  911</a>     ISI.EDU.        MX      10 VENERA.ISI.EDU.                             
<a class="line" id="line-912" href="#line-912">  912</a>                     MX      10 VAXA.ISI.EDU.                               
<a class="line" id="line-913" href="#line-913">  913</a>                                                                            
<a class="line" id="line-914" href="#line-914">  914</a> while the additional section might be:                                     
<a class="line" id="line-915" href="#line-915">  915</a>                                                                            
<a class="line" id="line-916" href="#line-916">  916</a>     VAXA.ISI.EDU.   A       10.2.0.27                                      
<a class="line" id="line-917" href="#line-917">  917</a>                     A       128.9.0.33                                     
<a class="line" id="line-918" href="#line-918">  918</a>     VENERA.ISI.EDU. A       10.1.0.52                                      
<a class="line" id="line-919" href="#line-919">  919</a>                     A       128.9.0.32                                     
<a class="line" id="line-920" href="#line-920">  920</a>                                                                            
<a class="line" id="line-921" href="#line-921">  921</a> Because the server assumes that if the requester wants mail exchange       
<a class="line" id="line-922" href="#line-922">  922</a> information, it will probably want the addresses of the mail exchanges     
<a class="line" id="line-923" href="#line-923">  923</a> soon afterward.                                                            
<a class="line" id="line-924" href="#line-924">  924</a>                                                                            
<a class="line" id="line-925" href="#line-925">  925</a> Note that the QCLASS=* construct requires special interpretation           
<a class="line" id="line-926" href="#line-926">  926</a> regarding authority.  Since a particular name server may not know all of   
<a class="line" id="line-927" href="#line-927">  927</a> the classes available in the domain system, it can never know if it is     
<a class="line" id="line-928" href="#line-928">  928</a> authoritative for all classes.  Hence responses to QCLASS=* queries can    
<a class="line" id="line-929" href="#line-929">  929</a>                                                                            
<a class="line" id="line-930" href="#line-930">  930</a>                                                                            
<a class="line" id="line-931" href="#line-931">  931</a>                                                                            
<a class="line" id="line-932" href="#line-932">  932</a> <span class="grey">Mockapetris                                                    [Page 17]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-18" ></span><a class="line" id="line-933" href="#line-933">  933</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-934" href="#line-934">  934</a>                                                                            
<a class="line" id="line-935" href="#line-935">  935</a>                                                                            
<a class="line" id="line-936" href="#line-936">  936</a> never be authoritative.                                                    
<a class="line" id="line-937" href="#line-937">  937</a>                                                                            
<a class="line" id="line-938" href="#line-938">  938</a> <span class="h4"><a class="selflink" id="section-3.7.2" href="#section-3.7.2">3.7.2</a>. Inverse queries (Optional)</span>                                          
<a class="line" id="line-939" href="#line-939">  939</a>                                                                            
<a class="line" id="line-940" href="#line-940">  940</a> Name servers may also support inverse queries that map a particular        
<a class="line" id="line-941" href="#line-941">  941</a> resource to a domain name or domain names that have that resource.  For    
<a class="line" id="line-942" href="#line-942">  942</a> example, while a standard query might map a domain name to a SOA RR, the   
<a class="line" id="line-943" href="#line-943">  943</a> corresponding inverse query might map the SOA RR back to the domain        
<a class="line" id="line-944" href="#line-944">  944</a> name.                                                                      
<a class="line" id="line-945" href="#line-945">  945</a>                                                                            
<a class="line" id="line-946" href="#line-946">  946</a> Implementation of this service is optional in a name server, but all       
<a class="line" id="line-947" href="#line-947">  947</a> name servers must at least be able to understand an inverse query          
<a class="line" id="line-948" href="#line-948">  948</a> message and return a not-implemented error response.                       
<a class="line" id="line-949" href="#line-949">  949</a>                                                                            
<a class="line" id="line-950" href="#line-950">  950</a> The domain system cannot guarantee the completeness or uniqueness of       
<a class="line" id="line-951" href="#line-951">  951</a> inverse queries because the domain system is organized by domain name      
<a class="line" id="line-952" href="#line-952">  952</a> rather than by host address or any other resource type.  Inverse queries   
<a class="line" id="line-953" href="#line-953">  953</a> are primarily useful for debugging and database maintenance activities.    
<a class="line" id="line-954" href="#line-954">  954</a>                                                                            
<a class="line" id="line-955" href="#line-955">  955</a> Inverse queries may not return the proper TTL, and do not indicate cases   
<a class="line" id="line-956" href="#line-956">  956</a> where the identified RR is one of a set (for example, one address for a    
<a class="line" id="line-957" href="#line-957">  957</a> host having multiple addresses).  Therefore, the RRs returned in inverse   
<a class="line" id="line-958" href="#line-958">  958</a> queries should never be cached.                                            
<a class="line" id="line-959" href="#line-959">  959</a>                                                                            
<a class="line" id="line-960" href="#line-960">  960</a> Inverse queries are NOT an acceptable method for mapping host addresses    
<a class="line" id="line-961" href="#line-961">  961</a> to host names; use the IN-ADDR.ARPA domain instead.                        
<a class="line" id="line-962" href="#line-962">  962</a>                                                                            
<a class="line" id="line-963" href="#line-963">  963</a> A detailed discussion of inverse queries is contained in [<a href="./rfc1035.html">RFC-1035</a>].       
<a class="line" id="line-964" href="#line-964">  964</a>                                                                            
<a class="line" id="line-965" href="#line-965">  965</a> <span class="h3"><a class="selflink" id="section-3.8" href="#section-3.8">3.8</a>. Status queries (Experimental)</span>                                         
<a class="line" id="line-966" href="#line-966">  966</a>                                                                            
<a class="line" id="line-967" href="#line-967">  967</a> To be defined.                                                             
<a class="line" id="line-968" href="#line-968">  968</a>                                                                            
<a class="line" id="line-969" href="#line-969">  969</a> <span class="h3"><a class="selflink" id="section-3.9" href="#section-3.9">3.9</a>. Completion queries (Obsolete)</span>                                         
<a class="line" id="line-970" href="#line-970">  970</a>                                                                            
<a class="line" id="line-971" href="#line-971">  971</a> The optional completion services described in RFCs 882 and 883 have been   
<a class="line" id="line-972" href="#line-972">  972</a> deleted.  Redesigned services may become available in the future, or the   
<a class="line" id="line-973" href="#line-973">  973</a> opcodes may be reclaimed for other use.                                    
<a class="line" id="line-974" href="#line-974">  974</a>                                                                            
<a class="line" id="line-975" href="#line-975">  975</a> <span class="h2"><a class="selflink" id="section-4" href="#section-4">4</a>. NAME SERVERS</span>                                                            
<a class="line" id="line-976" href="#line-976">  976</a>                                                                            
<a class="line" id="line-977" href="#line-977">  977</a> <span class="h3"><a class="selflink" id="section-4.1" href="#section-4.1">4.1</a>. Introduction</span>                                                          
<a class="line" id="line-978" href="#line-978">  978</a>                                                                            
<a class="line" id="line-979" href="#line-979">  979</a> Name servers are the repositories of information that make up the domain   
<a class="line" id="line-980" href="#line-980">  980</a> database.  The database is divided up into sections called zones, which    
<a class="line" id="line-981" href="#line-981">  981</a> are distributed among the name servers.  While name servers can have       
<a class="line" id="line-982" href="#line-982">  982</a> several optional functions and sources of data, the essential task of a    
<a class="line" id="line-983" href="#line-983">  983</a> name server is to answer queries using data in its zones.  By design,      
<a class="line" id="line-984" href="#line-984">  984</a>                                                                            
<a class="line" id="line-985" href="#line-985">  985</a>                                                                            
<a class="line" id="line-986" href="#line-986">  986</a>                                                                            
<a class="line" id="line-987" href="#line-987">  987</a> <span class="grey">Mockapetris                                                    [Page 18]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-19" ></span><a class="line" id="line-988" href="#line-988">  988</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-989" href="#line-989">  989</a>                                                                            
<a class="line" id="line-990" href="#line-990">  990</a>                                                                            
<a class="line" id="line-991" href="#line-991">  991</a> name servers can answer queries in a simple manner; the response can       
<a class="line" id="line-992" href="#line-992">  992</a> always be generated using only local data, and either contains the         
<a class="line" id="line-993" href="#line-993">  993</a> answer to the question or a referral to other name servers &quot;closer&quot; to     
<a class="line" id="line-994" href="#line-994">  994</a> the desired information.                                                   
<a class="line" id="line-995" href="#line-995">  995</a>                                                                            
<a class="line" id="line-996" href="#line-996">  996</a> A given zone will be available from several name servers to insure its     
<a class="line" id="line-997" href="#line-997">  997</a> availability in spite of host or communication link failure.  By           
<a class="line" id="line-998" href="#line-998">  998</a> administrative fiat, we require every zone to be available on at least     
<a class="line" id="line-999" href="#line-999">  999</a> two servers, and many zones have more redundancy than that.                
<a class="line" id="line-1000" href="#line-1000"> 1000</a>                                                                            
<a class="line" id="line-1001" href="#line-1001"> 1001</a> A given name server will typically support one or more zones, but this     
<a class="line" id="line-1002" href="#line-1002"> 1002</a> gives it authoritative information about only a small section of the       
<a class="line" id="line-1003" href="#line-1003"> 1003</a> domain tree.  It may also have some cached non-authoritative data about    
<a class="line" id="line-1004" href="#line-1004"> 1004</a> other parts of the tree.  The name server marks its responses to queries   
<a class="line" id="line-1005" href="#line-1005"> 1005</a> so that the requester can tell whether the response comes from             
<a class="line" id="line-1006" href="#line-1006"> 1006</a> authoritative data or not.                                                 
<a class="line" id="line-1007" href="#line-1007"> 1007</a>                                                                            
<a class="line" id="line-1008" href="#line-1008"> 1008</a> <span class="h3"><a class="selflink" id="section-4.2" href="#section-4.2">4.2</a>. How the database is divided into zones</span>                                
<a class="line" id="line-1009" href="#line-1009"> 1009</a>                                                                            
<a class="line" id="line-1010" href="#line-1010"> 1010</a> The domain database is partitioned in two ways: by class, and by &quot;cuts&quot;    
<a class="line" id="line-1011" href="#line-1011"> 1011</a> made in the name space between nodes.                                      
<a class="line" id="line-1012" href="#line-1012"> 1012</a>                                                                            
<a class="line" id="line-1013" href="#line-1013"> 1013</a> The class partition is simple.  The database for any class is organized,   
<a class="line" id="line-1014" href="#line-1014"> 1014</a> delegated, and maintained separately from all other classes.  Since, by    
<a class="line" id="line-1015" href="#line-1015"> 1015</a> convention, the name spaces are the same for all classes, the separate     
<a class="line" id="line-1016" href="#line-1016"> 1016</a> classes can be thought of as an array of parallel namespace trees.  Note   
<a class="line" id="line-1017" href="#line-1017"> 1017</a> that the data attached to nodes will be different for these different      
<a class="line" id="line-1018" href="#line-1018"> 1018</a> parallel classes.  The most common reasons for creating a new class are    
<a class="line" id="line-1019" href="#line-1019"> 1019</a> the necessity for a new data format for existing types or a desire for a   
<a class="line" id="line-1020" href="#line-1020"> 1020</a> separately managed version of the existing name space.                     
<a class="line" id="line-1021" href="#line-1021"> 1021</a>                                                                            
<a class="line" id="line-1022" href="#line-1022"> 1022</a> Within a class, &quot;cuts&quot; in the name space can be made between any two       
<a class="line" id="line-1023" href="#line-1023"> 1023</a> adjacent nodes.  After all cuts are made, each group of connected name     
<a class="line" id="line-1024" href="#line-1024"> 1024</a> space is a separate zone.  The zone is said to be authoritative for all    
<a class="line" id="line-1025" href="#line-1025"> 1025</a> names in the connected region.  Note that the &quot;cuts&quot; in the name space     
<a class="line" id="line-1026" href="#line-1026"> 1026</a> may be in different places for different classes, the name servers may     
<a class="line" id="line-1027" href="#line-1027"> 1027</a> be different, etc.                                                         
<a class="line" id="line-1028" href="#line-1028"> 1028</a>                                                                            
<a class="line" id="line-1029" href="#line-1029"> 1029</a> These rules mean that every zone has at least one node, and hence domain   
<a class="line" id="line-1030" href="#line-1030"> 1030</a> name, for which it is authoritative, and all of the nodes in a             
<a class="line" id="line-1031" href="#line-1031"> 1031</a> particular zone are connected.  Given, the tree structure, every zone      
<a class="line" id="line-1032" href="#line-1032"> 1032</a> has a highest node which is closer to the root than any other node in      
<a class="line" id="line-1033" href="#line-1033"> 1033</a> the zone.  The name of this node is often used to identify the zone.       
<a class="line" id="line-1034" href="#line-1034"> 1034</a>                                                                            
<a class="line" id="line-1035" href="#line-1035"> 1035</a> It would be possible, though not particularly useful, to partition the     
<a class="line" id="line-1036" href="#line-1036"> 1036</a> name space so that each domain name was in a separate zone or so that      
<a class="line" id="line-1037" href="#line-1037"> 1037</a> all nodes were in a single zone.  Instead, the database is partitioned     
<a class="line" id="line-1038" href="#line-1038"> 1038</a> at points where a particular organization wants to take over control of    
<a class="line" id="line-1039" href="#line-1039"> 1039</a>                                                                            
<a class="line" id="line-1040" href="#line-1040"> 1040</a>                                                                            
<a class="line" id="line-1041" href="#line-1041"> 1041</a>                                                                            
<a class="line" id="line-1042" href="#line-1042"> 1042</a> <span class="grey">Mockapetris                                                    [Page 19]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-20" ></span><a class="line" id="line-1043" href="#line-1043"> 1043</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1044" href="#line-1044"> 1044</a>                                                                            
<a class="line" id="line-1045" href="#line-1045"> 1045</a>                                                                            
<a class="line" id="line-1046" href="#line-1046"> 1046</a> a subtree.  Once an organization controls its own zone it can              
<a class="line" id="line-1047" href="#line-1047"> 1047</a> unilaterally change the data in the zone, grow new tree sections           
<a class="line" id="line-1048" href="#line-1048"> 1048</a> connected to the zone, delete existing nodes, or delegate new subzones     
<a class="line" id="line-1049" href="#line-1049"> 1049</a> under its zone.                                                            
<a class="line" id="line-1050" href="#line-1050"> 1050</a>                                                                            
<a class="line" id="line-1051" href="#line-1051"> 1051</a> If the organization has substructure, it may want to make further          
<a class="line" id="line-1052" href="#line-1052"> 1052</a> internal partitions to achieve nested delegations of name space control.   
<a class="line" id="line-1053" href="#line-1053"> 1053</a> In some cases, such divisions are made purely to make database             
<a class="line" id="line-1054" href="#line-1054"> 1054</a> maintenance more convenient.                                               
<a class="line" id="line-1055" href="#line-1055"> 1055</a>                                                                            
<a class="line" id="line-1056" href="#line-1056"> 1056</a> <span class="h4"><a class="selflink" id="section-4.2.1" href="#section-4.2.1">4.2.1</a>. Technical considerations</span>                                            
<a class="line" id="line-1057" href="#line-1057"> 1057</a>                                                                            
<a class="line" id="line-1058" href="#line-1058"> 1058</a> The data that describes a zone has four major parts:                       
<a class="line" id="line-1059" href="#line-1059"> 1059</a>                                                                            
<a class="line" id="line-1060" href="#line-1060"> 1060</a>    - Authoritative data for all nodes within the zone.                     
<a class="line" id="line-1061" href="#line-1061"> 1061</a>                                                                            
<a class="line" id="line-1062" href="#line-1062"> 1062</a>    - Data that defines the top node of the zone (can be thought of         
<a class="line" id="line-1063" href="#line-1063"> 1063</a>      as part of the authoritative data).                                   
<a class="line" id="line-1064" href="#line-1064"> 1064</a>                                                                            
<a class="line" id="line-1065" href="#line-1065"> 1065</a>    - Data that describes delegated subzones, i.e., cuts around the         
<a class="line" id="line-1066" href="#line-1066"> 1066</a>      bottom of the zone.                                                   
<a class="line" id="line-1067" href="#line-1067"> 1067</a>                                                                            
<a class="line" id="line-1068" href="#line-1068"> 1068</a>    - Data that allows access to name servers for subzones                  
<a class="line" id="line-1069" href="#line-1069"> 1069</a>      (sometimes called &quot;glue&quot; data).                                       
<a class="line" id="line-1070" href="#line-1070"> 1070</a>                                                                            
<a class="line" id="line-1071" href="#line-1071"> 1071</a> All of this data is expressed in the form of RRs, so a zone can be         
<a class="line" id="line-1072" href="#line-1072"> 1072</a> completely described in terms of a set of RRs.  Whole zones can be         
<a class="line" id="line-1073" href="#line-1073"> 1073</a> transferred between name servers by transferring the RRs, either carried   
<a class="line" id="line-1074" href="#line-1074"> 1074</a> in a series of messages or by FTPing a master file which is a textual      
<a class="line" id="line-1075" href="#line-1075"> 1075</a> representation.                                                            
<a class="line" id="line-1076" href="#line-1076"> 1076</a>                                                                            
<a class="line" id="line-1077" href="#line-1077"> 1077</a> The authoritative data for a zone is simply all of the RRs attached to     
<a class="line" id="line-1078" href="#line-1078"> 1078</a> all of the nodes from the top node of the zone down to leaf nodes or       
<a class="line" id="line-1079" href="#line-1079"> 1079</a> nodes above cuts around the bottom edge of the zone.                       
<a class="line" id="line-1080" href="#line-1080"> 1080</a>                                                                            
<a class="line" id="line-1081" href="#line-1081"> 1081</a> Though logically part of the authoritative data, the RRs that describe     
<a class="line" id="line-1082" href="#line-1082"> 1082</a> the top node of the zone are especially important to the zone&#x27;s            
<a class="line" id="line-1083" href="#line-1083"> 1083</a> management.  These RRs are of two types: name server RRs that list, one    
<a class="line" id="line-1084" href="#line-1084"> 1084</a> per RR, all of the servers for the zone, and a single SOA RR that          
<a class="line" id="line-1085" href="#line-1085"> 1085</a> describes zone management parameters.                                      
<a class="line" id="line-1086" href="#line-1086"> 1086</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial heldfordocumentupdate anonymous"><div class="title"><span class="reference"><a href="#line-906">line-906</a> anonymous</span><span class="caption"><span id="rfc.erratum.4893">(Editorial Erratum #<a target='_blank' title='anonymous (Editorial)' href='https://www.rfc-editor.org/errata/eid4893'>4893</a>) [Held for Document Update]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
For example, a mailer tying to send mail to Mockapetris@ISI.EDU might
ask the resolver for mail information about ISI.EDU, resulting in a
query for QNAME=ISI.EDU, QTYPE=MX, QCLASS=IN.
</pre></div>
<div class='correct'>It should say:<pre>
For example, a mailer t<ins>r</ins>ying to send mail to Mockapetris@ISI.EDU might
ask the resolver for mail information about ISI.EDU, resulting in a
query for QNAME=ISI.EDU, QTYPE=MX, QCLASS=IN.
</pre></div>
<hr/>
<div class='note'>
Trying, not tying.
</div>

</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1087" href="#line-1087"> 1087</a> The RRs that describe cuts around the bottom of the zone are NS RRs that   
<a class="line" id="line-1088" href="#line-1088"> 1088</a> name the servers for the subzones.  Since the cuts are between nodes,      
<a class="line" id="line-1089" href="#line-1089"> 1089</a> these RRs are NOT part of the authoritative data of the zone, and should   
<a class="line" id="line-1090" href="#line-1090"> 1090</a> be exactly the same as the corresponding RRs in the top node of the        
<a class="line" id="line-1091" href="#line-1091"> 1091</a> subzone.  Since name servers are always associated with zone boundaries,   
<a class="line" id="line-1092" href="#line-1092"> 1092</a> NS RRs are only found at nodes which are the top node of some zone.  In    
<a class="line" id="line-1093" href="#line-1093"> 1093</a> the data that makes up a zone, NS RRs are found at the top node of the     
<a class="line" id="line-1094" href="#line-1094"> 1094</a>                                                                            
<a class="line" id="line-1095" href="#line-1095"> 1095</a>                                                                            
<a class="line" id="line-1096" href="#line-1096"> 1096</a>                                                                            
<a class="line" id="line-1097" href="#line-1097"> 1097</a> <span class="grey">Mockapetris                                                    [Page 20]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-21" ></span><a class="line" id="line-1098" href="#line-1098"> 1098</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1099" href="#line-1099"> 1099</a>                                                                            
<a class="line" id="line-1100" href="#line-1100"> 1100</a>                                                                            
<a class="line" id="line-1101" href="#line-1101"> 1101</a> zone (and are authoritative) and at cuts around the bottom of the zone     
<a class="line" id="line-1102" href="#line-1102"> 1102</a> (where they are not authoritative), but never in between.                  
<a class="line" id="line-1103" href="#line-1103"> 1103</a>                                                                            
<a class="line" id="line-1104" href="#line-1104"> 1104</a> One of the goals of the zone structure is that any zone have all the       
<a class="line" id="line-1105" href="#line-1105"> 1105</a> data required to set up communications with the name servers for any       
<a class="line" id="line-1106" href="#line-1106"> 1106</a> subzones.  That is, parent zones have all the information needed to        
<a class="line" id="line-1107" href="#line-1107"> 1107</a> access servers for their children zones.  The NS RRs that name the         
<a class="line" id="line-1108" href="#line-1108"> 1108</a> servers for subzones are often not enough for this task since they name    
<a class="line" id="line-1109" href="#line-1109"> 1109</a> the servers, but do not give their addresses.  In particular, if the       
<a class="line" id="line-1110" href="#line-1110"> 1110</a> name of the name server is itself in the subzone, we could be faced with   
<a class="line" id="line-1111" href="#line-1111"> 1111</a> the situation where the NS RRs tell us that in order to learn a name       
<a class="line" id="line-1112" href="#line-1112"> 1112</a> server&#x27;s address, we should contact the server using the address we wish   
<a class="line" id="line-1113" href="#line-1113"> 1113</a> to learn.  To fix this problem, a zone contains &quot;glue&quot; RRs which are not   
<a class="line" id="line-1114" href="#line-1114"> 1114</a> part of the authoritative data, and are address RRs for the servers.       
<a class="line" id="line-1115" href="#line-1115"> 1115</a> These RRs are only necessary if the name server&#x27;s name is &quot;below&quot; the      
<a class="line" id="line-1116" href="#line-1116"> 1116</a> cut, and are only used as part of a referral response.                     
<a class="line" id="line-1117" href="#line-1117"> 1117</a>                                                                            
<a class="line" id="line-1118" href="#line-1118"> 1118</a> <span class="h4"><a class="selflink" id="section-4.2.2" href="#section-4.2.2">4.2.2</a>. Administrative considerations</span>                                       
<a class="line" id="line-1119" href="#line-1119"> 1119</a>                                                                            
<a class="line" id="line-1120" href="#line-1120"> 1120</a> When some organization wants to control its own domain, the first step     
<a class="line" id="line-1121" href="#line-1121"> 1121</a> is to identify the proper parent zone, and get the parent zone&#x27;s owners    
<a class="line" id="line-1122" href="#line-1122"> 1122</a> to agree to the delegation of control.  While there are no particular      
<a class="line" id="line-1123" href="#line-1123"> 1123</a> technical constraints dealing with where in the tree this can be done,     
<a class="line" id="line-1124" href="#line-1124"> 1124</a> there are some administrative groupings discussed in [<a href="https://datatracker.ietf.org/doc/rfc1032/" title="&quot;Establishing a Domain - Guidelines for Administrators&quot;">RFC-1032</a>] which      
<a class="line" id="line-1125" href="#line-1125"> 1125</a> deal with top level organization, and middle level zones are free to       
<a class="line" id="line-1126" href="#line-1126"> 1126</a> create their own rules.  For example, one university might choose to use   
<a class="line" id="line-1127" href="#line-1127"> 1127</a> a single zone, while another might choose to organize by subzones          
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-1087">line-1087</a> Paul Hoffman</span><span class="caption">RFC 4035 changes what else can exist with a zone cut, namely NSEC and DS RRs</span><span class="timestamp"></span></div><div class="notes"><p>
Section 2.6 of <a target='_blank' href='https://datatracker.ietf.org/doc/rfc4035/'>RFC4035</a> says:
<br/>
<pre>
DNSSEC introduced two new RR types that are unusual in that they can
appear at the parental side of a zone cut.  At the parental side of a
zone cut (that is, at a delegation point), NSEC RRs are REQUIRED at
the owner name.  A DS RR could also be present if the zone being
delegated is signed and seeks to have a chain of authentication to
the parent zone.  This is an exception to the original DNS
specification ([RFC1034]), which states that only NS RRsets could
appear at the parental side of a zone cut.

This specification updates the original DNS specification to allow
NSEC and DS RR types at the parent side of a zone cut.  These RRsets
are authoritative for the parent when they appear at the parent side
of a zone cut.
</pre>
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1128" href="#line-1128"> 1128</a> dedicated to individual departments or schools.  [<a href="https://datatracker.ietf.org/doc/rfc1033/" title="&quot;Domain Administrators Operations Guide&quot;">RFC-1033</a>] catalogs       
<a class="line" id="line-1129" href="#line-1129"> 1129</a> available DNS software an discusses administration procedures.             
<a class="line" id="line-1130" href="#line-1130"> 1130</a>                                                                            
<a class="line" id="line-1131" href="#line-1131"> 1131</a> Once the proper name for the new subzone is selected, the new owners       
<a class="line" id="line-1132" href="#line-1132"> 1132</a> should be required to demonstrate redundant name server support.  Note     
<a class="line" id="line-1133" href="#line-1133"> 1133</a> that there is no requirement that the servers for a zone reside in a       
<a class="line" id="line-1134" href="#line-1134"> 1134</a> host which has a name in that domain.  In many cases, a zone will be       
<a class="line" id="line-1135" href="#line-1135"> 1135</a> more accessible to the internet at large if its servers are widely         
<a class="line" id="line-1136" href="#line-1136"> 1136</a> distributed rather than being within the physical facilities controlled    
<a class="line" id="line-1137" href="#line-1137"> 1137</a> by the same organization that manages the zone.  For example, in the       
<a class="line" id="line-1138" href="#line-1138"> 1138</a> current DNS, one of the name servers for the United Kingdom, or UK         
<a class="line" id="line-1139" href="#line-1139"> 1139</a> domain, is found in the US.  This allows US hosts to get UK data without   
<a class="line" id="line-1140" href="#line-1140"> 1140</a> using limited transatlantic bandwidth.                                     
<a class="line" id="line-1141" href="#line-1141"> 1141</a>                                                                            
<a class="line" id="line-1142" href="#line-1142"> 1142</a> As the last installation step, the delegation NS RRs and glue RRs          
<a class="line" id="line-1143" href="#line-1143"> 1143</a> necessary to make the delegation effective should be added to the parent   
<a class="line" id="line-1144" href="#line-1144"> 1144</a> zone.  The administrators of both zones should insure that the NS and      
<a class="line" id="line-1145" href="#line-1145"> 1145</a> glue RRs which mark both sides of the cut are consistent and remain so.    
<a class="line" id="line-1146" href="#line-1146"> 1146</a>                                                                            
<a class="line" id="line-1147" href="#line-1147"> 1147</a> <span class="h3"><a class="selflink" id="section-4.3" href="#section-4.3">4.3</a>. Name server internals</span>                                                 
<a class="line" id="line-1148" href="#line-1148"> 1148</a>                                                                            
<a class="line" id="line-1149" href="#line-1149"> 1149</a>                                                                            
<a class="line" id="line-1150" href="#line-1150"> 1150</a>                                                                            
<a class="line" id="line-1151" href="#line-1151"> 1151</a>                                                                            
<a class="line" id="line-1152" href="#line-1152"> 1152</a> <span class="grey">Mockapetris                                                    [Page 21]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-22" ></span><a class="line" id="line-1153" href="#line-1153"> 1153</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1154" href="#line-1154"> 1154</a>                                                                            
<a class="line" id="line-1155" href="#line-1155"> 1155</a>                                                                            
<a class="line" id="line-1156" href="#line-1156"> 1156</a> <span class="h4"><a class="selflink" id="section-4.3.1" href="#section-4.3.1">4.3.1</a>. Queries and responses</span>                                               
<a class="line" id="line-1157" href="#line-1157"> 1157</a>                                                                            
<a class="line" id="line-1158" href="#line-1158"> 1158</a> The principal activity of name servers is to answer standard queries.      
<a class="line" id="line-1159" href="#line-1159"> 1159</a> Both the query and its response are carried in a standard message format   
<a class="line" id="line-1160" href="#line-1160"> 1160</a> which is described in [<a href="./rfc1035.html">RFC-1035</a>].  The query contains a QTYPE, QCLASS,     
<a class="line" id="line-1161" href="#line-1161"> 1161</a> and QNAME, which describe the types and classes of desired information     
<a class="line" id="line-1162" href="#line-1162"> 1162</a> and the name of interest.                                                  
<a class="line" id="line-1163" href="#line-1163"> 1163</a>                                                                            
<a class="line" id="line-1164" href="#line-1164"> 1164</a> The way that the name server answers the query depends upon whether it     
<a class="line" id="line-1165" href="#line-1165"> 1165</a> is operating in recursive mode or not:                                     
<a class="line" id="line-1166" href="#line-1166"> 1166</a>                                                                            
<a class="line" id="line-1167" href="#line-1167"> 1167</a>    - The simplest mode for the server is non-recursive, since it           
<a class="line" id="line-1168" href="#line-1168"> 1168</a>      can answer queries using only local information: the response         
<a class="line" id="line-1169" href="#line-1169"> 1169</a>      contains an error, the answer, or a referral to some other            
<a class="line" id="line-1170" href="#line-1170"> 1170</a>      server &quot;closer&quot; to the answer.  All name servers must                 
<a class="line" id="line-1171" href="#line-1171"> 1171</a>      implement non-recursive queries.                                      
<a class="line" id="line-1172" href="#line-1172"> 1172</a>                                                                            
<a class="line" id="line-1173" href="#line-1173"> 1173</a>    - The simplest mode for the client is recursive, since in this          
<a class="line" id="line-1174" href="#line-1174"> 1174</a>      mode the name server acts in the role of a resolver and               
<a class="line" id="line-1175" href="#line-1175"> 1175</a>      returns either an error or the answer, but never referrals.           
<a class="line" id="line-1176" href="#line-1176"> 1176</a>      This service is optional in a name server, and the name server        
<a class="line" id="line-1177" href="#line-1177"> 1177</a>      may also choose to restrict the clients which can use                 
<a class="line" id="line-1178" href="#line-1178"> 1178</a>      recursive mode.                                                       
<a class="line" id="line-1179" href="#line-1179"> 1179</a>                                                                            
<a class="line" id="line-1180" href="#line-1180"> 1180</a> Recursive service is helpful in several situations:                        
<a class="line" id="line-1181" href="#line-1181"> 1181</a>                                                                            
<a class="line" id="line-1182" href="#line-1182"> 1182</a>    - a relatively simple requester that lacks the ability to use           
<a class="line" id="line-1183" href="#line-1183"> 1183</a>      anything other than a direct answer to the question.                  
<a class="line" id="line-1184" href="#line-1184"> 1184</a>                                                                            
<a class="line" id="line-1185" href="#line-1185"> 1185</a>    - a request that needs to cross protocol or other boundaries and        
<a class="line" id="line-1186" href="#line-1186"> 1186</a>      can be sent to a server which can act as intermediary.                
<a class="line" id="line-1187" href="#line-1187"> 1187</a>                                                                            
<a class="line" id="line-1188" href="#line-1188"> 1188</a>    - a network where we want to concentrate the cache rather than          
<a class="line" id="line-1189" href="#line-1189"> 1189</a>      having a separate cache for each client.                              
<a class="line" id="line-1190" href="#line-1190"> 1190</a>                                                                            
<a class="line" id="line-1191" href="#line-1191"> 1191</a> Non-recursive service is appropriate if the requester is capable of        
<a class="line" id="line-1192" href="#line-1192"> 1192</a> pursuing referrals and interested in information which will aid future     
<a class="line" id="line-1193" href="#line-1193"> 1193</a> requests.                                                                  
<a class="line" id="line-1194" href="#line-1194"> 1194</a>                                                                            
<a class="line" id="line-1195" href="#line-1195"> 1195</a> The use of recursive mode is limited to cases where both the client and    
<a class="line" id="line-1196" href="#line-1196"> 1196</a> the name server agree to its use.  The agreement is negotiated through     
<a class="line" id="line-1197" href="#line-1197"> 1197</a> the use of two bits in query and response messages:                        
<a class="line" id="line-1198" href="#line-1198"> 1198</a>                                                                            
<a class="line" id="line-1199" href="#line-1199"> 1199</a>    - The recursion available, or RA bit, is set or cleared by a            
<a class="line" id="line-1200" href="#line-1200"> 1200</a>      name server in all responses.  The bit is true if the name            
<a class="line" id="line-1201" href="#line-1201"> 1201</a>      server is willing to provide recursive service for the client,        
<a class="line" id="line-1202" href="#line-1202"> 1202</a>      regardless of whether the client requested recursive service.         
<a class="line" id="line-1203" href="#line-1203"> 1203</a>      That is, RA signals availability rather than use.                     
<a class="line" id="line-1204" href="#line-1204"> 1204</a>                                                                            
<a class="line" id="line-1205" href="#line-1205"> 1205</a>                                                                            
<a class="line" id="line-1206" href="#line-1206"> 1206</a>                                                                            
<a class="line" id="line-1207" href="#line-1207"> 1207</a> <span class="grey">Mockapetris                                                    [Page 22]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-23" ></span><a class="line" id="line-1208" href="#line-1208"> 1208</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1209" href="#line-1209"> 1209</a>                                                                            
<a class="line" id="line-1210" href="#line-1210"> 1210</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial heldfordocumentupdate sun congyou"><div class="title"><span class="reference"><a href="#line-1128">line-1128</a> Sun Congyou</span><span class="caption"><span id="rfc.erratum.4229">(Editorial Erratum #<a target='_blank' title='sun congyou (Editorial)' href='https://www.rfc-editor.org/errata/eid4229'>4229</a>) [Held for Document Update]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
[RFC-1033] catalogs available DNS software an discusses administration 
procedures.
</pre></div>
<div class='correct'>It should say:<pre>
[RFC-1033] catalogs available DNS software an<ins>d</ins> discusses administration 
procedures.
</pre></div>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1211" href="#line-1211"> 1211</a>    - Queries contain a bit called recursion desired or RD.  This           
<a class="line" id="line-1212" href="#line-1212"> 1212</a>      bit specifies specifies whether the requester wants recursive         
<a class="line" id="line-1213" href="#line-1213"> 1213</a>      service for this query.  Clients may request recursive service        
<a class="line" id="line-1214" href="#line-1214"> 1214</a>      from any name server, though they should depend upon receiving        
<a class="line" id="line-1215" href="#line-1215"> 1215</a>      it only from servers which have previously sent an RA, or             
<a class="line" id="line-1216" href="#line-1216"> 1216</a>      servers which have agreed to provide service through private          
<a class="line" id="line-1217" href="#line-1217"> 1217</a>      agreement or some other means outside of the DNS protocol.            
<a class="line" id="line-1218" href="#line-1218"> 1218</a>                                                                            
<a class="line" id="line-1219" href="#line-1219"> 1219</a> The recursive mode occurs when a query with RD set arrives at a server     
<a class="line" id="line-1220" href="#line-1220"> 1220</a> which is willing to provide recursive service; the client can verify       
<a class="line" id="line-1221" href="#line-1221"> 1221</a> that recursive mode was used by checking that both RA and RD are set in    
<a class="line" id="line-1222" href="#line-1222"> 1222</a> the reply.  Note that the name server should never perform recursive       
<a class="line" id="line-1223" href="#line-1223"> 1223</a> service unless asked via RD, since this interferes with trouble shooting   
<a class="line" id="line-1224" href="#line-1224"> 1224</a> of name servers and their databases.                                       
<a class="line" id="line-1225" href="#line-1225"> 1225</a>                                                                            
<a class="line" id="line-1226" href="#line-1226"> 1226</a> If recursive service is requested and available, the recursive response    
<a class="line" id="line-1227" href="#line-1227"> 1227</a> to a query will be one of the following:                                   
<a class="line" id="line-1228" href="#line-1228"> 1228</a>                                                                            
<a class="line" id="line-1229" href="#line-1229"> 1229</a>    - The answer to the query, possibly preface by one or more CNAME        
<a class="line" id="line-1230" href="#line-1230"> 1230</a>      RRs that specify aliases encountered on the way to an answer.         
<a class="line" id="line-1231" href="#line-1231"> 1231</a>                                                                            
<a class="line" id="line-1232" href="#line-1232"> 1232</a>    - A name error indicating that the name does not exist.  This           
<a class="line" id="line-1233" href="#line-1233"> 1233</a>      may include CNAME RRs that indicate that the original query           
<a class="line" id="line-1234" href="#line-1234"> 1234</a>      name was an alias for a name which does not exist.                    
<a class="line" id="line-1235" href="#line-1235"> 1235</a>                                                                            
<a class="line" id="line-1236" href="#line-1236"> 1236</a>    - A temporary error indication.                                         
<a class="line" id="line-1237" href="#line-1237"> 1237</a>                                                                            
<a class="line" id="line-1238" href="#line-1238"> 1238</a> If recursive service is not requested or is not available, the non-        
<a class="line" id="line-1239" href="#line-1239"> 1239</a> recursive response will be one of the following:                           
<a class="line" id="line-1240" href="#line-1240"> 1240</a>                                                                            
<a class="line" id="line-1241" href="#line-1241"> 1241</a>    - An authoritative name error indicating that the name does not         
<a class="line" id="line-1242" href="#line-1242"> 1242</a>      exist.                                                                
<a class="line" id="line-1243" href="#line-1243"> 1243</a>                                                                            
<a class="line" id="line-1244" href="#line-1244"> 1244</a>    - A temporary error indication.                                         
<a class="line" id="line-1245" href="#line-1245"> 1245</a>                                                                            
<a class="line" id="line-1246" href="#line-1246"> 1246</a>    - Some combination of:                                                  
<a class="line" id="line-1247" href="#line-1247"> 1247</a>                                                                            
<a class="line" id="line-1248" href="#line-1248"> 1248</a>      RRs that answer the question, together with an indication             
<a class="line" id="line-1249" href="#line-1249"> 1249</a>      whether the data comes from a zone or is cached.                      
<a class="line" id="line-1250" href="#line-1250"> 1250</a>                                                                            
<a class="line" id="line-1251" href="#line-1251"> 1251</a>      A referral to name servers which have zones which are closer          
<a class="line" id="line-1252" href="#line-1252"> 1252</a>      ancestors to the name than the server sending the reply.              
<a class="line" id="line-1253" href="#line-1253"> 1253</a>                                                                            
<a class="line" id="line-1254" href="#line-1254"> 1254</a>    - RRs that the name server thinks will prove useful to the              
<a class="line" id="line-1255" href="#line-1255"> 1255</a>      requester.                                                            
<a class="line" id="line-1256" href="#line-1256"> 1256</a>                                                                            
<a class="line" id="line-1257" href="#line-1257"> 1257</a>                                                                            
<a class="line" id="line-1258" href="#line-1258"> 1258</a>                                                                            
<a class="line" id="line-1259" href="#line-1259"> 1259</a>                                                                            
<a class="line" id="line-1260" href="#line-1260"> 1260</a>                                                                            
<a class="line" id="line-1261" href="#line-1261"> 1261</a>                                                                            
<a class="line" id="line-1262" href="#line-1262"> 1262</a> <span class="grey">Mockapetris                                                    [Page 23]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-24" ></span><a class="line" id="line-1263" href="#line-1263"> 1263</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1264" href="#line-1264"> 1264</a>                                                                            
<a class="line" id="line-1265" href="#line-1265"> 1265</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial verified yin shuming"><div class="title"><span class="reference"><a href="#line-1211">line-1211</a> "Yin Shuming"</span><span class="caption"><span id="rfc.erratum.565">(Editorial Erratum #<a target='_blank' title='yin shuming (Editorial)' href='https://www.rfc-editor.org/errata/eid565'>565</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
This bit specifies specifies whether the requester wants recursive service 
for this query. Clients may.....
</pre></div>
<div class='correct'>It should say:<pre>
This bit specifies<del> specifies</del> whether the requester wants recursive service
for this query. Clients may.....
</pre></div>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1266" href="#line-1266"> 1266</a> <span class="h4"><a class="selflink" id="section-4.3.2" href="#section-4.3.2">4.3.2</a>. Algorithm</span>                                                           
<a class="line" id="line-1267" href="#line-1267"> 1267</a>                                                                            
<a class="line" id="line-1268" href="#line-1268"> 1268</a> The actual algorithm used by the name server will depend on the local OS   
<a class="line" id="line-1269" href="#line-1269"> 1269</a> and data structures used to store RRs.  The following algorithm assumes    
<a class="line" id="line-1270" href="#line-1270"> 1270</a> that the RRs are organized in several tree structures, one for each        
<a class="line" id="line-1271" href="#line-1271"> 1271</a> zone, and another for the cache:                                           
<a class="line" id="line-1272" href="#line-1272"> 1272</a>                                                                            
<a class="line" id="line-1273" href="#line-1273"> 1273</a>    1. Set or clear the value of recursion available in the response        
<a class="line" id="line-1274" href="#line-1274"> 1274</a>       depending on whether the name server is willing to provide           
<a class="line" id="line-1275" href="#line-1275"> 1275</a>       recursive service.  If recursive service is available and            
<a class="line" id="line-1276" href="#line-1276"> 1276</a>       requested via the RD bit in the query, go to step 5,                 
<a class="line" id="line-1277" href="#line-1277"> 1277</a>       otherwise step 2.                                                    
<a class="line" id="line-1278" href="#line-1278"> 1278</a>                                                                            
<a class="line" id="line-1279" href="#line-1279"> 1279</a>    2. Search the available zones for the zone which is the nearest         
<a class="line" id="line-1280" href="#line-1280"> 1280</a>       ancestor to QNAME.  If such a zone is found, go to step 3,           
<a class="line" id="line-1281" href="#line-1281"> 1281</a>       otherwise step 4.                                                    
<a class="line" id="line-1282" href="#line-1282"> 1282</a>                                                                            
<a class="line" id="line-1283" href="#line-1283"> 1283</a>    3. Start matching down, label by label, in the zone.  The               
<a class="line" id="line-1284" href="#line-1284"> 1284</a>       matching process can terminate several ways:                         
<a class="line" id="line-1285" href="#line-1285"> 1285</a>                                                                            
<a class="line" id="line-1286" href="#line-1286"> 1286</a>          a. If the whole of QNAME is matched, we have found the            
<a class="line" id="line-1287" href="#line-1287"> 1287</a>             node.                                                          
<a class="line" id="line-1288" href="#line-1288"> 1288</a>                                                                            
<a class="line" id="line-1289" href="#line-1289"> 1289</a>             If the data at the node is a CNAME, and QTYPE doesn&#x27;t          
<a class="line" id="line-1290" href="#line-1290"> 1290</a>             match CNAME, copy the CNAME RR into the answer section         
<a class="line" id="line-1291" href="#line-1291"> 1291</a>             of the response, change QNAME to the canonical name in         
<a class="line" id="line-1292" href="#line-1292"> 1292</a>             the CNAME RR, and go back to step 1.                           
<a class="line" id="line-1293" href="#line-1293"> 1293</a>                                                                            
<a class="line" id="line-1294" href="#line-1294"> 1294</a>             Otherwise, copy all RRs which match QTYPE into the             
<a class="line" id="line-1295" href="#line-1295"> 1295</a>             answer section and go to step 6.                               
<a class="line" id="line-1296" href="#line-1296"> 1296</a>                                                                            
<a class="line" id="line-1297" href="#line-1297"> 1297</a>          b. If a match would take us out of the authoritative data,        
<a class="line" id="line-1298" href="#line-1298"> 1298</a>             we have a referral.  This happens when we encounter a          
<a class="line" id="line-1299" href="#line-1299"> 1299</a>             node with NS RRs marking cuts along the bottom of a            
<a class="line" id="line-1300" href="#line-1300"> 1300</a>             zone.                                                          
<a class="line" id="line-1301" href="#line-1301"> 1301</a>                                                                            
<a class="line" id="line-1302" href="#line-1302"> 1302</a>             Copy the NS RRs for the subzone into the authority             
<a class="line" id="line-1303" href="#line-1303"> 1303</a>             section of the reply.  Put whatever addresses are              
<a class="line" id="line-1304" href="#line-1304"> 1304</a>             available into the additional section, using glue RRs          
<a class="line" id="line-1305" href="#line-1305"> 1305</a>             if the addresses are not available from authoritative          
<a class="line" id="line-1306" href="#line-1306"> 1306</a>             data or the cache.  Go to step 4.                              
<a class="line" id="line-1307" href="#line-1307"> 1307</a>                                                                            
<a class="line" id="line-1308" href="#line-1308"> 1308</a>          c. If at some label, a match is impossible (i.e., the             
<a class="line" id="line-1309" href="#line-1309"> 1309</a>             corresponding label does not exist), look to see if a          
<a class="line" id="line-1310" href="#line-1310"> 1310</a>             the &quot;*&quot; label exists.                                          
<a class="line" id="line-1311" href="#line-1311"> 1311</a>                                                                            
<a class="line" id="line-1312" href="#line-1312"> 1312</a>             If the &quot;*&quot; label does not exist, check whether the name        
<a class="line" id="line-1313" href="#line-1313"> 1313</a>             we are looking for is the original QNAME in the query          
<a class="line" id="line-1314" href="#line-1314"> 1314</a>                                                                            
<a class="line" id="line-1315" href="#line-1315"> 1315</a>                                                                            
<a class="line" id="line-1316" href="#line-1316"> 1316</a>                                                                            
<a class="line" id="line-1317" href="#line-1317"> 1317</a> <span class="grey">Mockapetris                                                    [Page 24]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-25" ></span><a class="line" id="line-1318" href="#line-1318"> 1318</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1319" href="#line-1319"> 1319</a>                                                                            
<a class="line" id="line-1320" href="#line-1320"> 1320</a>                                                                            
<a class="line" id="line-1321" href="#line-1321"> 1321</a>             or a name we have followed due to a CNAME.  If the name        
<a class="line" id="line-1322" href="#line-1322"> 1322</a>             is original, set an authoritative name error in the            
<a class="line" id="line-1323" href="#line-1323"> 1323</a>             response and exit.  Otherwise just exit.                       
<a class="line" id="line-1324" href="#line-1324"> 1324</a>                                                                            
<a class="line" id="line-1325" href="#line-1325"> 1325</a>             If the &quot;*&quot; label does exist, match RRs at that node            
<a class="line" id="line-1326" href="#line-1326"> 1326</a>             against QTYPE.  If any match, copy them into the answer        
<a class="line" id="line-1327" href="#line-1327"> 1327</a>             section, but set the owner of the RR to be QNAME, and          
<a class="line" id="line-1328" href="#line-1328"> 1328</a>             not the node with the &quot;*&quot; label.  Go to step 6.                
<a class="line" id="line-1329" href="#line-1329"> 1329</a>                                                                            
<a class="line" id="line-1330" href="#line-1330"> 1330</a>    4. Start matching down in the cache.  If QNAME is found in the          
<a class="line" id="line-1331" href="#line-1331"> 1331</a>       cache, copy all RRs attached to it that match QTYPE into the         
<a class="line" id="line-1332" href="#line-1332"> 1332</a>       answer section.  If there was no delegation from                     
<a class="line" id="line-1333" href="#line-1333"> 1333</a>       authoritative data, look for the best one from the cache, and        
<a class="line" id="line-1334" href="#line-1334"> 1334</a>       put it in the authority section.  Go to step 6.                      
<a class="line" id="line-1335" href="#line-1335"> 1335</a>                                                                            
<a class="line" id="line-1336" href="#line-1336"> 1336</a>    5. Using the local resolver or a copy of its algorithm (see             
<a class="line" id="line-1337" href="#line-1337"> 1337</a>       resolver section of this memo) to answer the query.  Store           
<a class="line" id="line-1338" href="#line-1338"> 1338</a>       the results, including any intermediate CNAMEs, in the answer        
<a class="line" id="line-1339" href="#line-1339"> 1339</a>       section of the response.                                             
<a class="line" id="line-1340" href="#line-1340"> 1340</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-1266">line-1266</a> Paul Hoffman</span><span class="caption">RFC 8482 allows for minimal responses for ANY queries</span><span class="timestamp"></span></div><div class="notes"><p>
<a target='_blank' href='https://datatracker.ietf.org/doc/rfc8482/'>RFC8482</a> gives guidance on what the proper response to
and query for type ANY would be.
In particular, Section 7 of RFC 8482 updates the processing
instructions in RFC 1034 for ANY queries.
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1341" href="#line-1341"> 1341</a>    6. Using local data only, attempt to add other RRs which may be         
<a class="line" id="line-1342" href="#line-1342"> 1342</a>       useful to the additional section of the query.  Exit.                
<a class="line" id="line-1343" href="#line-1343"> 1343</a>                                                                            
<a class="line" id="line-1344" href="#line-1344"> 1344</a> <span class="h4"><a class="selflink" id="section-4.3.3" href="#section-4.3.3">4.3.3</a>. Wildcards</span>                                                           
<a class="line" id="line-1345" href="#line-1345"> 1345</a>                                                                            
<a class="line" id="line-1346" href="#line-1346"> 1346</a> In the previous algorithm, special treatment was given to RRs with owner   
<a class="line" id="line-1347" href="#line-1347"> 1347</a> names starting with the label &quot;*&quot;.  Such RRs are called wildcards.         
<a class="line" id="line-1348" href="#line-1348"> 1348</a> Wildcard RRs can be thought of as instructions for synthesizing RRs.       
<a class="line" id="line-1349" href="#line-1349"> 1349</a> When the appropriate conditions are met, the name server creates RRs       
<a class="line" id="line-1350" href="#line-1350"> 1350</a> with an owner name equal to the query name and contents taken from the     
<a class="line" id="line-1351" href="#line-1351"> 1351</a> wildcard RRs.                                                              
<a class="line" id="line-1352" href="#line-1352"> 1352</a>                                                                            
<a class="line" id="line-1353" href="#line-1353"> 1353</a> This facility is most often used to create a zone which will be used to    
<a class="line" id="line-1354" href="#line-1354"> 1354</a> forward mail from the Internet to some other mail system.  The general     
<a class="line" id="line-1355" href="#line-1355"> 1355</a> idea is that any name in that zone which is presented to server in a       
<a class="line" id="line-1356" href="#line-1356"> 1356</a> query will be assumed to exist, with certain properties, unless explicit   
<a class="line" id="line-1357" href="#line-1357"> 1357</a> evidence exists to the contrary.  Note that the use of the term zone       
<a class="line" id="line-1358" href="#line-1358"> 1358</a> here, instead of domain, is intentional; such defaults do not propagate    
<a class="line" id="line-1359" href="#line-1359"> 1359</a> across zone boundaries, although a subzone may choose to achieve that      
<a class="line" id="line-1360" href="#line-1360"> 1360</a> appearance by setting up similar defaults.                                 
<a class="line" id="line-1361" href="#line-1361"> 1361</a>                                                                            
<a class="line" id="line-1362" href="#line-1362"> 1362</a> The contents of the wildcard RRs follows the usual rules and formats for   
<a class="line" id="line-1363" href="#line-1363"> 1363</a> RRs.  The wildcards in the zone have an owner name that controls the       
<a class="line" id="line-1364" href="#line-1364"> 1364</a> query names they will match.  The owner name of the wildcard RRs is of     
<a class="line" id="line-1365" href="#line-1365"> 1365</a> the form &quot;*.&lt;anydomain&gt;&quot;, where &lt;anydomain&gt; is any domain name.            
<a class="line" id="line-1366" href="#line-1366"> 1366</a> &lt;anydomain&gt; should not contain other * labels, and should be in the        
<a class="line" id="line-1367" href="#line-1367"> 1367</a> authoritative data of the zone.  The wildcards potentially apply to        
<a class="line" id="line-1368" href="#line-1368"> 1368</a> descendants of &lt;anydomain&gt;, but not to &lt;anydomain&gt; itself.  Another way    
<a class="line" id="line-1369" href="#line-1369"> 1369</a>                                                                            
<a class="line" id="line-1370" href="#line-1370"> 1370</a>                                                                            
<a class="line" id="line-1371" href="#line-1371"> 1371</a>                                                                            
<a class="line" id="line-1372" href="#line-1372"> 1372</a> <span class="grey">Mockapetris                                                    [Page 25]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-26" ></span><a class="line" id="line-1373" href="#line-1373"> 1373</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1374" href="#line-1374"> 1374</a>                                                                            
<a class="line" id="line-1375" href="#line-1375"> 1375</a>                                                                            
<a class="line" id="line-1376" href="#line-1376"> 1376</a> to look at this is that the &quot;*&quot; label always matches at least one whole    
<a class="line" id="line-1377" href="#line-1377"> 1377</a> label and sometimes more, but always whole labels.                         
<a class="line" id="line-1378" href="#line-1378"> 1378</a>                                                                            
<a class="line" id="line-1379" href="#line-1379"> 1379</a> Wildcard RRs do not apply:                                                 
<a class="line" id="line-1380" href="#line-1380"> 1380</a>                                                                            
<a class="line" id="line-1381" href="#line-1381"> 1381</a>    - When the query is in another zone.  That is, delegation cancels       
<a class="line" id="line-1382" href="#line-1382"> 1382</a>      the wildcard defaults.                                                
<a class="line" id="line-1383" href="#line-1383"> 1383</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err technical verified robert edmonds"><div class="title"><span class="reference"><a href="#line-1341">line-1341</a> Robert Edmonds</span><span class="caption"><span id="rfc.erratum.4740">(Technical Erratum #<a target='_blank' title='robert edmonds (Technical)' href='https://www.rfc-editor.org/errata/eid4740'>4740</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
   6. Using local data only, attempt to add other RRs which may be
      useful to the additional section of the query.  Exit.
</pre></div>
<div class='correct'>It should say:<pre>
   6. Using local data only, attempt to add other RRs which may be
      useful to the additional section of the <del>query</del><ins>response</ins>.  Exit.
</pre></div>
<hr/>
<div class='note'>
Changed "query" to "response".
<p/>
<a href='#section-4.3.2'>Section 4.3.2</a> describes the algorithm used by nameservers to answer
queries. I.e., a nameserver receives a query from a client, and then it
performs this algorithm in order to construct a response to send to the
client.
<p/>
Steps 1, 3, and 5 of this algorithm talk about setting fields or bits in
the response, or about adding resource records to the answer section of
the response, but then step 6 says to add resource records to the
additional section of the *query*. This doesn't make any sense, because
the server is constructing a response to a query that it's already
received. "Response" must have been intended instead.
</div>

</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1384" href="#line-1384"> 1384</a>    - When the query name or a name between the wildcard domain and         
<a class="line" id="line-1385" href="#line-1385"> 1385</a>      the query name is know to exist.  For example, if a wildcard          
<a class="line" id="line-1386" href="#line-1386"> 1386</a>      RR has an owner name of &quot;*.X&quot;, and the zone also contains RRs         
<a class="line" id="line-1387" href="#line-1387"> 1387</a>      attached to B.X, the wildcards would apply to queries for name        
<a class="line" id="line-1388" href="#line-1388"> 1388</a>      Z.X (presuming there is no explicit information for Z.X), but         
<a class="line" id="line-1389" href="#line-1389"> 1389</a>      not to B.X, A.B.X, or X.                                              
<a class="line" id="line-1390" href="#line-1390"> 1390</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial heldfordocumentupdate sun congyou"><div class="title"><span class="reference"><a href="#line-1384">line-1384</a> Sun Congyou</span><span class="caption"><span id="rfc.erratum.4230">(Editorial Erratum #<a target='_blank' title='sun congyou (Editorial)' href='https://www.rfc-editor.org/errata/eid4230'>4230</a>) [Held for Document Update]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
   - When the query name or a name between the wildcard domain and
     the query name is know to exist.
</pre></div>
<div class='correct'>It should say:<pre>
   - When the query name or a name between the wildcard domain and
     the query name is know<ins>n</ins> to exist.
</pre></div>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1391" href="#line-1391"> 1391</a> A * label appearing in a query name has no special effect, but can be      
<a class="line" id="line-1392" href="#line-1392"> 1392</a> used to test for wildcards in an authoritative zone; such a query is the   
<a class="line" id="line-1393" href="#line-1393"> 1393</a> only way to get a response containing RRs with an owner name with * in     
<a class="line" id="line-1394" href="#line-1394"> 1394</a> it.  The result of such a query should not be cached.                      
<a class="line" id="line-1395" href="#line-1395"> 1395</a>                                                                            
<a class="line" id="line-1396" href="#line-1396"> 1396</a> Note that the contents of the wildcard RRs are not modified when used to   
<a class="line" id="line-1397" href="#line-1397"> 1397</a> synthesize RRs.                                                            
<a class="line" id="line-1398" href="#line-1398"> 1398</a>                                                                            
<a class="line" id="line-1399" href="#line-1399"> 1399</a> To illustrate the use of wildcard RRs, suppose a large company with a      
<a class="line" id="line-1400" href="#line-1400"> 1400</a> large, non-IP/TCP, network wanted to create a mail gateway.  If the        
<a class="line" id="line-1401" href="#line-1401"> 1401</a> company was called X.COM, and IP/TCP capable gateway machine was called    
<a class="line" id="line-1402" href="#line-1402"> 1402</a> A.X.COM, the following RRs might be entered into the COM zone:             
<a class="line" id="line-1403" href="#line-1403"> 1403</a>                                                                            
<a class="line" id="line-1404" href="#line-1404"> 1404</a>     X.COM           MX      10      A.X.COM                                
<a class="line" id="line-1405" href="#line-1405"> 1405</a>                                                                            
<a class="line" id="line-1406" href="#line-1406"> 1406</a>     *.X.COM         MX      10      A.X.COM                                
<a class="line" id="line-1407" href="#line-1407"> 1407</a>                                                                            
<a class="line" id="line-1408" href="#line-1408"> 1408</a>     A.X.COM         A       1.2.3.4                                        
<a class="line" id="line-1409" href="#line-1409"> 1409</a>     A.X.COM         MX      10      A.X.COM                                
<a class="line" id="line-1410" href="#line-1410"> 1410</a>                                                                            
<a class="line" id="line-1411" href="#line-1411"> 1411</a>     *.A.X.COM       MX      10      A.X.COM                                
<a class="line" id="line-1412" href="#line-1412"> 1412</a>                                                                            
<a class="line" id="line-1413" href="#line-1413"> 1413</a> This would cause any MX query for any domain name ending in X.COM to       
<a class="line" id="line-1414" href="#line-1414"> 1414</a> return an MX RR pointing at A.X.COM.  Two wildcard RRs are required        
<a class="line" id="line-1415" href="#line-1415"> 1415</a> since the effect of the wildcard at *.X.COM is inhibited in the A.X.COM    
<a class="line" id="line-1416" href="#line-1416"> 1416</a> subtree by the explicit data for A.X.COM.  Note also that the explicit     
<a class="line" id="line-1417" href="#line-1417"> 1417</a> MX data at X.COM and A.X.COM is required, and that none of the RRs above   
<a class="line" id="line-1418" href="#line-1418"> 1418</a> would match a query name of XX.COM.                                        
<a class="line" id="line-1419" href="#line-1419"> 1419</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err technical heldfordocumentupdate mukund sivaraman"><div class="title"><span class="reference"><a href="#line-1391">line-1391</a> Mukund Sivaraman</span><span class="caption"><span id="rfc.erratum.5316">(Technical Erratum #<a target='_blank' title='mukund sivaraman (Technical)' href='https://www.rfc-editor.org/errata/eid5316'>5316</a>) [Held for Document Update]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
A * label appearing in a query name has no special effect, but can be
used to test for wildcards in an authoritative zone; such a query is the
only way to get a response containing RRs with an owner name with * in
it.  The result of such a query should not be cached.
</pre></div>
<div class='correct'>It should say:<pre>
A * label appearing in a query name has no special effect, but can be
used to test for wildcards in an authoritative zone; such a query is the
only way to get a response containing RRs with an owner name with * in
it.  The result of such a query should not be <del>cached</del><ins>used to synthesize RRs</ins>.
</pre></div>
<hr/>
<div class='note'>
It is perfectly OK for an RR with a wildcard label '*' to be cached as
long as it's not used to synthesize any RRs on a caching resolver. The
DNS implementations BIND and Unbound both cache such RRsets with
wildcard label in the owner name.
<p/>
WK (OpsAD): Please see thread <a target='_blank' href='https://www.ietf.org/mail-archive/web/dnsop/current/msg22563.html'>https://www.ietf.org/mail-archive/web/dnsop/current/msg22563.html</a> for additional information.
</div>

</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1420" href="#line-1420"> 1420</a> <span class="h4"><a class="selflink" id="section-4.3.4" href="#section-4.3.4">4.3.4</a>. Negative response caching (Optional)</span>                                
<a class="line" id="line-1421" href="#line-1421"> 1421</a>                                                                            
<a class="line" id="line-1422" href="#line-1422"> 1422</a> The DNS provides an optional service which allows name servers to          
<a class="line" id="line-1423" href="#line-1423"> 1423</a> distribute, and resolvers to cache, negative results with TTLs.  For       
<a class="line" id="line-1424" href="#line-1424"> 1424</a>                                                                            
<a class="line" id="line-1425" href="#line-1425"> 1425</a>                                                                            
<a class="line" id="line-1426" href="#line-1426"> 1426</a>                                                                            
<a class="line" id="line-1427" href="#line-1427"> 1427</a> <span class="grey">Mockapetris                                                    [Page 26]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-27" ></span><a class="line" id="line-1428" href="#line-1428"> 1428</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1429" href="#line-1429"> 1429</a>                                                                            
<a class="line" id="line-1430" href="#line-1430"> 1430</a>                                                                            
<a class="line" id="line-1431" href="#line-1431"> 1431</a> example, a name server can distribute a TTL along with a name error        
<a class="line" id="line-1432" href="#line-1432"> 1432</a> indication, and a resolver receiving such information is allowed to        
<a class="line" id="line-1433" href="#line-1433"> 1433</a> assume that the name does not exist during the TTL period without          
<a class="line" id="line-1434" href="#line-1434"> 1434</a> consulting authoritative data.  Similarly, a resolver can make a query     
<a class="line" id="line-1435" href="#line-1435"> 1435</a> with a QTYPE which matches multiple types, and cache the fact that some    
<a class="line" id="line-1436" href="#line-1436"> 1436</a> of the types are not present.                                              
<a class="line" id="line-1437" href="#line-1437"> 1437</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-1420">line-1420</a> Paul Hoffman</span><span class="caption">RFC 2181 updates the use of the SOA record</span><span class="timestamp"></span></div><div class="notes"><p>
Section 7.1 of <a target='_blank' href='https://datatracker.ietf.org/doc/rfc2181/'>RFC2181</a> says:
<br/>
<pre>
RFC1034, in section 3.7, indicates that the authority section of an
authoritative answer may contain the SOA record for the zone from
which the answer was obtained.  When discussing negative caching,
RFC1034 section 4.3.4 refers to this technique but mentions the
additional section of the response.  The former is correct, as is
implied by the example shown in section 6.2.5 of RFC1034.  SOA
records, if added, are to be placed in the authority section.
</pre>
</p>
</div></div><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-1420">line-1420</a> Paul Hoffman</span><span class="caption">RFC 2308 updates the method for negative caching</span><span class="timestamp"></span></div><div class="notes"><p>
<a target='_blank' href='https://datatracker.ietf.org/doc/rfc2308/'>RFC2308</a> is a major restatement and update to how negative caching should
be implemented. Its abstract begins:
<br/>
<pre>
[RFC1034] provided a description of how to cache negative responses.
It however had a fundamental flaw in that it did not allow a name
server to hand out those cached responses to other resolvers, thereby
greatly reducing the effect of the caching.  This document addresses
issues raise in the light of experience and replaces [RFC1034 Section
4.3.4].
</pre>
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1438" href="#line-1438"> 1438</a> This feature can be particularly important in a system which implements    
<a class="line" id="line-1439" href="#line-1439"> 1439</a> naming shorthands that use search lists beacuse a popular shorthand,       
<a class="line" id="line-1440" href="#line-1440"> 1440</a> which happens to require a suffix toward the end of the search list,       
<a class="line" id="line-1441" href="#line-1441"> 1441</a> will generate multiple name errors whenever it is used.                    
<a class="line" id="line-1442" href="#line-1442"> 1442</a>                                                                            
<a class="line" id="line-1443" href="#line-1443"> 1443</a> The method is that a name server may add an SOA RR to the additional       
<a class="line" id="line-1444" href="#line-1444"> 1444</a> section of a response when that response is authoritative.  The SOA must   
<a class="line" id="line-1445" href="#line-1445"> 1445</a> be that of the zone which was the source of the authoritative data in      
<a class="line" id="line-1446" href="#line-1446"> 1446</a> the answer section, or name error if applicable.  The MINIMUM field of     
<a class="line" id="line-1447" href="#line-1447"> 1447</a> the SOA controls the length of time that the negative result may be        
<a class="line" id="line-1448" href="#line-1448"> 1448</a> cached.                                                                    
<a class="line" id="line-1449" href="#line-1449"> 1449</a>                                                                            
<a class="line" id="line-1450" href="#line-1450"> 1450</a> Note that in some circumstances, the answer section may contain multiple   
<a class="line" id="line-1451" href="#line-1451"> 1451</a> owner names.  In this case, the SOA mechanism should only be used for      
<a class="line" id="line-1452" href="#line-1452"> 1452</a> the data which matches QNAME, which is the only authoritative data in      
<a class="line" id="line-1453" href="#line-1453"> 1453</a> this section.                                                              
<a class="line" id="line-1454" href="#line-1454"> 1454</a>                                                                            
<a class="line" id="line-1455" href="#line-1455"> 1455</a> Name servers and resolvers should never attempt to add SOAs to the         
<a class="line" id="line-1456" href="#line-1456"> 1456</a> additional section of a non-authoritative response, or attempt to infer    
<a class="line" id="line-1457" href="#line-1457"> 1457</a> results which are not directly stated in an authoritative response.        
<a class="line" id="line-1458" href="#line-1458"> 1458</a> There are several reasons for this, including: cached information isn&#x27;t    
<a class="line" id="line-1459" href="#line-1459"> 1459</a> usually enough to match up RRs and their zone names, SOA RRs may be        
<a class="line" id="line-1460" href="#line-1460"> 1460</a> cached due to direct SOA queries, and name servers are not required to     
<a class="line" id="line-1461" href="#line-1461"> 1461</a> output the SOAs in the authority section.                                  
<a class="line" id="line-1462" href="#line-1462"> 1462</a>                                                                            
<a class="line" id="line-1463" href="#line-1463"> 1463</a> This feature is optional, although a refined version is expected to        
<a class="line" id="line-1464" href="#line-1464"> 1464</a> become part of the standard protocol in the future.  Name servers are      
<a class="line" id="line-1465" href="#line-1465"> 1465</a> not required to add the SOA RRs in all authoritative responses, nor are    
<a class="line" id="line-1466" href="#line-1466"> 1466</a> resolvers required to cache negative results.  Both are recommended.       
<a class="line" id="line-1467" href="#line-1467"> 1467</a> All resolvers and recursive name servers are required to at least be       
<a class="line" id="line-1468" href="#line-1468"> 1468</a> able to ignore the SOA RR when it is present in a response.                
<a class="line" id="line-1469" href="#line-1469"> 1469</a>                                                                            
<a class="line" id="line-1470" href="#line-1470"> 1470</a> Some experiments have also been proposed which will use this feature.      
<a class="line" id="line-1471" href="#line-1471"> 1471</a> The idea is that if cached data is known to come from a particular zone,   
<a class="line" id="line-1472" href="#line-1472"> 1472</a> and if an authoritative copy of the zone&#x27;s SOA is obtained, and if the     
<a class="line" id="line-1473" href="#line-1473"> 1473</a> zone&#x27;s SERIAL has not changed since the data was cached, then the TTL of   
<a class="line" id="line-1474" href="#line-1474"> 1474</a> the cached data can be reset to the zone MINIMUM value if it is smaller.   
<a class="line" id="line-1475" href="#line-1475"> 1475</a> This usage is mentioned for planning purposes only, and is not             
<a class="line" id="line-1476" href="#line-1476"> 1476</a> recommended as yet.                                                        
<a class="line" id="line-1477" href="#line-1477"> 1477</a>                                                                            
<a class="line" id="line-1478" href="#line-1478"> 1478</a>                                                                            
<a class="line" id="line-1479" href="#line-1479"> 1479</a>                                                                            
<a class="line" id="line-1480" href="#line-1480"> 1480</a>                                                                            
<a class="line" id="line-1481" href="#line-1481"> 1481</a>                                                                            
<a class="line" id="line-1482" href="#line-1482"> 1482</a> <span class="grey">Mockapetris                                                    [Page 27]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-28" ></span><a class="line" id="line-1483" href="#line-1483"> 1483</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1484" href="#line-1484"> 1484</a>                                                                            
<a class="line" id="line-1485" href="#line-1485"> 1485</a>                                                                            
<a class="line" id="line-1486" href="#line-1486"> 1486</a> <span class="h4"><a class="selflink" id="section-4.3.5" href="#section-4.3.5">4.3.5</a>. Zone maintenance and transfers</span>                                      
<a class="line" id="line-1487" href="#line-1487"> 1487</a>                                                                            
<a class="line" id="line-1488" href="#line-1488"> 1488</a> Part of the job of a zone administrator is to maintain the zones at all    
<a class="line" id="line-1489" href="#line-1489"> 1489</a> of the name servers which are authoritative for the zone.  When the        
<a class="line" id="line-1490" href="#line-1490"> 1490</a> inevitable changes are made, they must be distributed to all of the name   
<a class="line" id="line-1491" href="#line-1491"> 1491</a> servers.  While this distribution can be accomplished using FTP or some    
<a class="line" id="line-1492" href="#line-1492"> 1492</a> other ad hoc procedure, the preferred method is the zone transfer part     
<a class="line" id="line-1493" href="#line-1493"> 1493</a> of the DNS protocol.                                                       
<a class="line" id="line-1494" href="#line-1494"> 1494</a>                                                                            
<a class="line" id="line-1495" href="#line-1495"> 1495</a> The general model of automatic zone transfer or refreshing is that one     
<a class="line" id="line-1496" href="#line-1496"> 1496</a> of the name servers is the master or primary for the zone.  Changes are    
<a class="line" id="line-1497" href="#line-1497"> 1497</a> coordinated at the primary, typically by editing a master file for the     
<a class="line" id="line-1498" href="#line-1498"> 1498</a> zone.  After editing, the administrator signals the master server to       
<a class="line" id="line-1499" href="#line-1499"> 1499</a> load the new zone.  The other non-master or secondary servers for the      
<a class="line" id="line-1500" href="#line-1500"> 1500</a> zone periodically check for changes (at a selectable interval) and         
<a class="line" id="line-1501" href="#line-1501"> 1501</a> obtain new zone copies when changes have been made.                        
<a class="line" id="line-1502" href="#line-1502"> 1502</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial verified john kristoff"><div class="title"><span class="reference"><a href="#line-1438">line-1438</a> John Kristoff</span><span class="caption"><span id="rfc.erratum.1074.2">(Editorial Erratum #<a target='_blank' title='john kristoff (Editorial)' href='https://www.rfc-editor.org/errata/eid1074'>1074</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'>Section 4.3.4 says:<pre>
  This feature can be particularly important in a system which implements
  naming short shorts that use search lists beacuse a popular shorthand,
</pre></div>
<div class='correct'><pre>
  This feature can be particularly important in a system which implements
  naming short shorts that use search lists <del>beacuse</del><ins>because</ins> a popular shorthand,
</pre></div>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1503" href="#line-1503"> 1503</a> To detect changes, secondaries just check the SERIAL field of the SOA      
<a class="line" id="line-1504" href="#line-1504"> 1504</a> for the zone.  In addition to whatever other changes are made, the         
<a class="line" id="line-1505" href="#line-1505"> 1505</a> SERIAL field in the SOA of the zone is always advanced whenever any        
<a class="line" id="line-1506" href="#line-1506"> 1506</a> change is made to the zone.  The advancing can be a simple increment, or   
<a class="line" id="line-1507" href="#line-1507"> 1507</a> could be based on the write date and time of the master file, etc.  The    
<a class="line" id="line-1508" href="#line-1508"> 1508</a> purpose is to make it possible to determine which of two copies of a       
<a class="line" id="line-1509" href="#line-1509"> 1509</a> zone is more recent by comparing serial numbers.  Serial number advances   
<a class="line" id="line-1510" href="#line-1510"> 1510</a> and comparisons use sequence space arithmetic, so there is a theoretic     
<a class="line" id="line-1511" href="#line-1511"> 1511</a> limit on how fast a zone can be updated, basically that old copies must    
<a class="line" id="line-1512" href="#line-1512"> 1512</a> die out before the serial number covers half of its 32 bit range.  In      
<a class="line" id="line-1513" href="#line-1513"> 1513</a> practice, the only concern is that the compare operation deals properly    
<a class="line" id="line-1514" href="#line-1514"> 1514</a> with comparisons around the boundary between the most positive and most    
<a class="line" id="line-1515" href="#line-1515"> 1515</a> negative 32 bit numbers.                                                   
<a class="line" id="line-1516" href="#line-1516"> 1516</a>                                                                            
<a class="line" id="line-1517" href="#line-1517"> 1517</a> The periodic polling of the secondary servers is controlled by             
<a class="line" id="line-1518" href="#line-1518"> 1518</a> parameters in the SOA RR for the zone, which set the minimum acceptable    
<a class="line" id="line-1519" href="#line-1519"> 1519</a> polling intervals.  The parameters are called REFRESH, RETRY, and          
<a class="line" id="line-1520" href="#line-1520"> 1520</a> EXPIRE.  Whenever a new zone is loaded in a secondary, the secondary       
<a class="line" id="line-1521" href="#line-1521"> 1521</a> waits REFRESH seconds before checking with the primary for a new serial.   
<a class="line" id="line-1522" href="#line-1522"> 1522</a> If this check cannot be completed, new checks are started every RETRY      
<a class="line" id="line-1523" href="#line-1523"> 1523</a> seconds.  The check is a simple query to the primary for the SOA RR of     
<a class="line" id="line-1524" href="#line-1524"> 1524</a> the zone.  If the serial field in the secondary&#x27;s zone copy is equal to    
<a class="line" id="line-1525" href="#line-1525"> 1525</a> the serial returned by the primary, then no changes have occurred, and     
<a class="line" id="line-1526" href="#line-1526"> 1526</a> the REFRESH interval wait is restarted.  If the secondary finds it         
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-1503">line-1503</a> Paul Hoffman</span><span class="caption">RFC 1982 has a better definition of serial number arithmetic</span><span class="timestamp"></span></div><div class="notes"><p><a target='_blank' href='https://datatracker.ietf.org/doc/rfc1982/'>RFC1982</a> clarifies how serial number arithmetic should be performed.
The abstract says "The DNS has long relied upon serial number arithmetic,
a concept which has never really been defined, certainly not in an
IETF document, though which has been widely understood.  This memo
supplies the missing definition."
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1527" href="#line-1527"> 1527</a> impossible to perform a serial check for the EXPIRE interval, it must      
<a class="line" id="line-1528" href="#line-1528"> 1528</a> assume that its copy of the zone is obsolete an discard it.                
<a class="line" id="line-1529" href="#line-1529"> 1529</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial verified shane kerr"><div class="title"><span class="reference"><a href="#line-1527">line-1527</a> Shane Kerr</span><span class="caption"><span id="rfc.erratum.4943">(Editorial Erratum #<a target='_blank' title='shane kerr (Editorial)' href='https://www.rfc-editor.org/errata/eid4943'>4943</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
it must assume that its copy of the zone is obsolete an discard it.
</pre></div>
<div class='correct'>It should say:<pre>
it must assume that its copy of the zone is obsolete an<ins>d</ins> discard it.
</pre></div>
<hr/>
<div class='note'>
Fix typo; "an" should be "and".
</div>

</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1530" href="#line-1530"> 1530</a> When the poll shows that the zone has changed, then the secondary server   
<a class="line" id="line-1531" href="#line-1531"> 1531</a> must request a zone transfer via an AXFR request for the zone.  The AXFR   
<a class="line" id="line-1532" href="#line-1532"> 1532</a> may cause an error, such as refused, but normally is answered by a         
<a class="line" id="line-1533" href="#line-1533"> 1533</a> sequence of response messages.  The first and last messages must contain   
<a class="line" id="line-1534" href="#line-1534"> 1534</a>                                                                            
<a class="line" id="line-1535" href="#line-1535"> 1535</a>                                                                            
<a class="line" id="line-1536" href="#line-1536"> 1536</a>                                                                            
<a class="line" id="line-1537" href="#line-1537"> 1537</a> <span class="grey">Mockapetris                                                    [Page 28]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-29" ></span><a class="line" id="line-1538" href="#line-1538"> 1538</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1539" href="#line-1539"> 1539</a>                                                                            
<a class="line" id="line-1540" href="#line-1540"> 1540</a>                                                                            
<a class="line" id="line-1541" href="#line-1541"> 1541</a> the data for the top authoritative node of the zone.  Intermediate         
<a class="line" id="line-1542" href="#line-1542"> 1542</a> messages carry all of the other RRs from the zone, including both          
<a class="line" id="line-1543" href="#line-1543"> 1543</a> authoritative and non-authoritative RRs.  The stream of messages allows    
<a class="line" id="line-1544" href="#line-1544"> 1544</a> the secondary to construct a copy of the zone.  Because accuracy is        
<a class="line" id="line-1545" href="#line-1545"> 1545</a> essential, TCP or some other reliable protocol must be used for AXFR       
<a class="line" id="line-1546" href="#line-1546"> 1546</a> requests.                                                                  
<a class="line" id="line-1547" href="#line-1547"> 1547</a>                                                                            
<a class="line" id="line-1548" href="#line-1548"> 1548</a> Each secondary server is required to perform the following operations      
<a class="line" id="line-1549" href="#line-1549"> 1549</a> against the master, but may also optionally perform these operations       
<a class="line" id="line-1550" href="#line-1550"> 1550</a> against other secondary servers.  This strategy can improve the transfer   
<a class="line" id="line-1551" href="#line-1551"> 1551</a> process when the primary is unavailable due to host downtime or network    
<a class="line" id="line-1552" href="#line-1552"> 1552</a> problems, or when a secondary server has better network access to an       
<a class="line" id="line-1553" href="#line-1553"> 1553</a> &quot;intermediate&quot; secondary than to the primary.                              
<a class="line" id="line-1554" href="#line-1554"> 1554</a>                                                                            
<a class="line" id="line-1555" href="#line-1555"> 1555</a> <span class="h2"><a class="selflink" id="section-5" href="#section-5">5</a>. RESOLVERS</span>                                                               
<a class="line" id="line-1556" href="#line-1556"> 1556</a>                                                                            
<a class="line" id="line-1557" href="#line-1557"> 1557</a> <span class="h3"><a class="selflink" id="section-5.1" href="#section-5.1">5.1</a>. Introduction</span>                                                          
<a class="line" id="line-1558" href="#line-1558"> 1558</a>                                                                            
<a class="line" id="line-1559" href="#line-1559"> 1559</a> Resolvers are programs that interface user programs to domain name         
<a class="line" id="line-1560" href="#line-1560"> 1560</a> servers.  In the simplest case, a resolver receives a request from a       
<a class="line" id="line-1561" href="#line-1561"> 1561</a> user program (e.g., mail programs, TELNET, FTP) in the form of a           
<a class="line" id="line-1562" href="#line-1562"> 1562</a> subroutine call, system call etc., and returns the desired information     
<a class="line" id="line-1563" href="#line-1563"> 1563</a> in a form compatible with the local host&#x27;s data formats.                   
<a class="line" id="line-1564" href="#line-1564"> 1564</a>                                                                            
<a class="line" id="line-1565" href="#line-1565"> 1565</a> The resolver is located on the same machine as the program that requests   
<a class="line" id="line-1566" href="#line-1566"> 1566</a> the resolver&#x27;s services, but it may need to consult name servers on        
<a class="line" id="line-1567" href="#line-1567"> 1567</a> other hosts.  Because a resolver may need to consult several name          
<a class="line" id="line-1568" href="#line-1568"> 1568</a> servers, or may have the requested information in a local cache, the       
<a class="line" id="line-1569" href="#line-1569"> 1569</a> amount of time that a resolver will take to complete can vary quite a      
<a class="line" id="line-1570" href="#line-1570"> 1570</a> bit, from milliseconds to several seconds.                                 
<a class="line" id="line-1571" href="#line-1571"> 1571</a>                                                                            
<a class="line" id="line-1572" href="#line-1572"> 1572</a> A very important goal of the resolver is to eliminate network delay and    
<a class="line" id="line-1573" href="#line-1573"> 1573</a> name server load from most requests by answering them from its cache of    
<a class="line" id="line-1574" href="#line-1574"> 1574</a> prior results.  It follows that caches which are shared by multiple        
<a class="line" id="line-1575" href="#line-1575"> 1575</a> processes, users, machines, etc., are more efficient than non-shared       
<a class="line" id="line-1576" href="#line-1576"> 1576</a> caches.                                                                    
<a class="line" id="line-1577" href="#line-1577"> 1577</a>                                                                            
<a class="line" id="line-1578" href="#line-1578"> 1578</a> <span class="h3"><a class="selflink" id="section-5.2" href="#section-5.2">5.2</a>. Client-resolver interface</span>                                             
<a class="line" id="line-1579" href="#line-1579"> 1579</a>                                                                            
<a class="line" id="line-1580" href="#line-1580"> 1580</a> <span class="h4"><a class="selflink" id="section-5.2.1" href="#section-5.2.1">5.2.1</a>. Typical functions</span>                                                   
<a class="line" id="line-1581" href="#line-1581"> 1581</a>                                                                            
<a class="line" id="line-1582" href="#line-1582"> 1582</a> The client interface to the resolver is influenced by the local host&#x27;s     
<a class="line" id="line-1583" href="#line-1583"> 1583</a> conventions, but the typical resolver-client interface has three           
<a class="line" id="line-1584" href="#line-1584"> 1584</a> functions:                                                                 
<a class="line" id="line-1585" href="#line-1585"> 1585</a>                                                                            
<a class="line" id="line-1586" href="#line-1586"> 1586</a>    1. Host name to host address translation.                               
<a class="line" id="line-1587" href="#line-1587"> 1587</a>                                                                            
<a class="line" id="line-1588" href="#line-1588"> 1588</a>       This function is often defined to mimic a previous HOSTS.TXT         
<a class="line" id="line-1589" href="#line-1589"> 1589</a>                                                                            
<a class="line" id="line-1590" href="#line-1590"> 1590</a>                                                                            
<a class="line" id="line-1591" href="#line-1591"> 1591</a>                                                                            
<a class="line" id="line-1592" href="#line-1592"> 1592</a> <span class="grey">Mockapetris                                                    [Page 29]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-30" ></span><a class="line" id="line-1593" href="#line-1593"> 1593</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1594" href="#line-1594"> 1594</a>                                                                            
<a class="line" id="line-1595" href="#line-1595"> 1595</a>                                                                            
<a class="line" id="line-1596" href="#line-1596"> 1596</a>       based function.  Given a character string, the caller wants          
<a class="line" id="line-1597" href="#line-1597"> 1597</a>       one or more 32 bit IP addresses.  Under the DNS, it                  
<a class="line" id="line-1598" href="#line-1598"> 1598</a>       translates into a request for type A RRs.  Since the DNS does        
<a class="line" id="line-1599" href="#line-1599"> 1599</a>       not preserve the order of RRs, this function may choose to           
<a class="line" id="line-1600" href="#line-1600"> 1600</a>       sort the returned addresses or select the &quot;best&quot; address if          
<a class="line" id="line-1601" href="#line-1601"> 1601</a>       the service returns only one choice to the client.  Note that        
<a class="line" id="line-1602" href="#line-1602"> 1602</a>       a multiple address return is recommended, but a single               
<a class="line" id="line-1603" href="#line-1603"> 1603</a>       address may be the only way to emulate prior HOSTS.TXT               
<a class="line" id="line-1604" href="#line-1604"> 1604</a>       services.                                                            
<a class="line" id="line-1605" href="#line-1605"> 1605</a>                                                                            
<a class="line" id="line-1606" href="#line-1606"> 1606</a>    2. Host address to host name translation                                
<a class="line" id="line-1607" href="#line-1607"> 1607</a>                                                                            
<a class="line" id="line-1608" href="#line-1608"> 1608</a>       This function will often follow the form of previous                 
<a class="line" id="line-1609" href="#line-1609"> 1609</a>       functions.  Given a 32 bit IP address, the caller wants a            
<a class="line" id="line-1610" href="#line-1610"> 1610</a>       character string.  The octets of the IP address are reversed,        
<a class="line" id="line-1611" href="#line-1611"> 1611</a>       used as name components, and suffixed with &quot;IN-ADDR.ARPA&quot;.  A        
<a class="line" id="line-1612" href="#line-1612"> 1612</a>       type PTR query is used to get the RR with the primary name of        
<a class="line" id="line-1613" href="#line-1613"> 1613</a>       the host.  For example, a request for the host name                  
<a class="line" id="line-1614" href="#line-1614"> 1614</a>       corresponding to IP address 1.2.3.4 looks for PTR RRs for            
<a class="line" id="line-1615" href="#line-1615"> 1615</a>       domain name &quot;4.3.2.1.IN-ADDR.ARPA&quot;.                                  
<a class="line" id="line-1616" href="#line-1616"> 1616</a>                                                                            
<a class="line" id="line-1617" href="#line-1617"> 1617</a>    3. General lookup function                                              
<a class="line" id="line-1618" href="#line-1618"> 1618</a>                                                                            
<a class="line" id="line-1619" href="#line-1619"> 1619</a>       This function retrieves arbitrary information from the DNS,          
<a class="line" id="line-1620" href="#line-1620"> 1620</a>       and has no counterpart in previous systems.  The caller              
<a class="line" id="line-1621" href="#line-1621"> 1621</a>       supplies a QNAME, QTYPE, and QCLASS, and wants all of the            
<a class="line" id="line-1622" href="#line-1622"> 1622</a>       matching RRs.  This function will often use the DNS format           
<a class="line" id="line-1623" href="#line-1623"> 1623</a>       for all RR data instead of the local host&#x27;s, and returns all         
<a class="line" id="line-1624" href="#line-1624"> 1624</a>       RR content (e.g., TTL) instead of a processed form with local        
<a class="line" id="line-1625" href="#line-1625"> 1625</a>       quoting conventions.                                                 
<a class="line" id="line-1626" href="#line-1626"> 1626</a>                                                                            
<a class="line" id="line-1627" href="#line-1627"> 1627</a> When the resolver performs the indicated function, it usually has one of   
<a class="line" id="line-1628" href="#line-1628"> 1628</a> the following results to pass back to the client:                          
<a class="line" id="line-1629" href="#line-1629"> 1629</a>                                                                            
<a class="line" id="line-1630" href="#line-1630"> 1630</a>    - One or more RRs giving the requested data.                            
<a class="line" id="line-1631" href="#line-1631"> 1631</a>                                                                            
<a class="line" id="line-1632" href="#line-1632"> 1632</a>      In this case the resolver returns the answer in the                   
<a class="line" id="line-1633" href="#line-1633"> 1633</a>      appropriate format.                                                   
<a class="line" id="line-1634" href="#line-1634"> 1634</a>                                                                            
<a class="line" id="line-1635" href="#line-1635"> 1635</a>    - A name error (NE).                                                    
<a class="line" id="line-1636" href="#line-1636"> 1636</a>                                                                            
<a class="line" id="line-1637" href="#line-1637"> 1637</a>      This happens when the referenced name does not exist.  For            
<a class="line" id="line-1638" href="#line-1638"> 1638</a>      example, a user may have mistyped a host name.                        
<a class="line" id="line-1639" href="#line-1639"> 1639</a>                                                                            
<a class="line" id="line-1640" href="#line-1640"> 1640</a>    - A data not found error.                                               
<a class="line" id="line-1641" href="#line-1641"> 1641</a>                                                                            
<a class="line" id="line-1642" href="#line-1642"> 1642</a>      This happens when the referenced name exists, but data of the         
<a class="line" id="line-1643" href="#line-1643"> 1643</a>      appropriate type does not.  For example, a host address               
<a class="line" id="line-1644" href="#line-1644"> 1644</a>                                                                            
<a class="line" id="line-1645" href="#line-1645"> 1645</a>                                                                            
<a class="line" id="line-1646" href="#line-1646"> 1646</a>                                                                            
<a class="line" id="line-1647" href="#line-1647"> 1647</a> <span class="grey">Mockapetris                                                    [Page 30]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-31" ></span><a class="line" id="line-1648" href="#line-1648"> 1648</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1649" href="#line-1649"> 1649</a>                                                                            
<a class="line" id="line-1650" href="#line-1650"> 1650</a>                                                                            
<a class="line" id="line-1651" href="#line-1651"> 1651</a>      function applied to a mailbox name would return this error            
<a class="line" id="line-1652" href="#line-1652"> 1652</a>      since the name exists, but no address RR is present.                  
<a class="line" id="line-1653" href="#line-1653"> 1653</a>                                                                            
<a class="line" id="line-1654" href="#line-1654"> 1654</a> It is important to note that the functions for translating between host    
<a class="line" id="line-1655" href="#line-1655"> 1655</a> names and addresses may combine the &quot;name error&quot; and &quot;data not found&quot;      
<a class="line" id="line-1656" href="#line-1656"> 1656</a> error conditions into a single type of error return, but the general       
<a class="line" id="line-1657" href="#line-1657"> 1657</a> function should not.  One reason for this is that applications may ask     
<a class="line" id="line-1658" href="#line-1658"> 1658</a> first for one type of information about a name followed by a second        
<a class="line" id="line-1659" href="#line-1659"> 1659</a> request to the same name for some other type of information; if the two    
<a class="line" id="line-1660" href="#line-1660"> 1660</a> errors are combined, then useless queries may slow the application.        
<a class="line" id="line-1661" href="#line-1661"> 1661</a>                                                                            
<a class="line" id="line-1662" href="#line-1662"> 1662</a> <span class="h4"><a class="selflink" id="section-5.2.2" href="#section-5.2.2">5.2.2</a>. Aliases</span>                                                             
<a class="line" id="line-1663" href="#line-1663"> 1663</a>                                                                            
<a class="line" id="line-1664" href="#line-1664"> 1664</a> While attempting to resolve a particular request, the resolver may find    
<a class="line" id="line-1665" href="#line-1665"> 1665</a> that the name in question is an alias.  For example, the resolver might    
<a class="line" id="line-1666" href="#line-1666"> 1666</a> find that the name given for host name to address translation is an        
<a class="line" id="line-1667" href="#line-1667"> 1667</a> alias when it finds the CNAME RR.  If possible, the alias condition        
<a class="line" id="line-1668" href="#line-1668"> 1668</a> should be signalled back from the resolver to the client.                  
<a class="line" id="line-1669" href="#line-1669"> 1669</a>                                                                            
<a class="line" id="line-1670" href="#line-1670"> 1670</a> In most cases a resolver simply restarts the query at the new name when    
<a class="line" id="line-1671" href="#line-1671"> 1671</a> it encounters a CNAME.  However, when performing the general function,     
<a class="line" id="line-1672" href="#line-1672"> 1672</a> the resolver should not pursue aliases when the CNAME RR matches the       
<a class="line" id="line-1673" href="#line-1673"> 1673</a> query type.  This allows queries which ask whether an alias is present.    
<a class="line" id="line-1674" href="#line-1674"> 1674</a> For example, if the query type is CNAME, the user is interested in the     
<a class="line" id="line-1675" href="#line-1675"> 1675</a> CNAME RR itself, and not the RRs at the name it points to.                 
<a class="line" id="line-1676" href="#line-1676"> 1676</a>                                                                            
<a class="line" id="line-1677" href="#line-1677"> 1677</a> Several special conditions can occur with aliases.  Multiple levels of     
<a class="line" id="line-1678" href="#line-1678"> 1678</a> aliases should be avoided due to their lack of efficiency, but should      
<a class="line" id="line-1679" href="#line-1679"> 1679</a> not be signalled as an error.  Alias loops and aliases which point to      
<a class="line" id="line-1680" href="#line-1680"> 1680</a> non-existent names should be caught and an error condition passed back     
<a class="line" id="line-1681" href="#line-1681"> 1681</a> to the client.                                                             
<a class="line" id="line-1682" href="#line-1682"> 1682</a>                                                                            
<a class="line" id="line-1683" href="#line-1683"> 1683</a> <span class="h4"><a class="selflink" id="section-5.2.3" href="#section-5.2.3">5.2.3</a>. Temporary failures</span>                                                  
<a class="line" id="line-1684" href="#line-1684"> 1684</a>                                                                            
<a class="line" id="line-1685" href="#line-1685"> 1685</a> In a less than perfect world, all resolvers will occasionally be unable    
<a class="line" id="line-1686" href="#line-1686"> 1686</a> to resolve a particular request.  This condition can be caused by a        
<a class="line" id="line-1687" href="#line-1687"> 1687</a> resolver which becomes separated from the rest of the network due to a     
<a class="line" id="line-1688" href="#line-1688"> 1688</a> link failure or gateway problem, or less often by coincident failure or    
<a class="line" id="line-1689" href="#line-1689"> 1689</a> unavailability of all servers for a particular domain.                     
<a class="line" id="line-1690" href="#line-1690"> 1690</a>                                                                            
<a class="line" id="line-1691" href="#line-1691"> 1691</a> It is essential that this sort of condition should not be signalled as a   
<a class="line" id="line-1692" href="#line-1692"> 1692</a> name or data not present error to applications.  This sort of behavior     
<a class="line" id="line-1693" href="#line-1693"> 1693</a> is annoying to humans, and can wreak havoc when mail systems use the       
<a class="line" id="line-1694" href="#line-1694"> 1694</a> DNS.                                                                       
<a class="line" id="line-1695" href="#line-1695"> 1695</a>                                                                            
<a class="line" id="line-1696" href="#line-1696"> 1696</a> While in some cases it is possible to deal with such a temporary problem   
<a class="line" id="line-1697" href="#line-1697"> 1697</a> by blocking the request indefinitely, this is usually not a good choice,   
<a class="line" id="line-1698" href="#line-1698"> 1698</a> particularly when the client is a server process that could move on to     
<a class="line" id="line-1699" href="#line-1699"> 1699</a>                                                                            
<a class="line" id="line-1700" href="#line-1700"> 1700</a>                                                                            
<a class="line" id="line-1701" href="#line-1701"> 1701</a>                                                                            
<a class="line" id="line-1702" href="#line-1702"> 1702</a> <span class="grey">Mockapetris                                                    [Page 31]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-32" ></span><a class="line" id="line-1703" href="#line-1703"> 1703</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1704" href="#line-1704"> 1704</a>                                                                            
<a class="line" id="line-1705" href="#line-1705"> 1705</a>                                                                            
<a class="line" id="line-1706" href="#line-1706"> 1706</a> other tasks.  The recommended solution is to always have temporary         
<a class="line" id="line-1707" href="#line-1707"> 1707</a> failure as one of the possible results of a resolver function, even        
<a class="line" id="line-1708" href="#line-1708"> 1708</a> though this may make emulation of existing HOSTS.TXT functions more        
<a class="line" id="line-1709" href="#line-1709"> 1709</a> difficult.                                                                 
<a class="line" id="line-1710" href="#line-1710"> 1710</a>                                                                            
<a class="line" id="line-1711" href="#line-1711"> 1711</a> <span class="h3"><a class="selflink" id="section-5.3" href="#section-5.3">5.3</a>. Resolver internals</span>                                                    
<a class="line" id="line-1712" href="#line-1712"> 1712</a>                                                                            
<a class="line" id="line-1713" href="#line-1713"> 1713</a> Every resolver implementation uses slightly different algorithms, and      
<a class="line" id="line-1714" href="#line-1714"> 1714</a> typically spends much more logic dealing with errors of various sorts      
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="entry paul hoffman"><div class="title"><span class="reference"><a href="#line-1530">line-1530</a> Paul Hoffman</span><span class="caption">RFC 5936 re-specifies how AXFR works</span><span class="timestamp"></span></div><div class="notes"><p>
<a target='_blank' href='https://datatracker.ietf.org/doc/rfc5936/'>RFC5936</a> is a complete re-definition of AXFR. Its abstract says:
"The definition of AXFR has proven insufficient in detail, thereby
forcing implementations intended to be compliant to make assumptions,
impeding interoperability.  Yet today we have a satisfactory set of
implementations that do interoperate.  This document is a new
definition of AXFR -- new in the sense that it records an accurate
definition of an interoperable AXFR mechanism."
</p>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-1715" href="#line-1715"> 1715</a> than typical occurances.  This section outlines a recommended basic        
<a class="line" id="line-1716" href="#line-1716"> 1716</a> strategy for resolver operation, but leaves details to [<a href="./rfc1035.html">RFC-1035</a>].         
<a class="line" id="line-1717" href="#line-1717"> 1717</a>                                                                            
<a class="line" id="line-1718" href="#line-1718"> 1718</a> <span class="h4"><a class="selflink" id="section-5.3.1" href="#section-5.3.1">5.3.1</a>. Stub resolvers</span>                                                      
<a class="line" id="line-1719" href="#line-1719"> 1719</a>                                                                            
<a class="line" id="line-1720" href="#line-1720"> 1720</a> One option for implementing a resolver is to move the resolution           
<a class="line" id="line-1721" href="#line-1721"> 1721</a> function out of the local machine and into a name server which supports    
<a class="line" id="line-1722" href="#line-1722"> 1722</a> recursive queries.  This can provide an easy method of providing domain    
<a class="line" id="line-1723" href="#line-1723"> 1723</a> service in a PC which lacks the resources to perform the resolver          
<a class="line" id="line-1724" href="#line-1724"> 1724</a> function, or can centralize the cache for a whole local network or         
<a class="line" id="line-1725" href="#line-1725"> 1725</a> organization.                                                              
<a class="line" id="line-1726" href="#line-1726"> 1726</a>                                                                            
<a class="line" id="line-1727" href="#line-1727"> 1727</a> All that the remaining stub needs is a list of name server addresses       
<a class="line" id="line-1728" href="#line-1728"> 1728</a> that will perform the recursive requests.  This type of resolver           
<a class="line" id="line-1729" href="#line-1729"> 1729</a> presumably needs the information in a configuration file, since it         
<a class="line" id="line-1730" href="#line-1730"> 1730</a> probably lacks the sophistication to locate it in the domain database.     
<a class="line" id="line-1731" href="#line-1731"> 1731</a> The user also needs to verify that the listed servers will perform the     
<a class="line" id="line-1732" href="#line-1732"> 1732</a> recursive service; a name server is free to refuse to perform recursive    
<a class="line" id="line-1733" href="#line-1733"> 1733</a> services for any or all clients.  The user should consult the local        
<a class="line" id="line-1734" href="#line-1734"> 1734</a> system administrator to find name servers willing to perform the           
<a class="line" id="line-1735" href="#line-1735"> 1735</a> service.                                                                   
<a class="line" id="line-1736" href="#line-1736"> 1736</a>                                                                            
<a class="line" id="line-1737" href="#line-1737"> 1737</a> This type of service suffers from some drawbacks.  Since the recursive     
<a class="line" id="line-1738" href="#line-1738"> 1738</a> requests may take an arbitrary amount of time to perform, the stub may     
<a class="line" id="line-1739" href="#line-1739"> 1739</a> have difficulty optimizing retransmission intervals to deal with both      
<a class="line" id="line-1740" href="#line-1740"> 1740</a> lost UDP packets and dead servers; the name server can be easily           
<a class="line" id="line-1741" href="#line-1741"> 1741</a> overloaded by too zealous a stub if it interprets retransmissions as new   
<a class="line" id="line-1742" href="#line-1742"> 1742</a> requests.  Use of TCP may be an answer, but TCP may well place burdens     
<a class="line" id="line-1743" href="#line-1743"> 1743</a> on the host&#x27;s capabilities which are similar to those of a real            
<a class="line" id="line-1744" href="#line-1744"> 1744</a> resolver.                                                                  
<a class="line" id="line-1745" href="#line-1745"> 1745</a>                                                                            
<a class="line" id="line-1746" href="#line-1746"> 1746</a> <span class="h4"><a class="selflink" id="section-5.3.2" href="#section-5.3.2">5.3.2</a>. Resources</span>                                                           
<a class="line" id="line-1747" href="#line-1747"> 1747</a>                                                                            
<a class="line" id="line-1748" href="#line-1748"> 1748</a> In addition to its own resources, the resolver may also have shared        
<a class="line" id="line-1749" href="#line-1749"> 1749</a> access to zones maintained by a local name server.  This gives the         
<a class="line" id="line-1750" href="#line-1750"> 1750</a> resolver the advantage of more rapid access, but the resolver must be      
<a class="line" id="line-1751" href="#line-1751"> 1751</a> careful to never let cached information override zone data.  In this       
<a class="line" id="line-1752" href="#line-1752"> 1752</a> discussion the term &quot;local information&quot; is meant to mean the union of      
<a class="line" id="line-1753" href="#line-1753"> 1753</a> the cache and such shared zones, with the understanding that               
<a class="line" id="line-1754" href="#line-1754"> 1754</a>                                                                            
<a class="line" id="line-1755" href="#line-1755"> 1755</a>                                                                            
<a class="line" id="line-1756" href="#line-1756"> 1756</a>                                                                            
<a class="line" id="line-1757" href="#line-1757"> 1757</a> <span class="grey">Mockapetris                                                    [Page 32]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-33" ></span><a class="line" id="line-1758" href="#line-1758"> 1758</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1759" href="#line-1759"> 1759</a>                                                                            
<a class="line" id="line-1760" href="#line-1760"> 1760</a>                                                                            
<a class="line" id="line-1761" href="#line-1761"> 1761</a> authoritative data is always used in preference to cached data when both   
<a class="line" id="line-1762" href="#line-1762"> 1762</a> are present.                                                               
<a class="line" id="line-1763" href="#line-1763"> 1763</a>                                                                            
<a class="line" id="line-1764" href="#line-1764"> 1764</a> The following resolver algorithm assumes that all functions have been      
<a class="line" id="line-1765" href="#line-1765"> 1765</a> converted to a general lookup function, and uses the following data        
<a class="line" id="line-1766" href="#line-1766"> 1766</a> structures to represent the state of a request in progress in the          
<a class="line" id="line-1767" href="#line-1767"> 1767</a> resolver:                                                                  
<a class="line" id="line-1768" href="#line-1768"> 1768</a>                                                                            
<a class="line" id="line-1769" href="#line-1769"> 1769</a> SNAME           the domain name we are searching for.                      
<a class="line" id="line-1770" href="#line-1770"> 1770</a>                                                                            
<a class="line" id="line-1771" href="#line-1771"> 1771</a> STYPE           the QTYPE of the search request.                           
<a class="line" id="line-1772" href="#line-1772"> 1772</a>                                                                            
<a class="line" id="line-1773" href="#line-1773"> 1773</a> SCLASS          the QCLASS of the search request.                          
<a class="line" id="line-1774" href="#line-1774"> 1774</a>                                                                            
<a class="line" id="line-1775" href="#line-1775"> 1775</a> SLIST           a structure which describes the name servers and the       
<a class="line" id="line-1776" href="#line-1776"> 1776</a>                 zone which the resolver is currently trying to query.      
<a class="line" id="line-1777" href="#line-1777"> 1777</a>                 This structure keeps track of the resolver&#x27;s current       
<a class="line" id="line-1778" href="#line-1778"> 1778</a>                 best guess about which name servers hold the desired       
<a class="line" id="line-1779" href="#line-1779"> 1779</a>                 information; it is updated when arriving information       
<a class="line" id="line-1780" href="#line-1780"> 1780</a>                 changes the guess.  This structure includes the            
<a class="line" id="line-1781" href="#line-1781"> 1781</a>                 equivalent of a zone name, the known name servers for      
<a class="line" id="line-1782" href="#line-1782"> 1782</a>                 the zone, the known addresses for the name servers, and    
<a class="line" id="line-1783" href="#line-1783"> 1783</a>                 history information which can be used to suggest which     
<a class="line" id="line-1784" href="#line-1784"> 1784</a>                 server is likely to be the best one to try next.  The      
<a class="line" id="line-1785" href="#line-1785"> 1785</a>                 zone name equivalent is a match count of the number of     
<a class="line" id="line-1786" href="#line-1786"> 1786</a>                 labels from the root down which SNAME has in common with   
<a class="line" id="line-1787" href="#line-1787"> 1787</a>                 the zone being queried; this is used as a measure of how   
<a class="line" id="line-1788" href="#line-1788"> 1788</a>                 &quot;close&quot; the resolver is to SNAME.                          
<a class="line" id="line-1789" href="#line-1789"> 1789</a>                                                                            
<a class="line" id="line-1790" href="#line-1790"> 1790</a> SBELT           a &quot;safety belt&quot; structure of the same form as SLIST,       
<a class="line" id="line-1791" href="#line-1791"> 1791</a>                 which is initialized from a configuration file, and        
<a class="line" id="line-1792" href="#line-1792"> 1792</a>                 lists servers which should be used when the resolver       
<a class="line" id="line-1793" href="#line-1793"> 1793</a>                 doesn&#x27;t have any local information to guide name server    
<a class="line" id="line-1794" href="#line-1794"> 1794</a>                 selection.  The match count will be -1 to indicate that    
<a class="line" id="line-1795" href="#line-1795"> 1795</a>                 no labels are known to match.                              
<a class="line" id="line-1796" href="#line-1796"> 1796</a>                                                                            
<a class="line" id="line-1797" href="#line-1797"> 1797</a> CACHE           A structure which stores the results from previous         
<a class="line" id="line-1798" href="#line-1798"> 1798</a>                 responses.  Since resolvers are responsible for            
<a class="line" id="line-1799" href="#line-1799"> 1799</a>                 discarding old RRs whose TTL has expired, most             
<a class="line" id="line-1800" href="#line-1800"> 1800</a>                 implementations convert the interval specified in          
<a class="line" id="line-1801" href="#line-1801"> 1801</a>                 arriving RRs to some sort of absolute time when the RR     
<a class="line" id="line-1802" href="#line-1802"> 1802</a>                 is stored in the cache.  Instead of counting the TTLs      
<a class="line" id="line-1803" href="#line-1803"> 1803</a>                 down individually, the resolver just ignores or discards   
<a class="line" id="line-1804" href="#line-1804"> 1804</a>                 old RRs when it runs across them in the course of a        
<a class="line" id="line-1805" href="#line-1805"> 1805</a>                 search, or discards them during periodic sweeps to         
<a class="line" id="line-1806" href="#line-1806"> 1806</a>                 reclaim the memory consumed by old RRs.                    
<a class="line" id="line-1807" href="#line-1807"> 1807</a>                                                                            
<a class="line" id="line-1808" href="#line-1808"> 1808</a>                                                                            
<a class="line" id="line-1809" href="#line-1809"> 1809</a>                                                                            
<a class="line" id="line-1810" href="#line-1810"> 1810</a>                                                                            
<a class="line" id="line-1811" href="#line-1811"> 1811</a>                                                                            
<a class="line" id="line-1812" href="#line-1812"> 1812</a> <span class="grey">Mockapetris                                                    [Page 33]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-34" ></span><a class="line" id="line-1813" href="#line-1813"> 1813</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1814" href="#line-1814"> 1814</a>                                                                            
<a class="line" id="line-1815" href="#line-1815"> 1815</a>                                                                            
<a class="line" id="line-1816" href="#line-1816"> 1816</a> <span class="h4"><a class="selflink" id="section-5.3.3" href="#section-5.3.3">5.3.3</a>. Algorithm</span>                                                           
<a class="line" id="line-1817" href="#line-1817"> 1817</a>                                                                            
<a class="line" id="line-1818" href="#line-1818"> 1818</a> The top level algorithm has four steps:                                    
<a class="line" id="line-1819" href="#line-1819"> 1819</a>                                                                            
<a class="line" id="line-1820" href="#line-1820"> 1820</a>    1. See if the answer is in local information, and if so return          
<a class="line" id="line-1821" href="#line-1821"> 1821</a>       it to the client.                                                    
<a class="line" id="line-1822" href="#line-1822"> 1822</a>                                                                            
<a class="line" id="line-1823" href="#line-1823"> 1823</a>    2. Find the best servers to ask.                                        
<a class="line" id="line-1824" href="#line-1824"> 1824</a>                                                                            
<a class="line" id="line-1825" href="#line-1825"> 1825</a>    3. Send them queries until one returns a response.                      
<a class="line" id="line-1826" href="#line-1826"> 1826</a>                                                                            
<a class="line" id="line-1827" href="#line-1827"> 1827</a>    4. Analyze the response, either:                                        
<a class="line" id="line-1828" href="#line-1828"> 1828</a>                                                                            
<a class="line" id="line-1829" href="#line-1829"> 1829</a>          a. if the response answers the question or contains a name        
<a class="line" id="line-1830" href="#line-1830"> 1830</a>             error, cache the data as well as returning it back to          
<a class="line" id="line-1831" href="#line-1831"> 1831</a>             the client.                                                    
<a class="line" id="line-1832" href="#line-1832"> 1832</a>                                                                            
<a class="line" id="line-1833" href="#line-1833"> 1833</a>          b. if the response contains a better delegation to other          
<a class="line" id="line-1834" href="#line-1834"> 1834</a>             servers, cache the delegation information, and go to           
<a class="line" id="line-1835" href="#line-1835"> 1835</a>             step 2.                                                        
<a class="line" id="line-1836" href="#line-1836"> 1836</a>                                                                            
<a class="line" id="line-1837" href="#line-1837"> 1837</a>          c. if the response shows a CNAME and that is not the              
<a class="line" id="line-1838" href="#line-1838"> 1838</a>             answer itself, cache the CNAME, change the SNAME to the        
<a class="line" id="line-1839" href="#line-1839"> 1839</a>             canonical name in the CNAME RR and go to step 1.               
<a class="line" id="line-1840" href="#line-1840"> 1840</a>                                                                            
<a class="line" id="line-1841" href="#line-1841"> 1841</a>          d. if the response shows a servers failure or other               
<a class="line" id="line-1842" href="#line-1842"> 1842</a>             bizarre contents, delete the server from the SLIST and         
<a class="line" id="line-1843" href="#line-1843"> 1843</a>             go back to step 3.                                             
<a class="line" id="line-1844" href="#line-1844"> 1844</a>                                                                            
<a class="line" id="line-1845" href="#line-1845"> 1845</a> Step 1 searches the cache for the desired data. If the data is in the      
<a class="line" id="line-1846" href="#line-1846"> 1846</a> cache, it is assumed to be good enough for normal use.  Some resolvers     
<a class="line" id="line-1847" href="#line-1847"> 1847</a> have an option at the user interface which will force the resolver to      
<a class="line" id="line-1848" href="#line-1848"> 1848</a> ignore the cached data and consult with an authoritative server.  This     
<a class="line" id="line-1849" href="#line-1849"> 1849</a> is not recommended as the default.  If the resolver has direct access to   
<a class="line" id="line-1850" href="#line-1850"> 1850</a> a name server&#x27;s zones, it should check to see if the desired data is       
<a class="line" id="line-1851" href="#line-1851"> 1851</a> present in authoritative form, and if so, use the authoritative data in    
<a class="line" id="line-1852" href="#line-1852"> 1852</a> preference to cached data.                                                 
<a class="line" id="line-1853" href="#line-1853"> 1853</a>                                                                            
<a class="line" id="line-1854" href="#line-1854"> 1854</a> Step 2 looks for a name server to ask for the required data.  The          
<a class="line" id="line-1855" href="#line-1855"> 1855</a> general strategy is to look for locally-available name server RRs,         
<a class="line" id="line-1856" href="#line-1856"> 1856</a> starting at SNAME, then the parent domain name of SNAME, the               
<a class="line" id="line-1857" href="#line-1857"> 1857</a> grandparent, and so on toward the root.  Thus if SNAME were                
<a class="line" id="line-1858" href="#line-1858"> 1858</a> Mockapetris.ISI.EDU, this step would look for NS RRs for                   
<a class="line" id="line-1859" href="#line-1859"> 1859</a> Mockapetris.ISI.EDU, then ISI.EDU, then EDU, and then . (the root).        
<a class="line" id="line-1860" href="#line-1860"> 1860</a> These NS RRs list the names of hosts for a zone at or above SNAME.  Copy   
<a class="line" id="line-1861" href="#line-1861"> 1861</a> the names into SLIST.  Set up their addresses using local data.  It may    
<a class="line" id="line-1862" href="#line-1862"> 1862</a> be the case that the addresses are not available.  The resolver has many   
<a class="line" id="line-1863" href="#line-1863"> 1863</a> choices here; the best is to start parallel resolver processes looking     
<a class="line" id="line-1864" href="#line-1864"> 1864</a>                                                                            
<a class="line" id="line-1865" href="#line-1865"> 1865</a>                                                                            
<a class="line" id="line-1866" href="#line-1866"> 1866</a>                                                                            
<a class="line" id="line-1867" href="#line-1867"> 1867</a> <span class="grey">Mockapetris                                                    [Page 34]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-35" ></span><a class="line" id="line-1868" href="#line-1868"> 1868</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1869" href="#line-1869"> 1869</a>                                                                            
<a class="line" id="line-1870" href="#line-1870"> 1870</a>                                                                            
<a class="line" id="line-1871" href="#line-1871"> 1871</a> for the addresses while continuing onward with the addresses which are     
<a class="line" id="line-1872" href="#line-1872"> 1872</a> available.  Obviously, the design choices and options are complicated      
<a class="line" id="line-1873" href="#line-1873"> 1873</a> and a function of the local host&#x27;s capabilities.  The recommended          
<a class="line" id="line-1874" href="#line-1874"> 1874</a> priorities for the resolver designer are:                                  
<a class="line" id="line-1875" href="#line-1875"> 1875</a>                                                                            
<a class="line" id="line-1876" href="#line-1876"> 1876</a>    1. Bound the amount of work (packets sent, parallel processes           
<a class="line" id="line-1877" href="#line-1877"> 1877</a>       started) so that a request can&#x27;t get into an infinite loop or        
<a class="line" id="line-1878" href="#line-1878"> 1878</a>       start off a chain reaction of requests or queries with other         
<a class="line" id="line-1879" href="#line-1879"> 1879</a>       implementations EVEN IF SOMEONE HAS INCORRECTLY CONFIGURED           
<a class="line" id="line-1880" href="#line-1880"> 1880</a>       SOME DATA.                                                           
<a class="line" id="line-1881" href="#line-1881"> 1881</a>                                                                            
<a class="line" id="line-1882" href="#line-1882"> 1882</a>    2. Get back an answer if at all possible.                               
<a class="line" id="line-1883" href="#line-1883"> 1883</a>                                                                            
<a class="line" id="line-1884" href="#line-1884"> 1884</a>    3. Avoid unnecessary transmissions.                                     
<a class="line" id="line-1885" href="#line-1885"> 1885</a>                                                                            
<a class="line" id="line-1886" href="#line-1886"> 1886</a>    4. Get the answer as quickly as possible.                               
<a class="line" id="line-1887" href="#line-1887"> 1887</a>                                                                            
<a class="line" id="line-1888" href="#line-1888"> 1888</a> If the search for NS RRs fails, then the resolver initializes SLIST from   
<a class="line" id="line-1889" href="#line-1889"> 1889</a> the safety belt SBELT.  The basic idea is that when the resolver has no    
<a class="line" id="line-1890" href="#line-1890"> 1890</a> idea what servers to ask, it should use information from a configuration   
<a class="line" id="line-1891" href="#line-1891"> 1891</a> file that lists several servers which are expected to be helpful.          
<a class="line" id="line-1892" href="#line-1892"> 1892</a> Although there are special situations, the usual choice is two of the      
<a class="line" id="line-1893" href="#line-1893"> 1893</a> root servers and two of the servers for the host&#x27;s domain.  The reason     
<a class="line" id="line-1894" href="#line-1894"> 1894</a> for two of each is for redundancy.  The root servers will provide          
<a class="line" id="line-1895" href="#line-1895"> 1895</a> eventual access to all of the domain space.  The two local servers will    
<a class="line" id="line-1896" href="#line-1896"> 1896</a> allow the resolver to continue to resolve local names if the local         
<a class="line" id="line-1897" href="#line-1897"> 1897</a> network becomes isolated from the internet due to gateway or link          
<a class="line" id="line-1898" href="#line-1898"> 1898</a> failure.                                                                   
<a class="line" id="line-1899" href="#line-1899"> 1899</a>                                                                            
<a class="line" id="line-1900" href="#line-1900"> 1900</a> In addition to the names and addresses of the servers, the SLIST data      
<a class="line" id="line-1901" href="#line-1901"> 1901</a> structure can be sorted to use the best servers first, and to insure       
<a class="line" id="line-1902" href="#line-1902"> 1902</a> that all addresses of all servers are used in a round-robin manner.  The   
<a class="line" id="line-1903" href="#line-1903"> 1903</a> sorting can be a simple function of preferring addresses on the local      
<a class="line" id="line-1904" href="#line-1904"> 1904</a> network over others, or may involve statistics from past events, such as   
<a class="line" id="line-1905" href="#line-1905"> 1905</a> previous response times and batting averages.                              
<a class="line" id="line-1906" href="#line-1906"> 1906</a>                                                                            
<a class="line" id="line-1907" href="#line-1907"> 1907</a> Step 3 sends out queries until a response is received.  The strategy is    
<a class="line" id="line-1908" href="#line-1908"> 1908</a> to cycle around all of the addresses for all of the servers with a         
<a class="line" id="line-1909" href="#line-1909"> 1909</a> timeout between each transmission.  In practice it is important to use     
<a class="line" id="line-1910" href="#line-1910"> 1910</a> all addresses of a multihomed host, and too aggressive a retransmission    
<a class="line" id="line-1911" href="#line-1911"> 1911</a> policy actually slows response when used by multiple resolvers             
<a class="line" id="line-1912" href="#line-1912"> 1912</a> contending for the same name server and even occasionally for a single     
<a class="line" id="line-1913" href="#line-1913"> 1913</a> resolver.  SLIST typically contains data values to control the timeouts    
<a class="line" id="line-1914" href="#line-1914"> 1914</a> and keep track of previous transmissions.                                  
<a class="line" id="line-1915" href="#line-1915"> 1915</a>                                                                            
<a class="line" id="line-1916" href="#line-1916"> 1916</a> Step 4 involves analyzing responses.  The resolver should be highly        
<a class="line" id="line-1917" href="#line-1917"> 1917</a> paranoid in its parsing of responses.  It should also check that the       
<a class="line" id="line-1918" href="#line-1918"> 1918</a> response matches the query it sent using the ID field in the response.     
<a class="line" id="line-1919" href="#line-1919"> 1919</a>                                                                            
<a class="line" id="line-1920" href="#line-1920"> 1920</a>                                                                            
<a class="line" id="line-1921" href="#line-1921"> 1921</a>                                                                            
<a class="line" id="line-1922" href="#line-1922"> 1922</a> <span class="grey">Mockapetris                                                    [Page 35]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-36" ></span><a class="line" id="line-1923" href="#line-1923"> 1923</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1924" href="#line-1924"> 1924</a>                                                                            
<a class="line" id="line-1925" href="#line-1925"> 1925</a>                                                                            
<a class="line" id="line-1926" href="#line-1926"> 1926</a> The ideal answer is one from a server authoritative for the query which    
<a class="line" id="line-1927" href="#line-1927"> 1927</a> either gives the required data or a name error.  The data is passed back   
<a class="line" id="line-1928" href="#line-1928"> 1928</a> to the user and entered in the cache for future use if its TTL is          
<a class="line" id="line-1929" href="#line-1929"> 1929</a> greater than zero.                                                         
<a class="line" id="line-1930" href="#line-1930"> 1930</a>                                                                            
<a class="line" id="line-1931" href="#line-1931"> 1931</a> If the response shows a delegation, the resolver should check to see       
<a class="line" id="line-1932" href="#line-1932"> 1932</a> that the delegation is &quot;closer&quot; to the answer than the servers in SLIST    
<a class="line" id="line-1933" href="#line-1933"> 1933</a> are.  This can be done by comparing the match count in SLIST with that     
<a class="line" id="line-1934" href="#line-1934"> 1934</a> computed from SNAME and the NS RRs in the delegation.  If not, the reply   
<a class="line" id="line-1935" href="#line-1935"> 1935</a> is bogus and should be ignored.  If the delegation is valid the NS         
<a class="line" id="line-1936" href="#line-1936"> 1936</a> delegation RRs and any address RRs for the servers should be cached.       
<a class="line" id="line-1937" href="#line-1937"> 1937</a> The name servers are entered in the SLIST, and the search is restarted.    
<a class="line" id="line-1938" href="#line-1938"> 1938</a>                                                                            
<a class="line" id="line-1939" href="#line-1939"> 1939</a> If the response contains a CNAME, the search is restarted at the CNAME     
<a class="line" id="line-1940" href="#line-1940"> 1940</a> unless the response has the data for the canonical name or if the CNAME    
<a class="line" id="line-1941" href="#line-1941"> 1941</a> is the answer itself.                                                      
<a class="line" id="line-1942" href="#line-1942"> 1942</a>                                                                            
<a class="line" id="line-1943" href="#line-1943"> 1943</a> Details and implementation hints can be found in [<a href="./rfc1035.html">RFC-1035</a>].               
<a class="line" id="line-1944" href="#line-1944"> 1944</a>                                                                            
<a class="line" id="line-1945" href="#line-1945"> 1945</a> <span class="h2"><a class="selflink" id="section-6" href="#section-6">6</a>. A SCENARIO</span>                                                              
<a class="line" id="line-1946" href="#line-1946"> 1946</a>                                                                            
<a class="line" id="line-1947" href="#line-1947"> 1947</a> In our sample domain space, suppose we wanted separate administrative      
<a class="line" id="line-1948" href="#line-1948"> 1948</a> control for the root, MIL, EDU, MIT.EDU and ISI.EDU zones.  We might       
<a class="line" id="line-1949" href="#line-1949"> 1949</a> allocate name servers as follows:                                          
<a class="line" id="line-1950" href="#line-1950"> 1950</a>                                                                            
<a class="line" id="line-1951" href="#line-1951"> 1951</a>                                                                            
<a class="line" id="line-1952" href="#line-1952"> 1952</a>                                    |(C.ISI.EDU,SRI-NIC.ARPA                
<a class="line" id="line-1953" href="#line-1953"> 1953</a>                                    | A.ISI.EDU)                            
<a class="line" id="line-1954" href="#line-1954"> 1954</a>              +---------------------+------------------+                    
<a class="line" id="line-1955" href="#line-1955"> 1955</a>              |                     |                  |                    
<a class="line" id="line-1956" href="#line-1956"> 1956</a>             MIL                   EDU                ARPA                  
<a class="line" id="line-1957" href="#line-1957"> 1957</a>              |(SRI-NIC.ARPA,       |(SRI-NIC.ARPA,    |                    
<a class="line" id="line-1958" href="#line-1958"> 1958</a>              | A.ISI.EDU           | C.ISI.EDU)       |                    
<a class="line" id="line-1959" href="#line-1959"> 1959</a>        +-----+-----+               |     +------+-----+-----+              
<a class="line" id="line-1960" href="#line-1960"> 1960</a>        |     |     |               |     |      |           |              
<a class="line" id="line-1961" href="#line-1961"> 1961</a>       BRL  NOSC  DARPA             |  IN-ADDR  SRI-NIC     ACC             
<a class="line" id="line-1962" href="#line-1962"> 1962</a>                                    |                                       
<a class="line" id="line-1963" href="#line-1963"> 1963</a>        +--------+------------------+---------------+--------+              
<a class="line" id="line-1964" href="#line-1964"> 1964</a>        |        |                  |               |        |              
<a class="line" id="line-1965" href="#line-1965"> 1965</a>       UCI      MIT                 |              UDEL     YALE            
<a class="line" id="line-1966" href="#line-1966"> 1966</a>                 |(XX.LCS.MIT.EDU, ISI                                      
<a class="line" id="line-1967" href="#line-1967"> 1967</a>                 |ACHILLES.MIT.EDU) |(VAXA.ISI.EDU,VENERA.ISI.EDU,          
<a class="line" id="line-1968" href="#line-1968"> 1968</a>             +---+---+              | A.ISI.EDU)                            
<a class="line" id="line-1969" href="#line-1969"> 1969</a>             |       |              |                                       
<a class="line" id="line-1970" href="#line-1970"> 1970</a>            LCS   ACHILLES +--+-----+-----+--------+                        
<a class="line" id="line-1971" href="#line-1971"> 1971</a>             |             |  |     |     |        |                        
<a class="line" id="line-1972" href="#line-1972"> 1972</a>             XX            A  C   VAXA  VENERA Mockapetris                  
<a class="line" id="line-1973" href="#line-1973"> 1973</a>                                                                            
<a class="line" id="line-1974" href="#line-1974"> 1974</a>                                                                            
<a class="line" id="line-1975" href="#line-1975"> 1975</a>                                                                            
<a class="line" id="line-1976" href="#line-1976"> 1976</a>                                                                            
<a class="line" id="line-1977" href="#line-1977"> 1977</a> <span class="grey">Mockapetris                                                    [Page 36]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-37" ></span><a class="line" id="line-1978" href="#line-1978"> 1978</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-1979" href="#line-1979"> 1979</a>                                                                            
<a class="line" id="line-1980" href="#line-1980"> 1980</a>                                                                            
<a class="line" id="line-1981" href="#line-1981"> 1981</a> In this example, the authoritative name server is shown in parentheses     
<a class="line" id="line-1982" href="#line-1982"> 1982</a> at the point in the domain tree at which is assumes control.               
<a class="line" id="line-1983" href="#line-1983"> 1983</a>                                                                            
<a class="line" id="line-1984" href="#line-1984"> 1984</a> Thus the root name servers are on C.ISI.EDU, SRI-NIC.ARPA, and             
<a class="line" id="line-1985" href="#line-1985"> 1985</a> A.ISI.EDU.  The MIL domain is served by SRI-NIC.ARPA and A.ISI.EDU.  The   
<a class="line" id="line-1986" href="#line-1986"> 1986</a> EDU domain is served by SRI-NIC.ARPA. and C.ISI.EDU.  Note that servers    
<a class="line" id="line-1987" href="#line-1987"> 1987</a> may have zones which are contiguous or disjoint.  In this scenario,        
<a class="line" id="line-1988" href="#line-1988"> 1988</a> C.ISI.EDU has contiguous zones at the root and EDU domains.  A.ISI.EDU     
<a class="line" id="line-1989" href="#line-1989"> 1989</a> has contiguous zones at the root and MIL domains, but also has a non-      
<a class="line" id="line-1990" href="#line-1990"> 1990</a> contiguous zone at ISI.EDU.                                                
<a class="line" id="line-1991" href="#line-1991"> 1991</a>                                                                            
<a class="line" id="line-1992" href="#line-1992"> 1992</a> <span class="h3"><a class="selflink" id="section-6.1" href="#section-6.1">6.1</a>. C.ISI.EDU name server</span>                                                 
<a class="line" id="line-1993" href="#line-1993"> 1993</a>                                                                            
<a class="line" id="line-1994" href="#line-1994"> 1994</a> C.ISI.EDU is a name server for the root, MIL, and EDU domains of the IN    
<a class="line" id="line-1995" href="#line-1995"> 1995</a> class, and would have zones for these domains.  The zone data for the      
<a class="line" id="line-1996" href="#line-1996"> 1996</a> root domain might be:                                                      
<a class="line" id="line-1997" href="#line-1997"> 1997</a>                                                                            
<a class="line" id="line-1998" href="#line-1998"> 1998</a>     .       IN      SOA     SRI-NIC.ARPA. HOSTMASTER.SRI-NIC.ARPA. (       
<a class="line" id="line-1999" href="#line-1999"> 1999</a>                             870611          ;serial                        
<a class="line" id="line-2000" href="#line-2000"> 2000</a>                             1800            ;refresh every 30 min          
<a class="line" id="line-2001" href="#line-2001"> 2001</a>                             300             ;retry every 5 min             
<a class="line" id="line-2002" href="#line-2002"> 2002</a>                             604800          ;expire after a week           
<a class="line" id="line-2003" href="#line-2003"> 2003</a>                             86400)          ;minimum of a day              
<a class="line" id="line-2004" href="#line-2004"> 2004</a>                     NS      A.ISI.EDU.                                     
<a class="line" id="line-2005" href="#line-2005"> 2005</a>                     NS      C.ISI.EDU.                                     
<a class="line" id="line-2006" href="#line-2006"> 2006</a>                     NS      SRI-NIC.ARPA.                                  
<a class="line" id="line-2007" href="#line-2007"> 2007</a>                                                                            
<a class="line" id="line-2008" href="#line-2008"> 2008</a>     MIL.    86400   NS      SRI-NIC.ARPA.                                  
<a class="line" id="line-2009" href="#line-2009"> 2009</a>             86400   NS      A.ISI.EDU.                                     
<a class="line" id="line-2010" href="#line-2010"> 2010</a>                                                                            
<a class="line" id="line-2011" href="#line-2011"> 2011</a>     EDU.    86400   NS      SRI-NIC.ARPA.                                  
<a class="line" id="line-2012" href="#line-2012"> 2012</a>             86400   NS      C.ISI.EDU.                                     
<a class="line" id="line-2013" href="#line-2013"> 2013</a>                                                                            
<a class="line" id="line-2014" href="#line-2014"> 2014</a>     SRI-NIC.ARPA.   A       26.0.0.73                                      
<a class="line" id="line-2015" href="#line-2015"> 2015</a>                     A       10.0.0.51                                      
<a class="line" id="line-2016" href="#line-2016"> 2016</a>                     MX      0 SRI-NIC.ARPA.                                
<a class="line" id="line-2017" href="#line-2017"> 2017</a>                     HINFO   DEC-2060 TOPS20                                
<a class="line" id="line-2018" href="#line-2018"> 2018</a>                                                                            
<a class="line" id="line-2019" href="#line-2019"> 2019</a>     ACC.ARPA.       A       26.6.0.65                                      
<a class="line" id="line-2020" href="#line-2020"> 2020</a>                     HINFO   PDP-11/70 UNIX                                 
<a class="line" id="line-2021" href="#line-2021"> 2021</a>                     MX      10 ACC.ARPA.                                   
<a class="line" id="line-2022" href="#line-2022"> 2022</a>                                                                            
<a class="line" id="line-2023" href="#line-2023"> 2023</a>     USC-ISIC.ARPA.  CNAME   C.ISI.EDU.                                     
<a class="line" id="line-2024" href="#line-2024"> 2024</a>                                                                            
<a class="line" id="line-2025" href="#line-2025"> 2025</a>     73.0.0.26.IN-ADDR.ARPA.  PTR    SRI-NIC.ARPA.                          
<a class="line" id="line-2026" href="#line-2026"> 2026</a>     65.0.6.26.IN-ADDR.ARPA.  PTR    ACC.ARPA.                              
<a class="line" id="line-2027" href="#line-2027"> 2027</a>     51.0.0.10.IN-ADDR.ARPA.  PTR    SRI-NIC.ARPA.                          
<a class="line" id="line-2028" href="#line-2028"> 2028</a>     52.0.0.10.IN-ADDR.ARPA.  PTR    C.ISI.EDU.                             
<a class="line" id="line-2029" href="#line-2029"> 2029</a>                                                                            
<a class="line" id="line-2030" href="#line-2030"> 2030</a>                                                                            
<a class="line" id="line-2031" href="#line-2031"> 2031</a>                                                                            
<a class="line" id="line-2032" href="#line-2032"> 2032</a> <span class="grey">Mockapetris                                                    [Page 37]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-38" ></span><a class="line" id="line-2033" href="#line-2033"> 2033</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2034" href="#line-2034"> 2034</a>                                                                            
<a class="line" id="line-2035" href="#line-2035"> 2035</a>                                                                            
<a class="line" id="line-2036" href="#line-2036"> 2036</a>     103.0.3.26.IN-ADDR.ARPA. PTR    A.ISI.EDU.                             
<a class="line" id="line-2037" href="#line-2037"> 2037</a>                                                                            
<a class="line" id="line-2038" href="#line-2038"> 2038</a>     A.ISI.EDU. 86400 A      26.3.0.103                                     
<a class="line" id="line-2039" href="#line-2039"> 2039</a>     C.ISI.EDU. 86400 A      10.0.0.52                                      
<a class="line" id="line-2040" href="#line-2040"> 2040</a>                                                                            
<a class="line" id="line-2041" href="#line-2041"> 2041</a> This data is represented as it would be in a master file.  Most RRs are    
<a class="line" id="line-2042" href="#line-2042"> 2042</a> single line entries; the sole exception here is the SOA RR, which uses     
<a class="line" id="line-2043" href="#line-2043"> 2043</a> &quot;(&quot; to start a multi-line RR and &quot;)&quot; to show the end of a multi-line RR.   
<a class="line" id="line-2044" href="#line-2044"> 2044</a> Since the class of all RRs in a zone must be the same, only the first RR   
<a class="line" id="line-2045" href="#line-2045"> 2045</a> in a zone need specify the class.  When a name server loads a zone, it     
<a class="line" id="line-2046" href="#line-2046"> 2046</a> forces the TTL of all authoritative RRs to be at least the MINIMUM field   
<a class="line" id="line-2047" href="#line-2047"> 2047</a> of the SOA, here 86400 seconds, or one day.  The NS RRs marking            
<a class="line" id="line-2048" href="#line-2048"> 2048</a> delegation of the MIL and EDU domains, together with the glue RRs for      
<a class="line" id="line-2049" href="#line-2049"> 2049</a> the servers host addresses, are not part of the authoritative data in      
<a class="line" id="line-2050" href="#line-2050"> 2050</a> the zone, and hence have explicit TTLs.                                    
<a class="line" id="line-2051" href="#line-2051"> 2051</a>                                                                            
<a class="line" id="line-2052" href="#line-2052"> 2052</a> Four RRs are attached to the root node: the SOA which describes the root   
<a class="line" id="line-2053" href="#line-2053"> 2053</a> zone and the 3 NS RRs which list the name servers for the root.  The       
<a class="line" id="line-2054" href="#line-2054"> 2054</a> data in the SOA RR describes the management of the zone.  The zone data    
<a class="line" id="line-2055" href="#line-2055"> 2055</a> is maintained on host SRI-NIC.ARPA, and the responsible party for the      
<a class="line" id="line-2056" href="#line-2056"> 2056</a> zone is HOSTMASTER@SRI-NIC.ARPA.  A key item in the SOA is the 86400       
<a class="line" id="line-2057" href="#line-2057"> 2057</a> second minimum TTL, which means that all authoritative data in the zone    
<a class="line" id="line-2058" href="#line-2058"> 2058</a> has at least that TTL, although higher values may be explicitly            
<a class="line" id="line-2059" href="#line-2059"> 2059</a> specified.                                                                 
<a class="line" id="line-2060" href="#line-2060"> 2060</a>                                                                            
<a class="line" id="line-2061" href="#line-2061"> 2061</a> The NS RRs for the MIL and EDU domains mark the boundary between the       
<a class="line" id="line-2062" href="#line-2062"> 2062</a> root zone and the MIL and EDU zones.  Note that in this example, the       
<a class="line" id="line-2063" href="#line-2063"> 2063</a> lower zones happen to be supported by name servers which also support      
<a class="line" id="line-2064" href="#line-2064"> 2064</a> the root zone.                                                             
<a class="line" id="line-2065" href="#line-2065"> 2065</a>                                                                            
<a class="line" id="line-2066" href="#line-2066"> 2066</a> The master file for the EDU zone might be stated relative to the origin    
<a class="line" id="line-2067" href="#line-2067"> 2067</a> EDU.  The zone data for the EDU domain might be:                           
<a class="line" id="line-2068" href="#line-2068"> 2068</a>                                                                            
<a class="line" id="line-2069" href="#line-2069"> 2069</a>     EDU.  IN SOA SRI-NIC.ARPA. HOSTMASTER.SRI-NIC.ARPA. (                  
<a class="line" id="line-2070" href="#line-2070"> 2070</a>                             870729 ;serial                                 
<a class="line" id="line-2071" href="#line-2071"> 2071</a>                             1800 ;refresh every 30 minutes                 
<a class="line" id="line-2072" href="#line-2072"> 2072</a>                             300 ;retry every 5 minutes                     
<a class="line" id="line-2073" href="#line-2073"> 2073</a>                             604800 ;expire after a week                    
<a class="line" id="line-2074" href="#line-2074"> 2074</a>                             86400 ;minimum of a day                        
<a class="line" id="line-2075" href="#line-2075"> 2075</a>                             )                                              
<a class="line" id="line-2076" href="#line-2076"> 2076</a>                     NS SRI-NIC.ARPA.                                       
<a class="line" id="line-2077" href="#line-2077"> 2077</a>                     NS C.ISI.EDU.                                          
<a class="line" id="line-2078" href="#line-2078"> 2078</a>                                                                            
<a class="line" id="line-2079" href="#line-2079"> 2079</a>     UCI 172800 NS ICS.UCI                                                  
<a class="line" id="line-2080" href="#line-2080"> 2080</a>                     172800 NS ROME.UCI                                     
<a class="line" id="line-2081" href="#line-2081"> 2081</a>     ICS.UCI 172800 A 192.5.19.1                                            
<a class="line" id="line-2082" href="#line-2082"> 2082</a>     ROME.UCI 172800 A 192.5.19.31                                          
<a class="line" id="line-2083" href="#line-2083"> 2083</a>                                                                            
<a class="line" id="line-2084" href="#line-2084"> 2084</a>                                                                            
<a class="line" id="line-2085" href="#line-2085"> 2085</a>                                                                            
<a class="line" id="line-2086" href="#line-2086"> 2086</a>                                                                            
<a class="line" id="line-2087" href="#line-2087"> 2087</a> <span class="grey">Mockapetris                                                    [Page 38]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-39" ></span><a class="line" id="line-2088" href="#line-2088"> 2088</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2089" href="#line-2089"> 2089</a>                                                                            
<a class="line" id="line-2090" href="#line-2090"> 2090</a>                                                                            
<a class="line" id="line-2091" href="#line-2091"> 2091</a>     ISI 172800 NS VAXA.ISI                                                 
<a class="line" id="line-2092" href="#line-2092"> 2092</a>                     172800 NS A.ISI                                        
<a class="line" id="line-2093" href="#line-2093"> 2093</a>                     172800 NS VENERA.ISI.EDU.                              
<a class="line" id="line-2094" href="#line-2094"> 2094</a>     VAXA.ISI 172800 A 10.2.0.27                                            
<a class="line" id="line-2095" href="#line-2095"> 2095</a>                     172800 A 128.9.0.33                                    
<a class="line" id="line-2096" href="#line-2096"> 2096</a>     VENERA.ISI.EDU. 172800 A 10.1.0.52                                     
<a class="line" id="line-2097" href="#line-2097"> 2097</a>                     172800 A 128.9.0.32                                    
<a class="line" id="line-2098" href="#line-2098"> 2098</a>     A.ISI 172800 A 26.3.0.103                                              
<a class="line" id="line-2099" href="#line-2099"> 2099</a>                                                                            
<a class="line" id="line-2100" href="#line-2100"> 2100</a>     UDEL.EDU.  172800 NS LOUIE.UDEL.EDU.                                   
<a class="line" id="line-2101" href="#line-2101"> 2101</a>                     172800 NS UMN-REI-UC.ARPA.                             
<a class="line" id="line-2102" href="#line-2102"> 2102</a>     LOUIE.UDEL.EDU. 172800 A 10.0.0.96                                     
<a class="line" id="line-2103" href="#line-2103"> 2103</a>                     172800 A 192.5.39.3                                    
<a class="line" id="line-2104" href="#line-2104"> 2104</a>                                                                            
<a class="line" id="line-2105" href="#line-2105"> 2105</a>     YALE.EDU.  172800 NS YALE.ARPA.                                        
<a class="line" id="line-2106" href="#line-2106"> 2106</a>     YALE.EDU.  172800 NS YALE-BULLDOG.ARPA.                                
<a class="line" id="line-2107" href="#line-2107"> 2107</a>                                                                            
<a class="line" id="line-2108" href="#line-2108"> 2108</a>     MIT.EDU.  43200 NS XX.LCS.MIT.EDU.                                     
<a class="line" id="line-2109" href="#line-2109"> 2109</a>                       43200 NS ACHILLES.MIT.EDU.                           
<a class="line" id="line-2110" href="#line-2110"> 2110</a>     XX.LCS.MIT.EDU.  43200 A 10.0.0.44                                     
<a class="line" id="line-2111" href="#line-2111"> 2111</a>     ACHILLES.MIT.EDU. 43200 A 18.72.0.8                                    
<a class="line" id="line-2112" href="#line-2112"> 2112</a>                                                                            
<a class="line" id="line-2113" href="#line-2113"> 2113</a> Note the use of relative names here.  The owner name for the ISI.EDU. is   
<a class="line" id="line-2114" href="#line-2114"> 2114</a> stated using a relative name, as are two of the name server RR contents.   
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial verified ivan panchenko"><div class="title"><span class="reference"><a href="#line-1715">line-1715</a> Ivan Panchenko</span><span class="caption"><span id="rfc.erratum.6460">(Editorial Erratum #<a target='_blank' title='ivan panchenko (Editorial)' href='https://www.rfc-editor.org/errata/eid6460'>6460</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
than typical occurances.  This section outlines a recommended basic
</pre></div>
<div class='correct'>It should say:<pre>
than typical occur<del>a</del><ins>re</ins>nces.  This section outlines a recommended basic
</pre></div>
<hr/>
<div class='note'>
Misspelled "occurrences".
</div>

</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-2115" href="#line-2115"> 2115</a> Relative and absolute domain names may be freely intermixed in a master    
<a class="line" id="line-2116" href="#line-2116"> 2116</a>                                                                            
<a class="line" id="line-2117" href="#line-2117"> 2117</a> <span class="h3"><a class="selflink" id="section-6.2" href="#section-6.2">6.2</a>. Example standard queries</span>                                              
<a class="line" id="line-2118" href="#line-2118"> 2118</a>                                                                            
<a class="line" id="line-2119" href="#line-2119"> 2119</a> The following queries and responses illustrate name server behavior.       
<a class="line" id="line-2120" href="#line-2120"> 2120</a> Unless otherwise noted, the queries do not have recursion desired (RD)     
<a class="line" id="line-2121" href="#line-2121"> 2121</a> in the header.  Note that the answers to non-recursive queries do depend   
<a class="line" id="line-2122" href="#line-2122"> 2122</a> on the server being asked, but do not depend on the identity of the        
<a class="line" id="line-2123" href="#line-2123"> 2123</a> requester.                                                                 
<a class="line" id="line-2124" href="#line-2124"> 2124</a>                                                                            
<a class="line" id="line-2125" href="#line-2125"> 2125</a>                                                                            
<a class="line" id="line-2126" href="#line-2126"> 2126</a>                                                                            
<a class="line" id="line-2127" href="#line-2127"> 2127</a>                                                                            
<a class="line" id="line-2128" href="#line-2128"> 2128</a>                                                                            
<a class="line" id="line-2129" href="#line-2129"> 2129</a>                                                                            
<a class="line" id="line-2130" href="#line-2130"> 2130</a>                                                                            
<a class="line" id="line-2131" href="#line-2131"> 2131</a>                                                                            
<a class="line" id="line-2132" href="#line-2132"> 2132</a>                                                                            
<a class="line" id="line-2133" href="#line-2133"> 2133</a>                                                                            
<a class="line" id="line-2134" href="#line-2134"> 2134</a>                                                                            
<a class="line" id="line-2135" href="#line-2135"> 2135</a>                                                                            
<a class="line" id="line-2136" href="#line-2136"> 2136</a>                                                                            
<a class="line" id="line-2137" href="#line-2137"> 2137</a>                                                                            
<a class="line" id="line-2138" href="#line-2138"> 2138</a>                                                                            
<a class="line" id="line-2139" href="#line-2139"> 2139</a>                                                                            
<a class="line" id="line-2140" href="#line-2140"> 2140</a>                                                                            
<a class="line" id="line-2141" href="#line-2141"> 2141</a>                                                                            
<a class="line" id="line-2142" href="#line-2142"> 2142</a> <span class="grey">Mockapetris                                                    [Page 39]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-40" ></span><a class="line" id="line-2143" href="#line-2143"> 2143</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2144" href="#line-2144"> 2144</a>                                                                            
<a class="line" id="line-2145" href="#line-2145"> 2145</a>                                                                            
<a class="line" id="line-2146" href="#line-2146"> 2146</a> <span class="h4"><a class="selflink" id="section-6.2.1" href="#section-6.2.1">6.2.1</a>. QNAME=SRI-NIC.ARPA, QTYPE=A</span>                                         
<a class="line" id="line-2147" href="#line-2147"> 2147</a>                                                                            
<a class="line" id="line-2148" href="#line-2148"> 2148</a> The query would look like:                                                 
<a class="line" id="line-2149" href="#line-2149"> 2149</a>                                                                            
<a class="line" id="line-2150" href="#line-2150"> 2150</a>                +---------------------------------------------------+       
<a class="line" id="line-2151" href="#line-2151"> 2151</a>     Header     | OPCODE=SQUERY                                     |       
<a class="line" id="line-2152" href="#line-2152"> 2152</a>                +---------------------------------------------------+       
<a class="line" id="line-2153" href="#line-2153"> 2153</a>     Question   | QNAME=SRI-NIC.ARPA., QCLASS=IN, QTYPE=A           |       
<a class="line" id="line-2154" href="#line-2154"> 2154</a>                +---------------------------------------------------+       
<a class="line" id="line-2155" href="#line-2155"> 2155</a>     Answer     | &lt;empty&gt;                                           |       
<a class="line" id="line-2156" href="#line-2156"> 2156</a>                +---------------------------------------------------+       
<a class="line" id="line-2157" href="#line-2157"> 2157</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2158" href="#line-2158"> 2158</a>                +---------------------------------------------------+       
<a class="line" id="line-2159" href="#line-2159"> 2159</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2160" href="#line-2160"> 2160</a>                +---------------------------------------------------+       
<a class="line" id="line-2161" href="#line-2161"> 2161</a>                                                                            
<a class="line" id="line-2162" href="#line-2162"> 2162</a> The response from C.ISI.EDU would be:                                      
<a class="line" id="line-2163" href="#line-2163"> 2163</a>                                                                            
<a class="line" id="line-2164" href="#line-2164"> 2164</a>                +---------------------------------------------------+       
<a class="line" id="line-2165" href="#line-2165"> 2165</a>     Header     | OPCODE=SQUERY, RESPONSE, AA                       |       
<a class="line" id="line-2166" href="#line-2166"> 2166</a>                +---------------------------------------------------+       
<a class="line" id="line-2167" href="#line-2167"> 2167</a>     Question   | QNAME=SRI-NIC.ARPA., QCLASS=IN, QTYPE=A           |       
<a class="line" id="line-2168" href="#line-2168"> 2168</a>                +---------------------------------------------------+       
<a class="line" id="line-2169" href="#line-2169"> 2169</a>     Answer     | SRI-NIC.ARPA. 86400 IN A 26.0.0.73                |       
<a class="line" id="line-2170" href="#line-2170"> 2170</a>                |               86400 IN A 10.0.0.51                |       
<a class="line" id="line-2171" href="#line-2171"> 2171</a>                +---------------------------------------------------+       
<a class="line" id="line-2172" href="#line-2172"> 2172</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2173" href="#line-2173"> 2173</a>                +---------------------------------------------------+       
<a class="line" id="line-2174" href="#line-2174"> 2174</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2175" href="#line-2175"> 2175</a>                +---------------------------------------------------+       
<a class="line" id="line-2176" href="#line-2176"> 2176</a>                                                                            
<a class="line" id="line-2177" href="#line-2177"> 2177</a> The header of the response looks like the header of the query, except      
<a class="line" id="line-2178" href="#line-2178"> 2178</a> that the RESPONSE bit is set, indicating that this message is a            
<a class="line" id="line-2179" href="#line-2179"> 2179</a> response, not a query, and the Authoritative Answer (AA) bit is set        
<a class="line" id="line-2180" href="#line-2180"> 2180</a> indicating that the address RRs in the answer section are from             
<a class="line" id="line-2181" href="#line-2181"> 2181</a> authoritative data.  The question section of the response matches the      
<a class="line" id="line-2182" href="#line-2182"> 2182</a> question section of the query.                                             
<a class="line" id="line-2183" href="#line-2183"> 2183</a>                                                                            
<a class="line" id="line-2184" href="#line-2184"> 2184</a>                                                                            
<a class="line" id="line-2185" href="#line-2185"> 2185</a>                                                                            
<a class="line" id="line-2186" href="#line-2186"> 2186</a>                                                                            
<a class="line" id="line-2187" href="#line-2187"> 2187</a>                                                                            
<a class="line" id="line-2188" href="#line-2188"> 2188</a>                                                                            
<a class="line" id="line-2189" href="#line-2189"> 2189</a>                                                                            
<a class="line" id="line-2190" href="#line-2190"> 2190</a>                                                                            
<a class="line" id="line-2191" href="#line-2191"> 2191</a>                                                                            
<a class="line" id="line-2192" href="#line-2192"> 2192</a>                                                                            
<a class="line" id="line-2193" href="#line-2193"> 2193</a>                                                                            
<a class="line" id="line-2194" href="#line-2194"> 2194</a>                                                                            
<a class="line" id="line-2195" href="#line-2195"> 2195</a>                                                                            
<a class="line" id="line-2196" href="#line-2196"> 2196</a>                                                                            
<a class="line" id="line-2197" href="#line-2197"> 2197</a> <span class="grey">Mockapetris                                                    [Page 40]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-41" ></span><a class="line" id="line-2198" href="#line-2198"> 2198</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2199" href="#line-2199"> 2199</a>                                                                            
<a class="line" id="line-2200" href="#line-2200"> 2200</a>                                                                            
<a class="line" id="line-2201" href="#line-2201"> 2201</a> If the same query was sent to some other server which was not              
<a class="line" id="line-2202" href="#line-2202"> 2202</a> authoritative for SRI-NIC.ARPA, the response might be:                     
<a class="line" id="line-2203" href="#line-2203"> 2203</a>                                                                            
<a class="line" id="line-2204" href="#line-2204"> 2204</a>                +---------------------------------------------------+       
<a class="line" id="line-2205" href="#line-2205"> 2205</a>     Header     | OPCODE=SQUERY,RESPONSE                            |       
<a class="line" id="line-2206" href="#line-2206"> 2206</a>                +---------------------------------------------------+       
<a class="line" id="line-2207" href="#line-2207"> 2207</a>     Question   | QNAME=SRI-NIC.ARPA., QCLASS=IN, QTYPE=A           |       
<a class="line" id="line-2208" href="#line-2208"> 2208</a>                +---------------------------------------------------+       
<a class="line" id="line-2209" href="#line-2209"> 2209</a>     Answer     | SRI-NIC.ARPA. 1777 IN A 10.0.0.51                 |       
<a class="line" id="line-2210" href="#line-2210"> 2210</a>                |               1777 IN A 26.0.0.73                 |       
<a class="line" id="line-2211" href="#line-2211"> 2211</a>                +---------------------------------------------------+       
<a class="line" id="line-2212" href="#line-2212"> 2212</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2213" href="#line-2213"> 2213</a>                +---------------------------------------------------+       
<a class="line" id="line-2214" href="#line-2214"> 2214</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2215" href="#line-2215"> 2215</a>                +---------------------------------------------------+       
<a class="line" id="line-2216" href="#line-2216"> 2216</a>                                                                            
<a class="line" id="line-2217" href="#line-2217"> 2217</a> This response is different from the previous one in two ways: the header   
<a class="line" id="line-2218" href="#line-2218"> 2218</a> does not have AA set, and the TTLs are different.  The inference is that   
<a class="line" id="line-2219" href="#line-2219"> 2219</a> the data did not come from a zone, but from a cache.  The difference       
<a class="line" id="line-2220" href="#line-2220"> 2220</a> between the authoritative TTL and the TTL here is due to aging of the      
<a class="line" id="line-2221" href="#line-2221"> 2221</a> data in a cache.  The difference in ordering of the RRs in the answer      
<a class="line" id="line-2222" href="#line-2222"> 2222</a> section is not significant.                                                
<a class="line" id="line-2223" href="#line-2223"> 2223</a>                                                                            
<a class="line" id="line-2224" href="#line-2224"> 2224</a> <span class="h4"><a class="selflink" id="section-6.2.2" href="#section-6.2.2">6.2.2</a>. QNAME=SRI-NIC.ARPA, QTYPE=*</span>                                         
<a class="line" id="line-2225" href="#line-2225"> 2225</a>                                                                            
<a class="line" id="line-2226" href="#line-2226"> 2226</a> A query similar to the previous one, but using a QTYPE of *, would         
<a class="line" id="line-2227" href="#line-2227"> 2227</a> receive the following response from C.ISI.EDU:                             
<a class="line" id="line-2228" href="#line-2228"> 2228</a>                                                                            
<a class="line" id="line-2229" href="#line-2229"> 2229</a>                +---------------------------------------------------+       
<a class="line" id="line-2230" href="#line-2230"> 2230</a>     Header     | OPCODE=SQUERY, RESPONSE, AA                       |       
<a class="line" id="line-2231" href="#line-2231"> 2231</a>                +---------------------------------------------------+       
<a class="line" id="line-2232" href="#line-2232"> 2232</a>     Question   | QNAME=SRI-NIC.ARPA., QCLASS=IN, QTYPE=*           |       
<a class="line" id="line-2233" href="#line-2233"> 2233</a>                +---------------------------------------------------+       
<a class="line" id="line-2234" href="#line-2234"> 2234</a>     Answer     | SRI-NIC.ARPA. 86400 IN  A     26.0.0.73           |       
<a class="line" id="line-2235" href="#line-2235"> 2235</a>                |                         A     10.0.0.51           |       
<a class="line" id="line-2236" href="#line-2236"> 2236</a>                |                         MX    0 SRI-NIC.ARPA.     |       
<a class="line" id="line-2237" href="#line-2237"> 2237</a>                |                         HINFO DEC-2060 TOPS20     |       
<a class="line" id="line-2238" href="#line-2238"> 2238</a>                +---------------------------------------------------+       
<a class="line" id="line-2239" href="#line-2239"> 2239</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2240" href="#line-2240"> 2240</a>                +---------------------------------------------------+       
<a class="line" id="line-2241" href="#line-2241"> 2241</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2242" href="#line-2242"> 2242</a>                +---------------------------------------------------+       
<a class="line" id="line-2243" href="#line-2243"> 2243</a>                                                                            
<a class="line" id="line-2244" href="#line-2244"> 2244</a>                                                                            
<a class="line" id="line-2245" href="#line-2245"> 2245</a>                                                                            
<a class="line" id="line-2246" href="#line-2246"> 2246</a>                                                                            
<a class="line" id="line-2247" href="#line-2247"> 2247</a>                                                                            
<a class="line" id="line-2248" href="#line-2248"> 2248</a>                                                                            
<a class="line" id="line-2249" href="#line-2249"> 2249</a>                                                                            
<a class="line" id="line-2250" href="#line-2250"> 2250</a>                                                                            
<a class="line" id="line-2251" href="#line-2251"> 2251</a>                                                                            
<a class="line" id="line-2252" href="#line-2252"> 2252</a> <span class="grey">Mockapetris                                                    [Page 41]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-42" ></span><a class="line" id="line-2253" href="#line-2253"> 2253</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2254" href="#line-2254"> 2254</a>                                                                            
<a class="line" id="line-2255" href="#line-2255"> 2255</a>                                                                            
<a class="line" id="line-2256" href="#line-2256"> 2256</a> If a similar query was directed to two name servers which are not          
<a class="line" id="line-2257" href="#line-2257"> 2257</a> authoritative for SRI-NIC.ARPA, the responses might be:                    
<a class="line" id="line-2258" href="#line-2258"> 2258</a>                                                                            
<a class="line" id="line-2259" href="#line-2259"> 2259</a>                +---------------------------------------------------+       
<a class="line" id="line-2260" href="#line-2260"> 2260</a>     Header     | OPCODE=SQUERY, RESPONSE                           |       
<a class="line" id="line-2261" href="#line-2261"> 2261</a>                +---------------------------------------------------+       
<a class="line" id="line-2262" href="#line-2262"> 2262</a>     Question   | QNAME=SRI-NIC.ARPA., QCLASS=IN, QTYPE=*           |       
<a class="line" id="line-2263" href="#line-2263"> 2263</a>                +---------------------------------------------------+       
<a class="line" id="line-2264" href="#line-2264"> 2264</a>     Answer     | SRI-NIC.ARPA. 12345 IN     A       26.0.0.73      |       
<a class="line" id="line-2265" href="#line-2265"> 2265</a>                |                            A       10.0.0.51      |       
<a class="line" id="line-2266" href="#line-2266"> 2266</a>                +---------------------------------------------------+       
<a class="line" id="line-2267" href="#line-2267"> 2267</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2268" href="#line-2268"> 2268</a>                +---------------------------------------------------+       
<a class="line" id="line-2269" href="#line-2269"> 2269</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2270" href="#line-2270"> 2270</a>                +---------------------------------------------------+       
<a class="line" id="line-2271" href="#line-2271"> 2271</a>                                                                            
<a class="line" id="line-2272" href="#line-2272"> 2272</a> and                                                                        
<a class="line" id="line-2273" href="#line-2273"> 2273</a>                                                                            
<a class="line" id="line-2274" href="#line-2274"> 2274</a>                +---------------------------------------------------+       
<a class="line" id="line-2275" href="#line-2275"> 2275</a>     Header     | OPCODE=SQUERY, RESPONSE                           |       
<a class="line" id="line-2276" href="#line-2276"> 2276</a>                +---------------------------------------------------+       
<a class="line" id="line-2277" href="#line-2277"> 2277</a>     Question   | QNAME=SRI-NIC.ARPA., QCLASS=IN, QTYPE=*           |       
<a class="line" id="line-2278" href="#line-2278"> 2278</a>                +---------------------------------------------------+       
<a class="line" id="line-2279" href="#line-2279"> 2279</a>     Answer     | SRI-NIC.ARPA. 1290 IN HINFO  DEC-2060 TOPS20      |       
<a class="line" id="line-2280" href="#line-2280"> 2280</a>                +---------------------------------------------------+       
<a class="line" id="line-2281" href="#line-2281"> 2281</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2282" href="#line-2282"> 2282</a>                +---------------------------------------------------+       
<a class="line" id="line-2283" href="#line-2283"> 2283</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2284" href="#line-2284"> 2284</a>                +---------------------------------------------------+       
<a class="line" id="line-2285" href="#line-2285"> 2285</a>                                                                            
<a class="line" id="line-2286" href="#line-2286"> 2286</a> Neither of these answers have AA set, so neither response comes from       
<a class="line" id="line-2287" href="#line-2287"> 2287</a> authoritative data.  The different contents and different TTLs suggest     
<a class="line" id="line-2288" href="#line-2288"> 2288</a> that the two servers cached data at different times, and that the first    
<a class="line" id="line-2289" href="#line-2289"> 2289</a> server cached the response to a QTYPE=A query and the second cached the    
<a class="line" id="line-2290" href="#line-2290"> 2290</a> response to a HINFO query.                                                 
<a class="line" id="line-2291" href="#line-2291"> 2291</a>                                                                            
<a class="line" id="line-2292" href="#line-2292"> 2292</a>                                                                            
<a class="line" id="line-2293" href="#line-2293"> 2293</a>                                                                            
<a class="line" id="line-2294" href="#line-2294"> 2294</a>                                                                            
<a class="line" id="line-2295" href="#line-2295"> 2295</a>                                                                            
<a class="line" id="line-2296" href="#line-2296"> 2296</a>                                                                            
<a class="line" id="line-2297" href="#line-2297"> 2297</a>                                                                            
<a class="line" id="line-2298" href="#line-2298"> 2298</a>                                                                            
<a class="line" id="line-2299" href="#line-2299"> 2299</a>                                                                            
<a class="line" id="line-2300" href="#line-2300"> 2300</a>                                                                            
<a class="line" id="line-2301" href="#line-2301"> 2301</a>                                                                            
<a class="line" id="line-2302" href="#line-2302"> 2302</a>                                                                            
<a class="line" id="line-2303" href="#line-2303"> 2303</a>                                                                            
<a class="line" id="line-2304" href="#line-2304"> 2304</a>                                                                            
<a class="line" id="line-2305" href="#line-2305"> 2305</a>                                                                            
<a class="line" id="line-2306" href="#line-2306"> 2306</a>                                                                            
<a class="line" id="line-2307" href="#line-2307"> 2307</a> <span class="grey">Mockapetris                                                    [Page 42]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-43" ></span><a class="line" id="line-2308" href="#line-2308"> 2308</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2309" href="#line-2309"> 2309</a>                                                                            
<a class="line" id="line-2310" href="#line-2310"> 2310</a>                                                                            
<a class="line" id="line-2311" href="#line-2311"> 2311</a> <span class="h4"><a class="selflink" id="section-6.2.3" href="#section-6.2.3">6.2.3</a>. QNAME=SRI-NIC.ARPA, QTYPE=MX</span>                                        
<a class="line" id="line-2312" href="#line-2312"> 2312</a>                                                                            
<a class="line" id="line-2313" href="#line-2313"> 2313</a> This type of query might be result from a mailer trying to look up         
<a class="line" id="line-2314" href="#line-2314"> 2314</a> routing information for the mail destination HOSTMASTER@SRI-NIC.ARPA.      
<a class="line" id="line-2315" href="#line-2315"> 2315</a> The response from C.ISI.EDU would be:                                      
<a class="line" id="line-2316" href="#line-2316"> 2316</a>                                                                            
<a class="line" id="line-2317" href="#line-2317"> 2317</a>                +---------------------------------------------------+       
<a class="line" id="line-2318" href="#line-2318"> 2318</a>     Header     | OPCODE=SQUERY, RESPONSE, AA                       |       
<a class="line" id="line-2319" href="#line-2319"> 2319</a>                +---------------------------------------------------+       
<a class="line" id="line-2320" href="#line-2320"> 2320</a>     Question   | QNAME=SRI-NIC.ARPA., QCLASS=IN, QTYPE=MX          |       
<a class="line" id="line-2321" href="#line-2321"> 2321</a>                +---------------------------------------------------+       
<a class="line" id="line-2322" href="#line-2322"> 2322</a>     Answer     | SRI-NIC.ARPA. 86400 IN     MX      0 SRI-NIC.ARPA.|       
<a class="line" id="line-2323" href="#line-2323"> 2323</a>                +---------------------------------------------------+       
<a class="line" id="line-2324" href="#line-2324"> 2324</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2325" href="#line-2325"> 2325</a>                +---------------------------------------------------+       
<a class="line" id="line-2326" href="#line-2326"> 2326</a>     Additional | SRI-NIC.ARPA. 86400 IN     A       26.0.0.73      |       
<a class="line" id="line-2327" href="#line-2327"> 2327</a>                |                            A       10.0.0.51      |       
<a class="line" id="line-2328" href="#line-2328"> 2328</a>                +---------------------------------------------------+       
<a class="line" id="line-2329" href="#line-2329"> 2329</a>                                                                            
<a class="line" id="line-2330" href="#line-2330"> 2330</a> This response contains the MX RR in the answer section of the response.    
<a class="line" id="line-2331" href="#line-2331"> 2331</a> The additional section contains the address RRs because the name server    
<a class="line" id="line-2332" href="#line-2332"> 2332</a> at C.ISI.EDU guesses that the requester will need the addresses in order   
<a class="line" id="line-2333" href="#line-2333"> 2333</a> to properly use the information carried by the MX.                         
<a class="line" id="line-2334" href="#line-2334"> 2334</a>                                                                            
<a class="line" id="line-2335" href="#line-2335"> 2335</a> <span class="h4"><a class="selflink" id="section-6.2.4" href="#section-6.2.4">6.2.4</a>. QNAME=SRI-NIC.ARPA, QTYPE=NS</span>                                        
<a class="line" id="line-2336" href="#line-2336"> 2336</a>                                                                            
<a class="line" id="line-2337" href="#line-2337"> 2337</a> C.ISI.EDU would reply to this query with:                                  
<a class="line" id="line-2338" href="#line-2338"> 2338</a>                                                                            
<a class="line" id="line-2339" href="#line-2339"> 2339</a>                +---------------------------------------------------+       
<a class="line" id="line-2340" href="#line-2340"> 2340</a>     Header     | OPCODE=SQUERY, RESPONSE, AA                       |       
<a class="line" id="line-2341" href="#line-2341"> 2341</a>                +---------------------------------------------------+       
<a class="line" id="line-2342" href="#line-2342"> 2342</a>     Question   | QNAME=SRI-NIC.ARPA., QCLASS=IN, QTYPE=NS          |       
<a class="line" id="line-2343" href="#line-2343"> 2343</a>                +---------------------------------------------------+       
<a class="line" id="line-2344" href="#line-2344"> 2344</a>     Answer     | &lt;empty&gt;                                           |       
<a class="line" id="line-2345" href="#line-2345"> 2345</a>                +---------------------------------------------------+       
<a class="line" id="line-2346" href="#line-2346"> 2346</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2347" href="#line-2347"> 2347</a>                +---------------------------------------------------+       
<a class="line" id="line-2348" href="#line-2348"> 2348</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2349" href="#line-2349"> 2349</a>                +---------------------------------------------------+       
<a class="line" id="line-2350" href="#line-2350"> 2350</a>                                                                            
<a class="line" id="line-2351" href="#line-2351"> 2351</a> The only difference between the response and the query is the AA and       
<a class="line" id="line-2352" href="#line-2352"> 2352</a> RESPONSE bits in the header.  The interpretation of this response is       
<a class="line" id="line-2353" href="#line-2353"> 2353</a> that the server is authoritative for the name, and the name exists, but    
<a class="line" id="line-2354" href="#line-2354"> 2354</a> no RRs of type NS are present there.                                       
<a class="line" id="line-2355" href="#line-2355"> 2355</a>                                                                            
<a class="line" id="line-2356" href="#line-2356"> 2356</a> <span class="h4"><a class="selflink" id="section-6.2.5" href="#section-6.2.5">6.2.5</a>. QNAME=SIR-NIC.ARPA, QTYPE=A</span>                                         
<a class="line" id="line-2357" href="#line-2357"> 2357</a>                                                                            
<a class="line" id="line-2358" href="#line-2358"> 2358</a> If a user mistyped a host name, we might see this type of query.           
<a class="line" id="line-2359" href="#line-2359"> 2359</a>                                                                            
<a class="line" id="line-2360" href="#line-2360"> 2360</a>                                                                            
<a class="line" id="line-2361" href="#line-2361"> 2361</a>                                                                            
<a class="line" id="line-2362" href="#line-2362"> 2362</a> <span class="grey">Mockapetris                                                    [Page 43]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-44" ></span><a class="line" id="line-2363" href="#line-2363"> 2363</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2364" href="#line-2364"> 2364</a>                                                                            
<a class="line" id="line-2365" href="#line-2365"> 2365</a>                                                                            
<a class="line" id="line-2366" href="#line-2366"> 2366</a> C.ISI.EDU would answer it with:                                            
<a class="line" id="line-2367" href="#line-2367"> 2367</a>                                                                            
<a class="line" id="line-2368" href="#line-2368"> 2368</a>                +---------------------------------------------------+       
<a class="line" id="line-2369" href="#line-2369"> 2369</a>     Header     | OPCODE=SQUERY, RESPONSE, AA, RCODE=NE             |       
<a class="line" id="line-2370" href="#line-2370"> 2370</a>                +---------------------------------------------------+       
<a class="line" id="line-2371" href="#line-2371"> 2371</a>     Question   | QNAME=SIR-NIC.ARPA., QCLASS=IN, QTYPE=A           |       
<a class="line" id="line-2372" href="#line-2372"> 2372</a>                +---------------------------------------------------+       
<a class="line" id="line-2373" href="#line-2373"> 2373</a>     Answer     | &lt;empty&gt;                                           |       
<a class="line" id="line-2374" href="#line-2374"> 2374</a>                +---------------------------------------------------+       
<a class="line" id="line-2375" href="#line-2375"> 2375</a>     Authority  | . SOA SRI-NIC.ARPA. HOSTMASTER.SRI-NIC.ARPA.      |       
<a class="line" id="line-2376" href="#line-2376"> 2376</a>                |       870611 1800 300 604800 86400                |       
<a class="line" id="line-2377" href="#line-2377"> 2377</a>                +---------------------------------------------------+       
<a class="line" id="line-2378" href="#line-2378"> 2378</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2379" href="#line-2379"> 2379</a>                +---------------------------------------------------+       
<a class="line" id="line-2380" href="#line-2380"> 2380</a>                                                                            
<a class="line" id="line-2381" href="#line-2381"> 2381</a> This response states that the name does not exist.  This condition is      
<a class="line" id="line-2382" href="#line-2382"> 2382</a> signalled in the response code (RCODE) section of the header.              
<a class="line" id="line-2383" href="#line-2383"> 2383</a>                                                                            
<a class="line" id="line-2384" href="#line-2384"> 2384</a> The SOA RR in the authority section is the optional negative caching       
<a class="line" id="line-2385" href="#line-2385"> 2385</a> information which allows the resolver using this response to assume that   
<a class="line" id="line-2386" href="#line-2386"> 2386</a> the name will not exist for the SOA MINIMUM (86400) seconds.               
<a class="line" id="line-2387" href="#line-2387"> 2387</a>                                                                            
<a class="line" id="line-2388" href="#line-2388"> 2388</a> <span class="h4"><a class="selflink" id="section-6.2.6" href="#section-6.2.6">6.2.6</a>. QNAME=BRL.MIL, QTYPE=A</span>                                              
<a class="line" id="line-2389" href="#line-2389"> 2389</a>                                                                            
<a class="line" id="line-2390" href="#line-2390"> 2390</a> If this query is sent to C.ISI.EDU, the reply would be:                    
<a class="line" id="line-2391" href="#line-2391"> 2391</a>                                                                            
<a class="line" id="line-2392" href="#line-2392"> 2392</a>                +---------------------------------------------------+       
<a class="line" id="line-2393" href="#line-2393"> 2393</a>     Header     | OPCODE=SQUERY, RESPONSE                           |       
<a class="line" id="line-2394" href="#line-2394"> 2394</a>                +---------------------------------------------------+       
<a class="line" id="line-2395" href="#line-2395"> 2395</a>     Question   | QNAME=BRL.MIL, QCLASS=IN, QTYPE=A                 |       
<a class="line" id="line-2396" href="#line-2396"> 2396</a>                +---------------------------------------------------+       
<a class="line" id="line-2397" href="#line-2397"> 2397</a>     Answer     | &lt;empty&gt;                                           |       
<a class="line" id="line-2398" href="#line-2398"> 2398</a>                +---------------------------------------------------+       
<a class="line" id="line-2399" href="#line-2399"> 2399</a>     Authority  | MIL.             86400 IN NS       SRI-NIC.ARPA.  |       
<a class="line" id="line-2400" href="#line-2400"> 2400</a>                |                  86400    NS       A.ISI.EDU.     |       
<a class="line" id="line-2401" href="#line-2401"> 2401</a>                +---------------------------------------------------+       
<a class="line" id="line-2402" href="#line-2402"> 2402</a>     Additional | A.ISI.EDU.                A        26.3.0.103     |       
<a class="line" id="line-2403" href="#line-2403"> 2403</a>                | SRI-NIC.ARPA.             A        26.0.0.73      |       
<a class="line" id="line-2404" href="#line-2404"> 2404</a>                |                           A        10.0.0.51      |       
<a class="line" id="line-2405" href="#line-2405"> 2405</a>                +---------------------------------------------------+       
<a class="line" id="line-2406" href="#line-2406"> 2406</a>                                                                            
<a class="line" id="line-2407" href="#line-2407"> 2407</a> This response has an empty answer section, but is not authoritative, so    
<a class="line" id="line-2408" href="#line-2408"> 2408</a> it is a referral.  The name server on C.ISI.EDU, realizing that it is      
<a class="line" id="line-2409" href="#line-2409"> 2409</a> not authoritative for the MIL domain, has referred the requester to        
<a class="line" id="line-2410" href="#line-2410"> 2410</a> servers on A.ISI.EDU and SRI-NIC.ARPA, which it knows are authoritative    
<a class="line" id="line-2411" href="#line-2411"> 2411</a> for the MIL domain.                                                        
<a class="line" id="line-2412" href="#line-2412"> 2412</a>                                                                            
<a class="line" id="line-2413" href="#line-2413"> 2413</a>                                                                            
<a class="line" id="line-2414" href="#line-2414"> 2414</a>                                                                            
<a class="line" id="line-2415" href="#line-2415"> 2415</a>                                                                            
<a class="line" id="line-2416" href="#line-2416"> 2416</a>                                                                            
<a class="line" id="line-2417" href="#line-2417"> 2417</a> <span class="grey">Mockapetris                                                    [Page 44]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-45" ></span><a class="line" id="line-2418" href="#line-2418"> 2418</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2419" href="#line-2419"> 2419</a>                                                                            
<a class="line" id="line-2420" href="#line-2420"> 2420</a>                                                                            
<a class="line" id="line-2421" href="#line-2421"> 2421</a> <span class="h4"><a class="selflink" id="section-6.2.7" href="#section-6.2.7">6.2.7</a>. QNAME=USC-ISIC.ARPA, QTYPE=A</span>                                        
<a class="line" id="line-2422" href="#line-2422"> 2422</a>                                                                            
<a class="line" id="line-2423" href="#line-2423"> 2423</a> The response to this query from A.ISI.EDU would be:                        
<a class="line" id="line-2424" href="#line-2424"> 2424</a>                                                                            
<a class="line" id="line-2425" href="#line-2425"> 2425</a>                +---------------------------------------------------+       
<a class="line" id="line-2426" href="#line-2426"> 2426</a>     Header     | OPCODE=SQUERY, RESPONSE, AA                       |       
<a class="line" id="line-2427" href="#line-2427"> 2427</a>                +---------------------------------------------------+       
<a class="line" id="line-2428" href="#line-2428"> 2428</a>     Question   | QNAME=USC-ISIC.ARPA., QCLASS=IN, QTYPE=A          |       
<a class="line" id="line-2429" href="#line-2429"> 2429</a>                +---------------------------------------------------+       
<a class="line" id="line-2430" href="#line-2430"> 2430</a>     Answer     | USC-ISIC.ARPA. 86400 IN CNAME      C.ISI.EDU.     |       
<a class="line" id="line-2431" href="#line-2431"> 2431</a>                | C.ISI.EDU.     86400 IN A          10.0.0.52      |       
<a class="line" id="line-2432" href="#line-2432"> 2432</a>                +---------------------------------------------------+       
<a class="line" id="line-2433" href="#line-2433"> 2433</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2434" href="#line-2434"> 2434</a>                +---------------------------------------------------+       
<a class="line" id="line-2435" href="#line-2435"> 2435</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2436" href="#line-2436"> 2436</a>                +---------------------------------------------------+       
<a class="line" id="line-2437" href="#line-2437"> 2437</a>                                                                            
<a class="line" id="line-2438" href="#line-2438"> 2438</a> Note that the AA bit in the header guarantees that the data matching       
<a class="line" id="line-2439" href="#line-2439"> 2439</a> QNAME is authoritative, but does not say anything about whether the data   
<a class="line" id="line-2440" href="#line-2440"> 2440</a> for C.ISI.EDU is authoritative.  This complete reply is possible because   
<a class="line" id="line-2441" href="#line-2441"> 2441</a> A.ISI.EDU happens to be authoritative for both the ARPA domain where       
<a class="line" id="line-2442" href="#line-2442"> 2442</a> USC-ISIC.ARPA is found and the ISI.EDU domain where C.ISI.EDU data is      
<a class="line" id="line-2443" href="#line-2443"> 2443</a> found.                                                                     
<a class="line" id="line-2444" href="#line-2444"> 2444</a>                                                                            
<a class="line" id="line-2445" href="#line-2445"> 2445</a> If the same query was sent to C.ISI.EDU, its response might be the same    
<a class="line" id="line-2446" href="#line-2446"> 2446</a> as shown above if it had its own address in its cache, but might also      
<a class="line" id="line-2447" href="#line-2447"> 2447</a> be:                                                                        
<a class="line" id="line-2448" href="#line-2448"> 2448</a>                                                                            
<a class="line" id="line-2449" href="#line-2449"> 2449</a>                                                                            
<a class="line" id="line-2450" href="#line-2450"> 2450</a>                                                                            
<a class="line" id="line-2451" href="#line-2451"> 2451</a>                                                                            
<a class="line" id="line-2452" href="#line-2452"> 2452</a>                                                                            
<a class="line" id="line-2453" href="#line-2453"> 2453</a>                                                                            
<a class="line" id="line-2454" href="#line-2454"> 2454</a>                                                                            
<a class="line" id="line-2455" href="#line-2455"> 2455</a>                                                                            
<a class="line" id="line-2456" href="#line-2456"> 2456</a>                                                                            
<a class="line" id="line-2457" href="#line-2457"> 2457</a>                                                                            
<a class="line" id="line-2458" href="#line-2458"> 2458</a>                                                                            
<a class="line" id="line-2459" href="#line-2459"> 2459</a>                                                                            
<a class="line" id="line-2460" href="#line-2460"> 2460</a>                                                                            
<a class="line" id="line-2461" href="#line-2461"> 2461</a>                                                                            
<a class="line" id="line-2462" href="#line-2462"> 2462</a>                                                                            
<a class="line" id="line-2463" href="#line-2463"> 2463</a>                                                                            
<a class="line" id="line-2464" href="#line-2464"> 2464</a>                                                                            
<a class="line" id="line-2465" href="#line-2465"> 2465</a>                                                                            
<a class="line" id="line-2466" href="#line-2466"> 2466</a>                                                                            
<a class="line" id="line-2467" href="#line-2467"> 2467</a>                                                                            
<a class="line" id="line-2468" href="#line-2468"> 2468</a>                                                                            
<a class="line" id="line-2469" href="#line-2469"> 2469</a>                                                                            
<a class="line" id="line-2470" href="#line-2470"> 2470</a>                                                                            
<a class="line" id="line-2471" href="#line-2471"> 2471</a>                                                                            
<a class="line" id="line-2472" href="#line-2472"> 2472</a> <span class="grey">Mockapetris                                                    [Page 45]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-46" ></span><a class="line" id="line-2473" href="#line-2473"> 2473</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2474" href="#line-2474"> 2474</a>                                                                            
<a class="line" id="line-2475" href="#line-2475"> 2475</a>                                                                            
<a class="line" id="line-2476" href="#line-2476"> 2476</a>                +---------------------------------------------------+       
<a class="line" id="line-2477" href="#line-2477"> 2477</a>     Header     | OPCODE=SQUERY, RESPONSE, AA                       |       
<a class="line" id="line-2478" href="#line-2478"> 2478</a>                +---------------------------------------------------+       
<a class="line" id="line-2479" href="#line-2479"> 2479</a>     Question   | QNAME=USC-ISIC.ARPA., QCLASS=IN, QTYPE=A          |       
<a class="line" id="line-2480" href="#line-2480"> 2480</a>                +---------------------------------------------------+       
<a class="line" id="line-2481" href="#line-2481"> 2481</a>     Answer     | USC-ISIC.ARPA.   86400 IN CNAME   C.ISI.EDU.      |       
<a class="line" id="line-2482" href="#line-2482"> 2482</a>                +---------------------------------------------------+       
<a class="line" id="line-2483" href="#line-2483"> 2483</a>     Authority  | ISI.EDU.        172800 IN NS      VAXA.ISI.EDU.   |       
<a class="line" id="line-2484" href="#line-2484"> 2484</a>                |                           NS      A.ISI.EDU.      |       
<a class="line" id="line-2485" href="#line-2485"> 2485</a>                |                           NS      VENERA.ISI.EDU. |       
<a class="line" id="line-2486" href="#line-2486"> 2486</a>                +---------------------------------------------------+       
<a class="line" id="line-2487" href="#line-2487"> 2487</a>     Additional | VAXA.ISI.EDU.   172800    A       10.2.0.27       |       
<a class="line" id="line-2488" href="#line-2488"> 2488</a>                |                 172800    A       128.9.0.33      |       
<a class="line" id="line-2489" href="#line-2489"> 2489</a>                | VENERA.ISI.EDU. 172800    A       10.1.0.52       |       
<a class="line" id="line-2490" href="#line-2490"> 2490</a>                |                 172800    A       128.9.0.32      |       
<a class="line" id="line-2491" href="#line-2491"> 2491</a>                | A.ISI.EDU.      172800    A       26.3.0.103      |       
<a class="line" id="line-2492" href="#line-2492"> 2492</a>                +---------------------------------------------------+       
<a class="line" id="line-2493" href="#line-2493"> 2493</a>                                                                            
<a class="line" id="line-2494" href="#line-2494"> 2494</a> This reply contains an authoritative reply for the alias USC-ISIC.ARPA,    
<a class="line" id="line-2495" href="#line-2495"> 2495</a> plus a referral to the name servers for ISI.EDU.  This sort of reply       
<a class="line" id="line-2496" href="#line-2496"> 2496</a> isn&#x27;t very likely given that the query is for the host name of the name    
<a class="line" id="line-2497" href="#line-2497"> 2497</a> server being asked, but would be common for other aliases.                 
<a class="line" id="line-2498" href="#line-2498"> 2498</a>                                                                            
<a class="line" id="line-2499" href="#line-2499"> 2499</a> <span class="h4"><a class="selflink" id="section-6.2.8" href="#section-6.2.8">6.2.8</a>. QNAME=USC-ISIC.ARPA, QTYPE=CNAME</span>                                    
<a class="line" id="line-2500" href="#line-2500"> 2500</a>                                                                            
<a class="line" id="line-2501" href="#line-2501"> 2501</a> If this query is sent to either A.ISI.EDU or C.ISI.EDU, the reply would    
<a class="line" id="line-2502" href="#line-2502"> 2502</a> be:                                                                        
<a class="line" id="line-2503" href="#line-2503"> 2503</a>                                                                            
<a class="line" id="line-2504" href="#line-2504"> 2504</a>                +---------------------------------------------------+       
<a class="line" id="line-2505" href="#line-2505"> 2505</a>     Header     | OPCODE=SQUERY, RESPONSE, AA                       |       
<a class="line" id="line-2506" href="#line-2506"> 2506</a>                +---------------------------------------------------+       
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err technical heldfordocumentupdate john kristoff"><div class="title"><span class="reference"><a href="#line-2115">line-2115</a> John Kristoff</span><span class="caption"><span id="rfc.erratum.755">(Technical Erratum #<a target='_blank' title='john kristoff (Technical)' href='https://www.rfc-editor.org/errata/eid755'>755</a>) [Held for Document Update]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
Section 6.1. ends this way:

  Relative and absolute domain names may be freely intermixed in a
  master

which is incomplete.  It's unclear exactly how that sentence may have
been intended to end, but minimally I would suggeste it at least
terminated with 'file.'.
</pre></div>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-2507" href="#line-2507"> 2507</a>     Question   | QNAME=USC-ISIC.ARPA., QCLASS=IN, QTYPE=A          |       
<a class="line" id="line-2508" href="#line-2508"> 2508</a>                +---------------------------------------------------+       
<a class="line" id="line-2509" href="#line-2509"> 2509</a>     Answer     | USC-ISIC.ARPA. 86400 IN CNAME      C.ISI.EDU.     |       
<a class="line" id="line-2510" href="#line-2510"> 2510</a>                +---------------------------------------------------+       
<a class="line" id="line-2511" href="#line-2511"> 2511</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2512" href="#line-2512"> 2512</a>                +---------------------------------------------------+       
<a class="line" id="line-2513" href="#line-2513"> 2513</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2514" href="#line-2514"> 2514</a>                +---------------------------------------------------+       
<a class="line" id="line-2515" href="#line-2515"> 2515</a>                                                                            
<a class="line" id="line-2516" href="#line-2516"> 2516</a> Because QTYPE=CNAME, the CNAME RR itself answers the query, and the name   
<a class="line" id="line-2517" href="#line-2517"> 2517</a> server doesn&#x27;t attempt to look up anything for C.ISI.EDU.  (Except         
<a class="line" id="line-2518" href="#line-2518"> 2518</a> possibly for the additional section.)                                      
<a class="line" id="line-2519" href="#line-2519"> 2519</a>                                                                            
<a class="line" id="line-2520" href="#line-2520"> 2520</a> <span class="h3"><a class="selflink" id="section-6.3" href="#section-6.3">6.3</a>. Example resolution</span>                                                    
<a class="line" id="line-2521" href="#line-2521"> 2521</a>                                                                            
<a class="line" id="line-2522" href="#line-2522"> 2522</a> The following examples illustrate the operations a resolver must perform   
<a class="line" id="line-2523" href="#line-2523"> 2523</a> for its client.  We assume that the resolver is starting without a         
<a class="line" id="line-2524" href="#line-2524"> 2524</a>                                                                            
<a class="line" id="line-2525" href="#line-2525"> 2525</a>                                                                            
<a class="line" id="line-2526" href="#line-2526"> 2526</a>                                                                            
<a class="line" id="line-2527" href="#line-2527"> 2527</a> <span class="grey">Mockapetris                                                    [Page 46]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-47" ></span><a class="line" id="line-2528" href="#line-2528"> 2528</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2529" href="#line-2529"> 2529</a>                                                                            
<a class="line" id="line-2530" href="#line-2530"> 2530</a>                                                                            
<a class="line" id="line-2531" href="#line-2531"> 2531</a> cache, as might be the case after system boot.  We further assume that     
<a class="line" id="line-2532" href="#line-2532"> 2532</a> the system is not one of the hosts in the data and that the host is        
<a class="line" id="line-2533" href="#line-2533"> 2533</a> located somewhere on net 26, and that its safety belt (SBELT) data         
<a class="line" id="line-2534" href="#line-2534"> 2534</a> structure has the following information:                                   
<a class="line" id="line-2535" href="#line-2535"> 2535</a>                                                                            
<a class="line" id="line-2536" href="#line-2536"> 2536</a>     Match count = -1                                                       
<a class="line" id="line-2537" href="#line-2537"> 2537</a>     SRI-NIC.ARPA.   26.0.0.73       10.0.0.51                              
<a class="line" id="line-2538" href="#line-2538"> 2538</a>     A.ISI.EDU.      26.3.0.103                                             
<a class="line" id="line-2539" href="#line-2539"> 2539</a>                                                                            
<a class="line" id="line-2540" href="#line-2540"> 2540</a> This information specifies servers to try, their addresses, and a match    
<a class="line" id="line-2541" href="#line-2541"> 2541</a> count of -1, which says that the servers aren&#x27;t very close to the          
<a class="line" id="line-2542" href="#line-2542"> 2542</a> target.  Note that the -1 isn&#x27;t supposed to be an accurate closeness       
<a class="line" id="line-2543" href="#line-2543"> 2543</a> measure, just a value so that later stages of the algorithm will work.     
<a class="line" id="line-2544" href="#line-2544"> 2544</a>                                                                            
<a class="line" id="line-2545" href="#line-2545"> 2545</a> The following examples illustrate the use of a cache, so each example      
<a class="line" id="line-2546" href="#line-2546"> 2546</a> assumes that previous requests have completed.                             
<a class="line" id="line-2547" href="#line-2547"> 2547</a>                                                                            
<a class="line" id="line-2548" href="#line-2548"> 2548</a> <span class="h4"><a class="selflink" id="section-6.3.1" href="#section-6.3.1">6.3.1</a>. Resolve MX for ISI.EDU.</span>                                             
<a class="line" id="line-2549" href="#line-2549"> 2549</a>                                                                            
<a class="line" id="line-2550" href="#line-2550"> 2550</a> Suppose the first request to the resolver comes from the local mailer,     
<a class="line" id="line-2551" href="#line-2551"> 2551</a> which has mail for PVM@ISI.EDU.  The mailer might then ask for type MX     
<a class="line" id="line-2552" href="#line-2552"> 2552</a> RRs for the domain name ISI.EDU.                                           
<a class="line" id="line-2553" href="#line-2553"> 2553</a>                                                                            
<a class="line" id="line-2554" href="#line-2554"> 2554</a> The resolver would look in its cache for MX RRs at ISI.EDU, but the        
<a class="line" id="line-2555" href="#line-2555"> 2555</a> empty cache wouldn&#x27;t be helpful.  The resolver would recognize that it     
<a class="line" id="line-2556" href="#line-2556"> 2556</a> needed to query foreign servers and try to determine the best servers to   
<a class="line" id="line-2557" href="#line-2557"> 2557</a> query.  This search would look for NS RRs for the domains ISI.EDU, EDU,    
<a class="line" id="line-2558" href="#line-2558"> 2558</a> and the root.  These searches of the cache would also fail.  As a last     
<a class="line" id="line-2559" href="#line-2559"> 2559</a> resort, the resolver would use the information from the SBELT, copying     
<a class="line" id="line-2560" href="#line-2560"> 2560</a> it into its SLIST structure.                                               
<a class="line" id="line-2561" href="#line-2561"> 2561</a>                                                                            
<a class="line" id="line-2562" href="#line-2562"> 2562</a> At this point the resolver would need to pick one of the three available   
<a class="line" id="line-2563" href="#line-2563"> 2563</a> addresses to try.  Given that the resolver is on net 26, it should         
<a class="line" id="line-2564" href="#line-2564"> 2564</a> choose either 26.0.0.73 or 26.3.0.103 as its first choice.  It would       
<a class="line" id="line-2565" href="#line-2565"> 2565</a> then send off a query of the form:                                         
<a class="line" id="line-2566" href="#line-2566"> 2566</a>                                                                            
<a class="line" id="line-2567" href="#line-2567"> 2567</a>                                                                            
<a class="line" id="line-2568" href="#line-2568"> 2568</a>                                                                            
<a class="line" id="line-2569" href="#line-2569"> 2569</a>                                                                            
<a class="line" id="line-2570" href="#line-2570"> 2570</a>                                                                            
<a class="line" id="line-2571" href="#line-2571"> 2571</a>                                                                            
<a class="line" id="line-2572" href="#line-2572"> 2572</a>                                                                            
<a class="line" id="line-2573" href="#line-2573"> 2573</a>                                                                            
<a class="line" id="line-2574" href="#line-2574"> 2574</a>                                                                            
<a class="line" id="line-2575" href="#line-2575"> 2575</a>                                                                            
<a class="line" id="line-2576" href="#line-2576"> 2576</a>                                                                            
<a class="line" id="line-2577" href="#line-2577"> 2577</a>                                                                            
<a class="line" id="line-2578" href="#line-2578"> 2578</a>                                                                            
<a class="line" id="line-2579" href="#line-2579"> 2579</a>                                                                            
<a class="line" id="line-2580" href="#line-2580"> 2580</a>                                                                            
<a class="line" id="line-2581" href="#line-2581"> 2581</a>                                                                            
<a class="line" id="line-2582" href="#line-2582"> 2582</a> <span class="grey">Mockapetris                                                    [Page 47]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-48" ></span><a class="line" id="line-2583" href="#line-2583"> 2583</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2584" href="#line-2584"> 2584</a>                                                                            
<a class="line" id="line-2585" href="#line-2585"> 2585</a>                                                                            
<a class="line" id="line-2586" href="#line-2586"> 2586</a>                +---------------------------------------------------+       
<a class="line" id="line-2587" href="#line-2587"> 2587</a>     Header     | OPCODE=SQUERY                                     |       
<a class="line" id="line-2588" href="#line-2588"> 2588</a>                +---------------------------------------------------+       
<a class="line" id="line-2589" href="#line-2589"> 2589</a>     Question   | QNAME=ISI.EDU., QCLASS=IN, QTYPE=MX               |       
<a class="line" id="line-2590" href="#line-2590"> 2590</a>                +---------------------------------------------------+       
<a class="line" id="line-2591" href="#line-2591"> 2591</a>     Answer     | &lt;empty&gt;                                           |       
<a class="line" id="line-2592" href="#line-2592"> 2592</a>                +---------------------------------------------------+       
<a class="line" id="line-2593" href="#line-2593"> 2593</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2594" href="#line-2594"> 2594</a>                +---------------------------------------------------+       
<a class="line" id="line-2595" href="#line-2595"> 2595</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2596" href="#line-2596"> 2596</a>                +---------------------------------------------------+       
<a class="line" id="line-2597" href="#line-2597"> 2597</a>                                                                            
<a class="line" id="line-2598" href="#line-2598"> 2598</a> The resolver would then wait for a response to its query or a timeout.     
<a class="line" id="line-2599" href="#line-2599"> 2599</a> If the timeout occurs, it would try different servers, then different      
<a class="line" id="line-2600" href="#line-2600"> 2600</a> addresses of the same servers, lastly retrying addresses already tried.    
<a class="line" id="line-2601" href="#line-2601"> 2601</a> It might eventually receive a reply from SRI-NIC.ARPA:                     
<a class="line" id="line-2602" href="#line-2602"> 2602</a>                                                                            
<a class="line" id="line-2603" href="#line-2603"> 2603</a>                +---------------------------------------------------+       
<a class="line" id="line-2604" href="#line-2604"> 2604</a>     Header     | OPCODE=SQUERY, RESPONSE                           |       
<a class="line" id="line-2605" href="#line-2605"> 2605</a>                +---------------------------------------------------+       
<a class="line" id="line-2606" href="#line-2606"> 2606</a>     Question   | QNAME=ISI.EDU., QCLASS=IN, QTYPE=MX               |       
<a class="line" id="line-2607" href="#line-2607"> 2607</a>                +---------------------------------------------------+       
<a class="line" id="line-2608" href="#line-2608"> 2608</a>     Answer     | &lt;empty&gt;                                           |       
<a class="line" id="line-2609" href="#line-2609"> 2609</a>                +---------------------------------------------------+       
<a class="line" id="line-2610" href="#line-2610"> 2610</a>     Authority  | ISI.EDU.        172800 IN NS       VAXA.ISI.EDU.  |       
<a class="line" id="line-2611" href="#line-2611"> 2611</a>                |                           NS       A.ISI.EDU.     |       
<a class="line" id="line-2612" href="#line-2612"> 2612</a>                |                           NS       VENERA.ISI.EDU.|       
<a class="line" id="line-2613" href="#line-2613"> 2613</a>                +---------------------------------------------------+       
<a class="line" id="line-2614" href="#line-2614"> 2614</a>     Additional | VAXA.ISI.EDU.   172800    A        10.2.0.27      |       
<a class="line" id="line-2615" href="#line-2615"> 2615</a>                |                 172800    A        128.9.0.33     |       
<a class="line" id="line-2616" href="#line-2616"> 2616</a>                | VENERA.ISI.EDU. 172800    A        10.1.0.52      |       
<a class="line" id="line-2617" href="#line-2617"> 2617</a>                |                 172800    A        128.9.0.32     |       
<a class="line" id="line-2618" href="#line-2618"> 2618</a>                | A.ISI.EDU.      172800    A        26.3.0.103     |       
<a class="line" id="line-2619" href="#line-2619"> 2619</a>                +---------------------------------------------------+       
<a class="line" id="line-2620" href="#line-2620"> 2620</a>                                                                            
<a class="line" id="line-2621" href="#line-2621"> 2621</a> The resolver would notice that the information in the response gave a      
<a class="line" id="line-2622" href="#line-2622"> 2622</a> closer delegation to ISI.EDU than its existing SLIST (since it matches     
<a class="line" id="line-2623" href="#line-2623"> 2623</a> three labels).  The resolver would then cache the information in this      
<a class="line" id="line-2624" href="#line-2624"> 2624</a> response and use it to set up a new SLIST:                                 
<a class="line" id="line-2625" href="#line-2625"> 2625</a>                                                                            
<a class="line" id="line-2626" href="#line-2626"> 2626</a>     Match count = 3                                                        
<a class="line" id="line-2627" href="#line-2627"> 2627</a>     A.ISI.EDU.      26.3.0.103                                             
<a class="line" id="line-2628" href="#line-2628"> 2628</a>     VAXA.ISI.EDU.   10.2.0.27       128.9.0.33                             
<a class="line" id="line-2629" href="#line-2629"> 2629</a>     VENERA.ISI.EDU. 10.1.0.52       128.9.0.32                             
<a class="line" id="line-2630" href="#line-2630"> 2630</a>                                                                            
<a class="line" id="line-2631" href="#line-2631"> 2631</a> A.ISI.EDU appears on this list as well as the previous one, but that is    
<a class="line" id="line-2632" href="#line-2632"> 2632</a> purely coincidental.  The resolver would again start transmitting and      
<a class="line" id="line-2633" href="#line-2633"> 2633</a> waiting for responses.  Eventually it would get an answer:                 
<a class="line" id="line-2634" href="#line-2634"> 2634</a>                                                                            
<a class="line" id="line-2635" href="#line-2635"> 2635</a>                                                                            
<a class="line" id="line-2636" href="#line-2636"> 2636</a>                                                                            
<a class="line" id="line-2637" href="#line-2637"> 2637</a> <span class="grey">Mockapetris                                                    [Page 48]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-49" ></span><a class="line" id="line-2638" href="#line-2638"> 2638</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2639" href="#line-2639"> 2639</a>                                                                            
<a class="line" id="line-2640" href="#line-2640"> 2640</a>                                                                            
<a class="line" id="line-2641" href="#line-2641"> 2641</a>                +---------------------------------------------------+       
<a class="line" id="line-2642" href="#line-2642"> 2642</a>     Header     | OPCODE=SQUERY, RESPONSE, AA                       |       
<a class="line" id="line-2643" href="#line-2643"> 2643</a>                +---------------------------------------------------+       
<a class="line" id="line-2644" href="#line-2644"> 2644</a>     Question   | QNAME=ISI.EDU., QCLASS=IN, QTYPE=MX               |       
<a class="line" id="line-2645" href="#line-2645"> 2645</a>                +---------------------------------------------------+       
<a class="line" id="line-2646" href="#line-2646"> 2646</a>     Answer     | ISI.EDU.                MX 10 VENERA.ISI.EDU.     |       
<a class="line" id="line-2647" href="#line-2647"> 2647</a>                |                         MX 20 VAXA.ISI.EDU.       |       
<a class="line" id="line-2648" href="#line-2648"> 2648</a>                +---------------------------------------------------+       
<a class="line" id="line-2649" href="#line-2649"> 2649</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2650" href="#line-2650"> 2650</a>                +---------------------------------------------------+       
<a class="line" id="line-2651" href="#line-2651"> 2651</a>     Additional | VAXA.ISI.EDU.   172800  A  10.2.0.27              |       
<a class="line" id="line-2652" href="#line-2652"> 2652</a>                |                 172800  A  128.9.0.33             |       
<a class="line" id="line-2653" href="#line-2653"> 2653</a>                | VENERA.ISI.EDU. 172800  A  10.1.0.52              |       
<a class="line" id="line-2654" href="#line-2654"> 2654</a>                |                 172800  A  128.9.0.32             |       
<a class="line" id="line-2655" href="#line-2655"> 2655</a>                +---------------------------------------------------+       
<a class="line" id="line-2656" href="#line-2656"> 2656</a>                                                                            
<a class="line" id="line-2657" href="#line-2657"> 2657</a> The resolver would add this information to its cache, and return the MX    
<a class="line" id="line-2658" href="#line-2658"> 2658</a> RRs to its client.                                                         
<a class="line" id="line-2659" href="#line-2659"> 2659</a>                                                                            
<a class="line" id="line-2660" href="#line-2660"> 2660</a> <span class="h4"><a class="selflink" id="section-6.3.2" href="#section-6.3.2">6.3.2</a>. Get the host name for address 26.6.0.65</span>                             
<a class="line" id="line-2661" href="#line-2661"> 2661</a>                                                                            
<a class="line" id="line-2662" href="#line-2662"> 2662</a> The resolver would translate this into a request for PTR RRs for           
<a class="line" id="line-2663" href="#line-2663"> 2663</a> 65.0.6.26.IN-ADDR.ARPA.  This information is not in the cache, so the      
<a class="line" id="line-2664" href="#line-2664"> 2664</a> resolver would look for foreign servers to ask.  No servers would match,   
<a class="line" id="line-2665" href="#line-2665"> 2665</a> so it would use SBELT again.  (Note that the servers for the ISI.EDU       
<a class="line" id="line-2666" href="#line-2666"> 2666</a> domain are in the cache, but ISI.EDU is not an ancestor of                 
<a class="line" id="line-2667" href="#line-2667"> 2667</a> 65.0.6.26.IN-ADDR.ARPA, so the SBELT is used.)                             
<a class="line" id="line-2668" href="#line-2668"> 2668</a>                                                                            
<a class="line" id="line-2669" href="#line-2669"> 2669</a> Since this request is within the authoritative data of both servers in     
<a class="line" id="line-2670" href="#line-2670"> 2670</a> SBELT, eventually one would return:                                        
<a class="line" id="line-2671" href="#line-2671"> 2671</a>                                                                            
<a class="line" id="line-2672" href="#line-2672"> 2672</a>                                                                            
<a class="line" id="line-2673" href="#line-2673"> 2673</a>                                                                            
<a class="line" id="line-2674" href="#line-2674"> 2674</a>                                                                            
<a class="line" id="line-2675" href="#line-2675"> 2675</a>                                                                            
<a class="line" id="line-2676" href="#line-2676"> 2676</a>                                                                            
<a class="line" id="line-2677" href="#line-2677"> 2677</a>                                                                            
<a class="line" id="line-2678" href="#line-2678"> 2678</a>                                                                            
<a class="line" id="line-2679" href="#line-2679"> 2679</a>                                                                            
<a class="line" id="line-2680" href="#line-2680"> 2680</a>                                                                            
<a class="line" id="line-2681" href="#line-2681"> 2681</a>                                                                            
<a class="line" id="line-2682" href="#line-2682"> 2682</a>                                                                            
<a class="line" id="line-2683" href="#line-2683"> 2683</a>                                                                            
<a class="line" id="line-2684" href="#line-2684"> 2684</a>                                                                            
<a class="line" id="line-2685" href="#line-2685"> 2685</a>                                                                            
<a class="line" id="line-2686" href="#line-2686"> 2686</a>                                                                            
<a class="line" id="line-2687" href="#line-2687"> 2687</a>                                                                            
<a class="line" id="line-2688" href="#line-2688"> 2688</a>                                                                            
<a class="line" id="line-2689" href="#line-2689"> 2689</a>                                                                            
<a class="line" id="line-2690" href="#line-2690"> 2690</a>                                                                            
<a class="line" id="line-2691" href="#line-2691"> 2691</a>                                                                            
<a class="line" id="line-2692" href="#line-2692"> 2692</a> <span class="grey">Mockapetris                                                    [Page 49]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-50" ></span><a class="line" id="line-2693" href="#line-2693"> 2693</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2694" href="#line-2694"> 2694</a>                                                                            
<a class="line" id="line-2695" href="#line-2695"> 2695</a>                                                                            
<a class="line" id="line-2696" href="#line-2696"> 2696</a>                +---------------------------------------------------+       
<a class="line" id="line-2697" href="#line-2697"> 2697</a>     Header     | OPCODE=SQUERY, RESPONSE, AA                       |       
<a class="line" id="line-2698" href="#line-2698"> 2698</a>                +---------------------------------------------------+       
<a class="line" id="line-2699" href="#line-2699"> 2699</a>     Question   | QNAME=65.0.6.26.IN-ADDR.ARPA.,QCLASS=IN,QTYPE=PTR |       
<a class="line" id="line-2700" href="#line-2700"> 2700</a>                +---------------------------------------------------+       
<a class="line" id="line-2701" href="#line-2701"> 2701</a>     Answer     | 65.0.6.26.IN-ADDR.ARPA.    PTR     ACC.ARPA.      |       
<a class="line" id="line-2702" href="#line-2702"> 2702</a>                +---------------------------------------------------+       
<a class="line" id="line-2703" href="#line-2703"> 2703</a>     Authority  | &lt;empty&gt;                                           |       
<a class="line" id="line-2704" href="#line-2704"> 2704</a>                +---------------------------------------------------+       
<a class="line" id="line-2705" href="#line-2705"> 2705</a>     Additional | &lt;empty&gt;                                           |       
<a class="line" id="line-2706" href="#line-2706"> 2706</a>                +---------------------------------------------------+       
<a class="line" id="line-2707" href="#line-2707"> 2707</a>                                                                            
<a class="line" id="line-2708" href="#line-2708"> 2708</a> <span class="h4"><a class="selflink" id="section-6.3.3" href="#section-6.3.3">6.3.3</a>. Get the host address of poneria.ISI.EDU</span>                             
<a class="line" id="line-2709" href="#line-2709"> 2709</a>                                                                            
<a class="line" id="line-2710" href="#line-2710"> 2710</a> This request would translate into a type A request for poneria.ISI.EDU.    
<a class="line" id="line-2711" href="#line-2711"> 2711</a> The resolver would not find any cached data for this name, but would       
<a class="line" id="line-2712" href="#line-2712"> 2712</a> find the NS RRs in the cache for ISI.EDU when it looks for foreign         
<a class="line" id="line-2713" href="#line-2713"> 2713</a> servers to ask.  Using this data, it would construct a SLIST of the        
<a class="line" id="line-2714" href="#line-2714"> 2714</a> form:                                                                      
<a class="line" id="line-2715" href="#line-2715"> 2715</a>                                                                            
<a class="line" id="line-2716" href="#line-2716"> 2716</a>     Match count = 3                                                        
<a class="line" id="line-2717" href="#line-2717"> 2717</a>                                                                            
<a class="line" id="line-2718" href="#line-2718"> 2718</a>     A.ISI.EDU.      26.3.0.103                                             
<a class="line" id="line-2719" href="#line-2719"> 2719</a>     VAXA.ISI.EDU.   10.2.0.27       128.9.0.33                             
<a class="line" id="line-2720" href="#line-2720"> 2720</a>     VENERA.ISI.EDU. 10.1.0.52                                              
<a class="line" id="line-2721" href="#line-2721"> 2721</a>                                                                            
<a class="line" id="line-2722" href="#line-2722"> 2722</a> A.ISI.EDU is listed first on the assumption that the resolver orders its   
<a class="line" id="line-2723" href="#line-2723"> 2723</a> choices by preference, and A.ISI.EDU is on the same network.               
<a class="line" id="line-2724" href="#line-2724"> 2724</a>                                                                            
<a class="line" id="line-2725" href="#line-2725"> 2725</a> One of these servers would answer the query.                               
<a class="line" id="line-2726" href="#line-2726"> 2726</a>                                                                            
<a class="line" id="line-2727" href="#line-2727"> 2727</a> <span class="h2"><a class="selflink" id="section-7" href="#section-7">7</a>. REFERENCES and BIBLIOGRAPHY</span>                                             
<a class="line" id="line-2728" href="#line-2728"> 2728</a>                                                                            
<a class="line" id="line-2729" href="#line-2729"> 2729</a> [Dyer 87]       Dyer, S., and F. Hsu, &quot;Hesiod&quot;, Project Athena             
<a class="line" id="line-2730" href="#line-2730"> 2730</a>                 Technical Plan - Name Service, April 1987, version 1.9.    
<a class="line" id="line-2731" href="#line-2731"> 2731</a>                                                                            
<a class="line" id="line-2732" href="#line-2732"> 2732</a>                 Describes the fundamentals of the Hesiod name service.     
<a class="line" id="line-2733" href="#line-2733"> 2733</a>                                                                            
<a class="line" id="line-2734" href="#line-2734"> 2734</a> [<a id="ref-IEN-116">IEN-116</a>]       J. Postel, &quot;Internet Name Server&quot;, IEN-116,                
<a class="line" id="line-2735" href="#line-2735"> 2735</a>                 USC/Information Sciences Institute, August 1979.           
<a class="line" id="line-2736" href="#line-2736"> 2736</a>                                                                            
<a class="line" id="line-2737" href="#line-2737"> 2737</a>                 A name service obsoleted by the Domain Name System, but    
<a class="line" id="line-2738" href="#line-2738"> 2738</a>                 still in use.                                              
<a class="line" id="line-2739" href="#line-2739"> 2739</a>                                                                            
<a class="line" id="line-2740" href="#line-2740"> 2740</a>                                                                            
<a class="line" id="line-2741" href="#line-2741"> 2741</a>                                                                            
<a class="line" id="line-2742" href="#line-2742"> 2742</a>                                                                            
<a class="line" id="line-2743" href="#line-2743"> 2743</a>                                                                            
<a class="line" id="line-2744" href="#line-2744"> 2744</a>                                                                            
<a class="line" id="line-2745" href="#line-2745"> 2745</a>                                                                            
<a class="line" id="line-2746" href="#line-2746"> 2746</a>                                                                            
<a class="line" id="line-2747" href="#line-2747"> 2747</a> <span class="grey">Mockapetris                                                    [Page 50]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-51" ></span><a class="line" id="line-2748" href="#line-2748"> 2748</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2749" href="#line-2749"> 2749</a>                                                                            
<a class="line" id="line-2750" href="#line-2750"> 2750</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err technical heldfordocumentupdate john kristoff"><div class="title"><span class="reference"><a href="#line-2507">line-2507</a> John Kristoff</span><span class="caption"><span id="rfc.erratum.755.1">(Technical Erratum #<a target='_blank' title='john kristoff (Technical)' href='https://www.rfc-editor.org/errata/eid755'>755</a>) [Held for Document Update]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
Section 6.2.8. in the diagram shows 'QTYPE=A', but should be of
type 'CNAME' based on the context of the example.
</pre></div>
<div class='correct'>It should say:<pre>
[see above]
</pre></div>
</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-2751" href="#line-2751"> 2751</a> [Quarterman 86] Quarterman, J., and J. Hoskins, &quot;Notable Computer          
<a class="line" id="line-2752" href="#line-2752"> 2752</a>                 Networks&quot;,Communications of the ACM, October 1986,         
<a class="line" id="line-2753" href="#line-2753"> 2753</a>                 volume 29, number 10.                                      
<a class="line" id="line-2754" href="#line-2754"> 2754</a>                                                                            
<a class="line" id="line-2755" href="#line-2755"> 2755</a> [<a id="ref-RFC-742">RFC-742</a>]       K. Harrenstien, &quot;NAME/FINGER&quot;, <a href="https://datatracker.ietf.org/doc/rfc742/">RFC-742</a>, Network            
<a class="line" id="line-2756" href="#line-2756"> 2756</a>                 Information Center, SRI International, December 1977.      
<a class="line" id="line-2757" href="#line-2757"> 2757</a>                                                                            
<a class="line" id="line-2758" href="#line-2758"> 2758</a> [<a id="ref-RFC-768">RFC-768</a>]       J. Postel, &quot;User Datagram Protocol&quot;, <a href="https://datatracker.ietf.org/doc/rfc768/">RFC-768</a>,              
<a class="line" id="line-2759" href="#line-2759"> 2759</a>                 USC/Information Sciences Institute, August 1980.           
<a class="line" id="line-2760" href="#line-2760"> 2760</a>                                                                            
<a class="line" id="line-2761" href="#line-2761"> 2761</a> [<a id="ref-RFC-793">RFC-793</a>]       J. Postel, &quot;Transmission Control Protocol&quot;, <a href="https://datatracker.ietf.org/doc/rfc793/">RFC-793</a>,       
<a class="line" id="line-2762" href="#line-2762"> 2762</a>                 USC/Information Sciences Institute, September 1981.        
<a class="line" id="line-2763" href="#line-2763"> 2763</a>                                                                            
<a class="line" id="line-2764" href="#line-2764"> 2764</a> [<a id="ref-RFC-799">RFC-799</a>]       D. Mills, &quot;Internet Name Domains&quot;, <a href="https://datatracker.ietf.org/doc/rfc799/">RFC-799</a>, COMSAT,        
<a class="line" id="line-2765" href="#line-2765"> 2765</a>                 September 1981.                                            
<a class="line" id="line-2766" href="#line-2766"> 2766</a>                                                                            
<a class="line" id="line-2767" href="#line-2767"> 2767</a>                 Suggests introduction of a hierarchy in place of a flat    
<a class="line" id="line-2768" href="#line-2768"> 2768</a>                 name space for the Internet.                               
<a class="line" id="line-2769" href="#line-2769"> 2769</a>                                                                            
<a class="line" id="line-2770" href="#line-2770"> 2770</a> [<a id="ref-RFC-805">RFC-805</a>]       J. Postel, &quot;Computer Mail Meeting Notes&quot;, <a href="https://datatracker.ietf.org/doc/rfc805/">RFC-805</a>,         
<a class="line" id="line-2771" href="#line-2771"> 2771</a>                 USC/Information Sciences Institute, February 1982.         
<a class="line" id="line-2772" href="#line-2772"> 2772</a>                                                                            
<a class="line" id="line-2773" href="#line-2773"> 2773</a> [<a id="ref-RFC-810">RFC-810</a>]       E. Feinler, K. Harrenstien, Z. Su, and V. White, &quot;DOD      
<a class="line" id="line-2774" href="#line-2774"> 2774</a>                 Internet Host Table Specification&quot;, <a href="https://datatracker.ietf.org/doc/rfc810/">RFC-810</a>, Network       
<a class="line" id="line-2775" href="#line-2775"> 2775</a>                 Information Center, SRI International, March 1982.         
<a class="line" id="line-2776" href="#line-2776"> 2776</a>                                                                            
<a class="line" id="line-2777" href="#line-2777"> 2777</a>                 Obsolete.  See <a href="https://datatracker.ietf.org/doc/rfc952/">RFC-952</a>.                                    
<a class="line" id="line-2778" href="#line-2778"> 2778</a>                                                                            
<a class="line" id="line-2779" href="#line-2779"> 2779</a> [<a id="ref-RFC-811">RFC-811</a>]       K. Harrenstien, V. White, and E. Feinler, &quot;Hostnames       
<a class="line" id="line-2780" href="#line-2780"> 2780</a>                 Server&quot;, <a href="https://datatracker.ietf.org/doc/rfc811/">RFC-811</a>, Network Information Center, SRI          
<a class="line" id="line-2781" href="#line-2781"> 2781</a>                 International, March 1982.                                 
<a class="line" id="line-2782" href="#line-2782"> 2782</a>                                                                            
<a class="line" id="line-2783" href="#line-2783"> 2783</a>                 Obsolete.  See <a href="https://datatracker.ietf.org/doc/rfc953/">RFC-953</a>.                                    
<a class="line" id="line-2784" href="#line-2784"> 2784</a>                                                                            
<a class="line" id="line-2785" href="#line-2785"> 2785</a> [<a id="ref-RFC-812">RFC-812</a>]       K. Harrenstien, and V. White, &quot;NICNAME/WHOIS&quot;, <a href="https://datatracker.ietf.org/doc/rfc812/">RFC-812</a>,    
<a class="line" id="line-2786" href="#line-2786"> 2786</a>                 Network Information Center, SRI International, March       
<a class="line" id="line-2787" href="#line-2787"> 2787</a>                 1982.                                                      
<a class="line" id="line-2788" href="#line-2788"> 2788</a>                                                                            
<a class="line" id="line-2789" href="#line-2789"> 2789</a> [<a id="ref-RFC-819">RFC-819</a>]       Z. Su, and J. Postel, &quot;The Domain Naming Convention for    
<a class="line" id="line-2790" href="#line-2790"> 2790</a>                 Internet User Applications&quot;, <a href="https://datatracker.ietf.org/doc/rfc819/">RFC-819</a>, Network              
<a class="line" id="line-2791" href="#line-2791"> 2791</a>                 Information Center, SRI International, August 1982.        
<a class="line" id="line-2792" href="#line-2792"> 2792</a>                                                                            
<a class="line" id="line-2793" href="#line-2793"> 2793</a>                 Early thoughts on the design of the domain system.         
<a class="line" id="line-2794" href="#line-2794"> 2794</a>                 Current implementation is completely different.            
<a class="line" id="line-2795" href="#line-2795"> 2795</a>                                                                            
<a class="line" id="line-2796" href="#line-2796"> 2796</a> [<a id="ref-RFC-821">RFC-821</a>]       J. Postel, &quot;Simple Mail Transfer Protocol&quot;, <a href="https://datatracker.ietf.org/doc/rfc821/">RFC-821</a>,       
<a class="line" id="line-2797" href="#line-2797"> 2797</a>                 USC/Information Sciences Institute, August 1980.           
<a class="line" id="line-2798" href="#line-2798"> 2798</a>                                                                            
<a class="line" id="line-2799" href="#line-2799"> 2799</a>                                                                            
<a class="line" id="line-2800" href="#line-2800"> 2800</a>                                                                            
<a class="line" id="line-2801" href="#line-2801"> 2801</a>                                                                            
<a class="line" id="line-2802" href="#line-2802"> 2802</a> <span class="grey">Mockapetris                                                    [Page 51]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-52" ></span><a class="line" id="line-2803" href="#line-2803"> 2803</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2804" href="#line-2804"> 2804</a>                                                                            
<a class="line" id="line-2805" href="#line-2805"> 2805</a>                                                                            
<a class="line" id="line-2806" href="#line-2806"> 2806</a> [<a id="ref-RFC-830">RFC-830</a>]       Z. Su, &quot;A Distributed System for Internet Name Service&quot;,   
<a class="line" id="line-2807" href="#line-2807"> 2807</a>                 <a href="https://datatracker.ietf.org/doc/rfc830/">RFC-830</a>, Network Information Center, SRI International,    
<a class="line" id="line-2808" href="#line-2808"> 2808</a>                 October 1982.                                              
<a class="line" id="line-2809" href="#line-2809"> 2809</a>                                                                            
<a class="line" id="line-2810" href="#line-2810"> 2810</a>                 Early thoughts on the design of the domain system.         
<a class="line" id="line-2811" href="#line-2811"> 2811</a>                 Current implementation is completely different.            
<a class="line" id="line-2812" href="#line-2812"> 2812</a>                                                                            
</span></pre>
<div class="annotation"><div onclick="clicked(this)" class="err editorial verified ivan panchenko"><div class="title"><span class="reference"><a href="#line-2751">line-2751</a> Ivan Panchenko</span><span class="caption"><span id="rfc.erratum.6461">(Editorial Erratum #<a target='_blank' title='ivan panchenko (Editorial)' href='https://www.rfc-editor.org/errata/eid6461'>6461</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
                Networks",Communications of the ACM, October 1986,
</pre></div>
<div class='correct'>It should say:<pre>
                Networks",<ins> </ins>Communications of the ACM, October 1986,

</pre></div>
<hr/>
<div class='note'>
Missing space.
</div>

</div></div></div></div>

<div class="area">
<pre class="rfc"><span class="rfc"><a class="line" id="line-2813" href="#line-2813"> 2813</a> [<a id="ref-RFC-882">RFC-882</a>]       P. Mockapetris, &quot;Domain names - Concepts and               
<a class="line" id="line-2814" href="#line-2814"> 2814</a>                 Facilities,&quot; <a href="https://datatracker.ietf.org/doc/rfc882/">RFC-882</a>, USC/Information Sciences             
<a class="line" id="line-2815" href="#line-2815"> 2815</a>                 Institute, November 1983.                                  
<a class="line" id="line-2816" href="#line-2816"> 2816</a>                                                                            
<a class="line" id="line-2817" href="#line-2817"> 2817</a>                 Superceeded by this memo.                                  
<a class="line" id="line-2818" href="#line-2818"> 2818</a>                                                                            
<a class="line" id="line-2819" href="#line-2819"> 2819</a> [<a id="ref-RFC-883">RFC-883</a>]       P. Mockapetris, &quot;Domain names - Implementation and         
<a class="line" id="line-2820" href="#line-2820"> 2820</a>                 Specification,&quot; <a href="https://datatracker.ietf.org/doc/rfc883/">RFC-883</a>, USC/Information Sciences          
<a class="line" id="line-2821" href="#line-2821"> 2821</a>                 Institute, November 1983.                                  
<a class="line" id="line-2822" href="#line-2822"> 2822</a>                                                                            
<a class="line" id="line-2823" href="#line-2823"> 2823</a>                 Superceeded by this memo.                                  
<a class="line" id="line-2824" href="#line-2824"> 2824</a>                                                                            
<a class="line" id="line-2825" href="#line-2825"> 2825</a> [<a id="ref-RFC-920">RFC-920</a>]       J. Postel and J. Reynolds, &quot;Domain Requirements&quot;,          
<a class="line" id="line-2826" href="#line-2826"> 2826</a>                 <a href="https://datatracker.ietf.org/doc/rfc920/">RFC-920</a>, USC/Information Sciences Institute                
<a class="line" id="line-2827" href="#line-2827"> 2827</a>                 October 1984.                                              
<a class="line" id="line-2828" href="#line-2828"> 2828</a>                                                                            
<a class="line" id="line-2829" href="#line-2829"> 2829</a>                 Explains the naming scheme for top level domains.          
<a class="line" id="line-2830" href="#line-2830"> 2830</a>                                                                            
<a class="line" id="line-2831" href="#line-2831"> 2831</a> [<a id="ref-RFC-952">RFC-952</a>]       K. Harrenstien, M. Stahl, E. Feinler, &quot;DoD Internet Host   
<a class="line" id="line-2832" href="#line-2832"> 2832</a>                 Table Specification&quot;, <a href="https://datatracker.ietf.org/doc/rfc952/">RFC-952</a>, SRI, October 1985.          
<a class="line" id="line-2833" href="#line-2833"> 2833</a>                                                                            
<a class="line" id="line-2834" href="#line-2834"> 2834</a>                 Specifies the format of HOSTS.TXT, the host/address        
<a class="line" id="line-2835" href="#line-2835"> 2835</a>                 table replaced by the DNS.                                 
<a class="line" id="line-2836" href="#line-2836"> 2836</a>                                                                            
<a class="line" id="line-2837" href="#line-2837"> 2837</a> [<a id="ref-RFC-953">RFC-953</a>]       K. Harrenstien, M. Stahl, E. Feinler, &quot;HOSTNAME Server&quot;,   
<a class="line" id="line-2838" href="#line-2838"> 2838</a>                 <a href="https://datatracker.ietf.org/doc/rfc953/">RFC-953</a>, SRI, October 1985.                                
<a class="line" id="line-2839" href="#line-2839"> 2839</a>                                                                            
<a class="line" id="line-2840" href="#line-2840"> 2840</a>                 This RFC contains the official specification of the        
<a class="line" id="line-2841" href="#line-2841"> 2841</a>                 hostname server protocol, which is obsoleted by the DNS.   
<a class="line" id="line-2842" href="#line-2842"> 2842</a>                 This TCP based protocol accesses information stored in     
<a class="line" id="line-2843" href="#line-2843"> 2843</a>                 the <a href="https://datatracker.ietf.org/doc/rfc952/">RFC-952</a> format, and is used to obtain copies of the    
<a class="line" id="line-2844" href="#line-2844"> 2844</a>                 host table.                                                
<a class="line" id="line-2845" href="#line-2845"> 2845</a>                                                                            
<a class="line" id="line-2846" href="#line-2846"> 2846</a> [<a id="ref-RFC-973">RFC-973</a>]       P. Mockapetris, &quot;Domain System Changes and                 
<a class="line" id="line-2847" href="#line-2847"> 2847</a>                 Observations&quot;, <a href="https://datatracker.ietf.org/doc/rfc973/">RFC-973</a>, USC/Information Sciences           
<a class="line" id="line-2848" href="#line-2848"> 2848</a>                 Institute, January 1986.                                   
<a class="line" id="line-2849" href="#line-2849"> 2849</a>                                                                            
<a class="line" id="line-2850" href="#line-2850"> 2850</a>                 Describes changes to <a href="https://datatracker.ietf.org/doc/rfc882/">RFC-882</a> and <a href="https://datatracker.ietf.org/doc/rfc883/">RFC-883</a> and reasons for   
<a class="line" id="line-2851" href="#line-2851"> 2851</a>                 them.  Now obsolete.                                       
<a class="line" id="line-2852" href="#line-2852"> 2852</a>                                                                            
<a class="line" id="line-2853" href="#line-2853"> 2853</a>                                                                            
<a class="line" id="line-2854" href="#line-2854"> 2854</a>                                                                            
<a class="line" id="line-2855" href="#line-2855"> 2855</a>                                                                            
<a class="line" id="line-2856" href="#line-2856"> 2856</a>                                                                            
<a class="line" id="line-2857" href="#line-2857"> 2857</a> <span class="grey">Mockapetris                                                    [Page 52]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-53" ></span><a class="line" id="line-2858" href="#line-2858"> 2858</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2859" href="#line-2859"> 2859</a>                                                                            
<a class="line" id="line-2860" href="#line-2860"> 2860</a>                                                                            
<a class="line" id="line-2861" href="#line-2861"> 2861</a> [<a id="ref-RFC-974">RFC-974</a>]       C. Partridge, &quot;Mail routing and the domain system&quot;,        
<a class="line" id="line-2862" href="#line-2862"> 2862</a>                 <a href="https://datatracker.ietf.org/doc/rfc974/">RFC-974</a>, CSNET CIC BBN Labs, January 1986.                 
<a class="line" id="line-2863" href="#line-2863"> 2863</a>                                                                            
<a class="line" id="line-2864" href="#line-2864"> 2864</a>                 Describes the transition from HOSTS.TXT based mail         
<a class="line" id="line-2865" href="#line-2865"> 2865</a>                 addressing to the more powerful MX system used with the    
<a class="line" id="line-2866" href="#line-2866"> 2866</a>                 domain system.                                             
<a class="line" id="line-2867" href="#line-2867"> 2867</a>                                                                            
<a class="line" id="line-2868" href="#line-2868"> 2868</a> [<a id="ref-RFC-1001">RFC-1001</a>]      NetBIOS Working Group, &quot;Protocol standard for a NetBIOS    
<a class="line" id="line-2869" href="#line-2869"> 2869</a>                 service on a TCP/UDP transport: Concepts and Methods&quot;,     
<a class="line" id="line-2870" href="#line-2870"> 2870</a>                 <a href="https://datatracker.ietf.org/doc/rfc1001/">RFC-1001</a>, March 1987.                                      
<a class="line" id="line-2871" href="#line-2871"> 2871</a>                                                                            
<a class="line" id="line-2872" href="#line-2872"> 2872</a>                 This RFC and <a href="https://datatracker.ietf.org/doc/rfc1002/">RFC-1002</a> are a preliminary design for         
<a class="line" id="line-2873" href="#line-2873"> 2873</a>                 NETBIOS on top of TCP/IP which proposes to base NetBIOS    
<a class="line" id="line-2874" href="#line-2874"> 2874</a>                 name service on top of the DNS.                            
<a class="line" id="line-2875" href="#line-2875"> 2875</a>                                                                            
<a class="line" id="line-2876" href="#line-2876"> 2876</a> [<a id="ref-RFC-1002">RFC-1002</a>]      NetBIOS Working Group, &quot;Protocol standard for a NetBIOS    
<a class="line" id="line-2877" href="#line-2877"> 2877</a>                 service on a TCP/UDP transport: Detailed                   
<a class="line" id="line-2878" href="#line-2878"> 2878</a>                 Specifications&quot;, <a href="https://datatracker.ietf.org/doc/rfc1002/">RFC-1002</a>, March 1987.                     
<a class="line" id="line-2879" href="#line-2879"> 2879</a>                                                                            
<a class="line" id="line-2880" href="#line-2880"> 2880</a> [<a id="ref-RFC-1010">RFC-1010</a>]      J. Reynolds and J. Postel, &quot;Assigned Numbers&quot;, <a href="https://datatracker.ietf.org/doc/rfc1010/">RFC-1010</a>,   
<a class="line" id="line-2881" href="#line-2881"> 2881</a>                 USC/Information Sciences Institute, May 1987               
<a class="line" id="line-2882" href="#line-2882"> 2882</a>                                                                            
<a class="line" id="line-2883" href="#line-2883"> 2883</a>                 Contains socket numbers and mnemonics for host names,      
<a class="line" id="line-2884" href="#line-2884"> 2884</a>                 operating systems, etc.                                    
<a class="line" id="line-2885" href="#line-2885"> 2885</a>                                                                            
<a class="line" id="line-2886" href="#line-2886"> 2886</a> [<a id="ref-RFC-1031">RFC-1031</a>]      W. Lazear, &quot;MILNET Name Domain Transition&quot;, <a href="https://datatracker.ietf.org/doc/rfc1031/">RFC-1031</a>,      
<a class="line" id="line-2887" href="#line-2887"> 2887</a>                 November 1987.                                             
<a class="line" id="line-2888" href="#line-2888"> 2888</a>                                                                            
<a class="line" id="line-2889" href="#line-2889"> 2889</a>                 Describes a plan for converting the MILNET to the DNS.     
<a class="line" id="line-2890" href="#line-2890"> 2890</a>                                                                            
<a class="line" id="line-2891" href="#line-2891"> 2891</a> [<a id="ref-RFC-1032">RFC-1032</a>]      M. K. Stahl, &quot;Establishing a Domain - Guidelines for       
<a class="line" id="line-2892" href="#line-2892"> 2892</a>                 Administrators&quot;, <a href="https://datatracker.ietf.org/doc/rfc1032/">RFC-1032</a>, November 1987.                  
<a class="line" id="line-2893" href="#line-2893"> 2893</a>                                                                            
<a class="line" id="line-2894" href="#line-2894"> 2894</a>                 Describes the registration policies used by the NIC to     
<a class="line" id="line-2895" href="#line-2895"> 2895</a>                 administer the top level domains and delegate subzones.    
<a class="line" id="line-2896" href="#line-2896"> 2896</a>                                                                            
<a class="line" id="line-2897" href="#line-2897"> 2897</a> [<a id="ref-RFC-1033">RFC-1033</a>]      M. K. Lottor, &quot;Domain Administrators Operations Guide&quot;,    
<a class="line" id="line-2898" href="#line-2898"> 2898</a>                 <a href="https://datatracker.ietf.org/doc/rfc1033/">RFC-1033</a>, November 1987.                                   
<a class="line" id="line-2899" href="#line-2899"> 2899</a>                                                                            
<a class="line" id="line-2900" href="#line-2900"> 2900</a>                 A cookbook for domain administrators.                      
<a class="line" id="line-2901" href="#line-2901"> 2901</a>                                                                            
<a class="line" id="line-2902" href="#line-2902"> 2902</a> [Solomon 82]    M. Solomon, L. Landweber, and D. Neuhengen, &quot;The CSNET     
<a class="line" id="line-2903" href="#line-2903"> 2903</a>                 Name Server&quot;, Computer Networks, vol 6, nr 3, July 1982.   
<a class="line" id="line-2904" href="#line-2904"> 2904</a>                                                                            
<a class="line" id="line-2905" href="#line-2905"> 2905</a>                 Describes a name service for CSNET which is independent    
<a class="line" id="line-2906" href="#line-2906"> 2906</a>                 from the DNS and DNS use in the CSNET.                     
<a class="line" id="line-2907" href="#line-2907"> 2907</a>                                                                            
<a class="line" id="line-2908" href="#line-2908"> 2908</a>                                                                            
<a class="line" id="line-2909" href="#line-2909"> 2909</a>                                                                            
<a class="line" id="line-2910" href="#line-2910"> 2910</a>                                                                            
<a class="line" id="line-2911" href="#line-2911"> 2911</a>                                                                            
<a class="line" id="line-2912" href="#line-2912"> 2912</a> <span class="grey">Mockapetris                                                    [Page 53]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-54" ></span><a class="line" id="line-2913" href="#line-2913"> 2913</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2914" href="#line-2914"> 2914</a>                                                                            
<a class="line" id="line-2915" href="#line-2915"> 2915</a>                                                                            
<a class="line" id="line-2916" href="#line-2916"> 2916</a> Index                                                                      
<a class="line" id="line-2917" href="#line-2917"> 2917</a>                                                                            
<a class="line" id="line-2918" href="#line-2918"> 2918</a>           A   12                                                           
<a class="line" id="line-2919" href="#line-2919"> 2919</a>           Absolute names   8                                               
<a class="line" id="line-2920" href="#line-2920"> 2920</a>           Aliases   14, 31                                                 
<a class="line" id="line-2921" href="#line-2921"> 2921</a>           Authority   6                                                    
<a class="line" id="line-2922" href="#line-2922"> 2922</a>           AXFR   17                                                        
<a class="line" id="line-2923" href="#line-2923"> 2923</a>                                                                            
<a class="line" id="line-2924" href="#line-2924"> 2924</a>           Case of characters   7                                           
<a class="line" id="line-2925" href="#line-2925"> 2925</a>           CH   12                                                          
<a class="line" id="line-2926" href="#line-2926"> 2926</a>           CNAME   12, 13, 31                                               
<a class="line" id="line-2927" href="#line-2927"> 2927</a>           Completion queries   18                                          
<a class="line" id="line-2928" href="#line-2928"> 2928</a>                                                                            
<a class="line" id="line-2929" href="#line-2929"> 2929</a>           Domain name   6, 7                                               
<a class="line" id="line-2930" href="#line-2930"> 2930</a>                                                                            
<a class="line" id="line-2931" href="#line-2931"> 2931</a>           Glue RRs   20                                                    
<a class="line" id="line-2932" href="#line-2932"> 2932</a>                                                                            
<a class="line" id="line-2933" href="#line-2933"> 2933</a>           HINFO   12                                                       
<a class="line" id="line-2934" href="#line-2934"> 2934</a>                                                                            
<a class="line" id="line-2935" href="#line-2935"> 2935</a>           IN   12                                                          
<a class="line" id="line-2936" href="#line-2936"> 2936</a>           Inverse queries   16                                             
<a class="line" id="line-2937" href="#line-2937"> 2937</a>           Iterative   4                                                    
<a class="line" id="line-2938" href="#line-2938"> 2938</a>                                                                            
<a class="line" id="line-2939" href="#line-2939"> 2939</a>           Label   7                                                        
<a class="line" id="line-2940" href="#line-2940"> 2940</a>                                                                            
<a class="line" id="line-2941" href="#line-2941"> 2941</a>           Mailbox names   9                                                
<a class="line" id="line-2942" href="#line-2942"> 2942</a>           MX   12                                                          
<a class="line" id="line-2943" href="#line-2943"> 2943</a>                                                                            
<a class="line" id="line-2944" href="#line-2944"> 2944</a>           Name error   27, 36                                              
<a class="line" id="line-2945" href="#line-2945"> 2945</a>           Name servers   5, 17                                             
<a class="line" id="line-2946" href="#line-2946"> 2946</a>           NE   30                                                          
<a class="line" id="line-2947" href="#line-2947"> 2947</a>           Negative caching   44                                            
<a class="line" id="line-2948" href="#line-2948"> 2948</a>           NS   12                                                          
<a class="line" id="line-2949" href="#line-2949"> 2949</a>                                                                            
<a class="line" id="line-2950" href="#line-2950"> 2950</a>           Opcode   16                                                      
<a class="line" id="line-2951" href="#line-2951"> 2951</a>                                                                            
<a class="line" id="line-2952" href="#line-2952"> 2952</a>           PTR   12                                                         
<a class="line" id="line-2953" href="#line-2953"> 2953</a>                                                                            
<a class="line" id="line-2954" href="#line-2954"> 2954</a>           QCLASS   16                                                      
<a class="line" id="line-2955" href="#line-2955"> 2955</a>           QTYPE   16                                                       
<a class="line" id="line-2956" href="#line-2956"> 2956</a>                                                                            
<a class="line" id="line-2957" href="#line-2957"> 2957</a>           RDATA   13                                                       
<a class="line" id="line-2958" href="#line-2958"> 2958</a>           Recursive   4                                                    
<a class="line" id="line-2959" href="#line-2959"> 2959</a>           Recursive service   22                                           
<a class="line" id="line-2960" href="#line-2960"> 2960</a>           Relative names   7                                               
<a class="line" id="line-2961" href="#line-2961"> 2961</a>           Resolvers   6                                                    
<a class="line" id="line-2962" href="#line-2962"> 2962</a>           RR   12                                                          
<a class="line" id="line-2963" href="#line-2963"> 2963</a>                                                                            
<a class="line" id="line-2964" href="#line-2964"> 2964</a>                                                                            
<a class="line" id="line-2965" href="#line-2965"> 2965</a>                                                                            
<a class="line" id="line-2966" href="#line-2966"> 2966</a>                                                                            
<a class="line" id="line-2967" href="#line-2967"> 2967</a> <span class="grey">Mockapetris                                                    [Page 54]</span>   
<span class='pagebreak'></span>
<!--NewPage--><span id="page-55" ></span><a class="line" id="line-2968" href="#line-2968"> 2968</a> <span class="grey"><a href="./rfc1034.html">RFC 1034</a>             Domain Concepts and Facilities        November 1987</span>   
<a class="line" id="line-2969" href="#line-2969"> 2969</a>                                                                            
<a class="line" id="line-2970" href="#line-2970"> 2970</a>                                                                            
<a class="line" id="line-2971" href="#line-2971"> 2971</a>           Safety belt   33                                                 
<a class="line" id="line-2972" href="#line-2972"> 2972</a>           Sections   16                                                    
<a class="line" id="line-2973" href="#line-2973"> 2973</a>           SOA   12                                                         
<a class="line" id="line-2974" href="#line-2974"> 2974</a>           Standard queries   22                                            
<a class="line" id="line-2975" href="#line-2975"> 2975</a>                                                                            
<a class="line" id="line-2976" href="#line-2976"> 2976</a>           Status queries   18                                              
<a class="line" id="line-2977" href="#line-2977"> 2977</a>           Stub resolvers   32                                              
<a class="line" id="line-2978" href="#line-2978"> 2978</a>                                                                            
<a class="line" id="line-2979" href="#line-2979"> 2979</a>           TTL   12, 13                                                     
<a class="line" id="line-2980" href="#line-2980"> 2980</a>                                                                            
<a class="line" id="line-2981" href="#line-2981"> 2981</a>           Wildcards   25                                                   
<a class="line" id="line-2982" href="#line-2982"> 2982</a>                                                                            
<a class="line" id="line-2983" href="#line-2983"> 2983</a>           Zone transfers   28                                              
<a class="line" id="line-2984" href="#line-2984"> 2984</a>           Zones   19                                                       
<a class="line" id="line-2985" href="#line-2985"> 2985</a>                                                                            
<a class="line" id="line-2986" href="#line-2986"> 2986</a>                                                                            
<a class="line" id="line-2987" href="#line-2987"> 2987</a>                                                                            
<a class="line" id="line-2988" href="#line-2988"> 2988</a>                                                                            
<a class="line" id="line-2989" href="#line-2989"> 2989</a>                                                                            
<a class="line" id="line-2990" href="#line-2990"> 2990</a>                                                                            
<a class="line" id="line-2991" href="#line-2991"> 2991</a>                                                                            
<a class="line" id="line-2992" href="#line-2992"> 2992</a>                                                                            
<a class="line" id="line-2993" href="#line-2993"> 2993</a>                                                                            
<a class="line" id="line-2994" href="#line-2994"> 2994</a>                                                                            
<a class="line" id="line-2995" href="#line-2995"> 2995</a>                                                                            
<a class="line" id="line-2996" href="#line-2996"> 2996</a>                                                                            
<a class="line" id="line-2997" href="#line-2997"> 2997</a>                                                                            
<a class="line" id="line-2998" href="#line-2998"> 2998</a>                                                                            
<a class="line" id="line-2999" href="#line-2999"> 2999</a>                                                                            
<a class="line" id="line-3000" href="#line-3000"> 3000</a>                                                                            
<a class="line" id="line-3001" href="#line-3001"> 3001</a>                                                                            
<a class="line" id="line-3002" href="#line-3002"> 3002</a>                                                                            
<a class="line" id="line-3003" href="#line-3003"> 3003</a>                                                                            
<a class="line" id="line-3004" href="#line-3004"> 3004</a>                                                                            
<a class="line" id="line-3005" href="#line-3005"> 3005</a>                                                                            
<a class="line" id="line-3006" href="#line-3006"> 3006</a>                                                                            
<a class="line" id="line-3007" href="#line-3007"> 3007</a>                                                                            
<a class="line" id="line-3008" href="#line-3008"> 3008</a>                                                                            
<a class="line" id="line-3009" href="#line-3009"> 3009</a>                                                                            
<a class="line" id="line-3010" href="#line-3010"> 3010</a>                                                                            
<a class="line" id="line-3011" href="#line-3011"> 3011</a>                                                                            
<a class="line" id="line-3012" href="#line-3012"> 3012</a>                                                                            
<a class="line" id="line-3013" href="#line-3013"> 3013</a>                                                                            
<a class="line" id="line-3014" href="#line-3014"> 3014</a>                                                                            
<a class="line" id="line-3015" href="#line-3015"> 3015</a>                                                                            
<a class="line" id="line-3016" href="#line-3016"> 3016</a>                                                                            
<a class="line" id="line-3017" href="#line-3017"> 3017</a>                                                                            
<a class="line" id="line-3018" href="#line-3018"> 3018</a>                                                                            
<a class="line" id="line-3019" href="#line-3019"> 3019</a>                                                                            
<a class="line" id="line-3020" href="#line-3020"> 3020</a>                                                                            
<a class="line" id="line-3021" href="#line-3021"> 3021</a>                                                                            
<a class="line" id="line-3022" href="#line-3022"> 3022</a> Mockapetris                                                    [Page 55]   
<a class="line" id="line-3023" href="#line-3023"> 3023</a>                                                                            
</span></pre><div class="annotation"><div onclick="clicked(this)" class="err editorial verified ivan panchenko"><div class="title"><span class="reference"><a href="#line-2813">line-2813</a> Ivan Panchenko</span><span class="caption"><span id="rfc.erratum.6462">(Editorial Erratum #<a target='_blank' title='ivan panchenko (Editorial)' href='https://www.rfc-editor.org/errata/eid6462'>6462</a>) [Verified]</span></span><span class="timestamp"></span></div><div class="notes"><div class='original'><pre>
                Superceeded by this memo.
</pre></div>
<div class='correct'>It should say:<pre>
                Super<del>cee</del><ins>se</ins>ded by this memo.
</pre></div>
<hr/>
<div class='note'>
Misspelled "superseded".
</div>

</div></div></div></div>

</body></html>
